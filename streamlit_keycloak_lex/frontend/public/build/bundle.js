var app=function(){"use strict";function t(){}function e(t,e){for(const r in e)t[r]=e[r];return t}function r(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(r)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,r){t.insertBefore(e,r||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function d(){return h(" ")}function f(){return h("")}function p(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function y(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function b(t,e,r,n){t.style.setProperty(e,r,"")}let g,m;function _(){if(void 0===g){g=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){g=!0}}return g}function w(t,e){return new t(e)}function v(t){m=t}function I(){if(!m)throw new Error("Function called outside component initialization");return m}function S(t){I().$$.on_mount.push(t)}function T(){const t=I();return(e,r,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=function(t,e,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}(e,r,{cancelable:n});return i.slice().forEach(e=>{e.call(t,s)}),!s.defaultPrevented}return!0}}function A(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(t=>t.call(this,e))}const B=[],L=[];let O=[];const x=[],D=Promise.resolve();let k=!1;function U(t){O.push(t)}const E=new Set;let M=0;function F(){if(0!==M)return;const t=m;do{try{for(;M<B.length;){const t=B[M];M++,v(t),N(t.$$)}}catch(t){throw B.length=0,M=0,t}for(v(null),B.length=0,M=0;L.length;)L.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];E.has(e)||(E.add(e),e())}O.length=0}while(B.length);for(;x.length;)x.pop()();k=!1,E.clear(),v(t)}function N(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const C=new Set;let R;function V(){R={r:0,c:[],p:R}}function P(){R.r||i(R.c),R=R.p}function z(t,e){t&&t.i&&(C.delete(t),t.i(e))}function $(t,e,r,n){if(t&&t.o){if(C.has(t))return;C.add(t),R.c.push(()=>{C.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function j(t,e){const r=e.token={};function n(t,n,i,s){if(e.token!==r)return;e.resolved=s;let o=e.ctx;void 0!==i&&(o=o.slice(),o[i]=s);const a=t&&(e.current=t)(o);let c=!1;e.block&&(e.blocks?e.blocks.forEach((t,r)=>{r!==n&&t&&(V(),$(t,1,1,()=>{e.blocks[r]===t&&(e.blocks[r]=null)}),P())}):e.block.d(1),a.c(),z(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[n]=a),c&&F()}if(!(i=t)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}else{const r=I();if(t.then(t=>{v(r),n(e.then,1,e.value,t),v(null)},t=>{if(v(r),n(e.catch,2,e.error,t),v(null),!e.hasCatch)throw t}),e.current!==e.pending)return n(e.pending,0),!0}var i}function Y(t,e,r){const n=e.slice(),{resolved:i}=t;t.current===t.then&&(n[t.value]=i),t.current===t.catch&&(n[t.error]=i),t.block.p(n,r)}function W(t){t&&t.c()}function H(t,e,n,o){const{fragment:a,after_update:c}=t.$$;a&&a.m(e,n),o||U(()=>{const e=t.$$.on_mount.map(r).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(U)}function K(t,e){const r=t.$$;null!==r.fragment&&(!function(t){const e=[],r=[];O.forEach(n=>-1===t.indexOf(n)?e.push(n):r.push(n)),r.forEach(t=>t()),O=e}(r.after_update),i(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&(B.push(t),k||(k=!0,D.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,r,s,o,a,c,l,h=[-1]){const d=m;v(e);const f=e.$$={fragment:null,ctx:[],props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:r.target||d.$$.root};let p=!1;if(f.ctx=s?s(e,r.props||{},(t,r,...n)=>{const i=n.length?n[0]:r;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&q(e,t)),r}):[],f.update(),p=!0,i(f.before_update),f.fragment=!!o&&o(f.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();r.intro&&z(e.$$.fragment),H(e,r.target,r.anchor,r.customElement),F()}v(d)}class G{$destroy(){K(this,1),this.$destroy=t}$on(e,r){if(!s(r))return t;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const t=n.indexOf(r);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/**
     * @author Toru Nagashima <https://github.com/mysticatea>
     * @copyright 2015 Toru Nagashima. All rights reserved.
     * See LICENSE file in root directory for full license.
     */const Z=new WeakMap,X=new WeakMap;function Q(t){const e=Z.get(t);return console.assert(null!=e,"'this' is expected an Event object, but got",t),e}function tt(t){null==t.passiveListener?t.event.cancelable&&(t.canceled=!0,"function"==typeof t.event.preventDefault&&t.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener)}function et(t,e){Z.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const r=Object.keys(e);for(let t=0;t<r.length;++t){const e=r[t];e in this||Object.defineProperty(this,e,rt(e))}}function rt(t){return{get(){return Q(this).event[t]},set(e){Q(this).event[t]=e},configurable:!0,enumerable:!0}}function nt(t){return{value(){const e=Q(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function it(t){if(null==t||t===Object.prototype)return et;let e=X.get(t);return null==e&&(e=function(t,e){const r=Object.keys(e);if(0===r.length)return t;function n(e,r){t.call(this,e,r)}n.prototype=Object.create(t.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){const s=r[i];if(!(s in t.prototype)){const t="function"==typeof Object.getOwnPropertyDescriptor(e,s).value;Object.defineProperty(n.prototype,s,t?nt(s):rt(s))}}return n}(it(Object.getPrototypeOf(t)),t),X.set(t,e)),e}function st(t){return Q(t).immediateStopped}function ot(t,e){Q(t).passiveListener=e}et.prototype={get type(){return Q(this).event.type},get target(){return Q(this).eventTarget},get currentTarget(){return Q(this).currentTarget},composedPath(){const t=Q(this).currentTarget;return null==t?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return Q(this).eventPhase},stopPropagation(){const t=Q(this);t.stopped=!0,"function"==typeof t.event.stopPropagation&&t.event.stopPropagation()},stopImmediatePropagation(){const t=Q(this);t.stopped=!0,t.immediateStopped=!0,"function"==typeof t.event.stopImmediatePropagation&&t.event.stopImmediatePropagation()},get bubbles(){return Boolean(Q(this).event.bubbles)},get cancelable(){return Boolean(Q(this).event.cancelable)},preventDefault(){tt(Q(this))},get defaultPrevented(){return Q(this).canceled},get composed(){return Boolean(Q(this).event.composed)},get timeStamp(){return Q(this).timeStamp},get srcElement(){return Q(this).eventTarget},get cancelBubble(){return Q(this).stopped},set cancelBubble(t){if(!t)return;const e=Q(this);e.stopped=!0,"boolean"==typeof e.event.cancelBubble&&(e.event.cancelBubble=!0)},get returnValue(){return!Q(this).canceled},set returnValue(t){t||tt(Q(this))},initEvent(){}},Object.defineProperty(et.prototype,"constructor",{value:et,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(et.prototype,window.Event.prototype),X.set(window.Event.prototype,et));const at=new WeakMap;function ct(t){return null!==t&&"object"==typeof t}function ut(t){const e=at.get(t);if(null==e)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function lt(t,e){Object.defineProperty(t,`on${e}`,function(t){return{get(){let e=ut(this).get(t);for(;null!=e;){if(3===e.listenerType)return e.listener;e=e.next}return null},set(e){"function"==typeof e||ct(e)||(e=null);const r=ut(this);let n=null,i=r.get(t);for(;null!=i;)3===i.listenerType?null!==n?n.next=i.next:null!==i.next?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(null!==e){const i={listener:e,listenerType:3,passive:!1,once:!1,next:null};null===n?r.set(t,i):n.next=i}},configurable:!0,enumerable:!0}}(e))}function ht(t){function e(){dt.call(this)}e.prototype=Object.create(dt.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)lt(e.prototype,t[r]);return e}function dt(){if(!(this instanceof dt)){if(1===arguments.length&&Array.isArray(arguments[0]))return ht(arguments[0]);if(arguments.length>0){const t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return ht(t)}throw new TypeError("Cannot call a class as a function")}at.set(this,new Map)}dt.prototype={addEventListener(t,e,r){if(null==e)return;if("function"!=typeof e&&!ct(e))throw new TypeError("'listener' should be a function or an object.");const n=ut(this),i=ct(r),s=(i?Boolean(r.capture):Boolean(r))?1:2,o={listener:e,listenerType:s,passive:i&&Boolean(r.passive),once:i&&Boolean(r.once),next:null};let a=n.get(t);if(void 0===a)return void n.set(t,o);let c=null;for(;null!=a;){if(a.listener===e&&a.listenerType===s)return;c=a,a=a.next}c.next=o},removeEventListener(t,e,r){if(null==e)return;const n=ut(this),i=(ct(r)?Boolean(r.capture):Boolean(r))?1:2;let s=null,o=n.get(t);for(;null!=o;){if(o.listener===e&&o.listenerType===i)return void(null!==s?s.next=o.next:null!==o.next?n.set(t,o.next):n.delete(t));s=o,o=o.next}},dispatchEvent(t){if(null==t||"string"!=typeof t.type)throw new TypeError('"event.type" should be a string.');const e=ut(this),r=t.type;let n=e.get(r);if(null==n)return!0;const i=function(t,e){return new(it(Object.getPrototypeOf(e)))(t,e)}(this,t);let s=null;for(;null!=n;){if(n.once?null!==s?s.next=n.next:null!==n.next?e.set(r,n.next):e.delete(r):s=n,ot(i,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,i)}catch(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(i);if(st(i))break;n=n.next}return ot(i,null),function(t,e){Q(t).eventPhase=e}(i,0),function(t,e){Q(t).currentTarget=e}(i,null),!i.defaultPrevented}},Object.defineProperty(dt.prototype,"constructor",{value:dt,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(dt.prototype,window.EventTarget.prototype);var ft={};function pt(t,e,r){return e<=t&&t<=r}function yt(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}ft.SIZEOF_SHORT=2,ft.SIZEOF_INT=4,ft.FILE_IDENTIFIER_LENGTH=4,ft.Encoding={UTF8_BYTES:1,UTF16_STRING:2},ft.int32=new Int32Array(2),ft.float32=new Float32Array(ft.int32.buffer),ft.float64=new Float64Array(ft.int32.buffer),ft.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],ft.Long=function(t,e){this.low=0|t,this.high=0|e},ft.Long.create=function(t,e){return 0==t&&0==e?ft.Long.ZERO:new ft.Long(t,e)},ft.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},ft.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},ft.Long.ZERO=new ft.Long(0,0),ft.Builder=function(t){if(t)e=t;else var e=1024;this.bb=ft.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},ft.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},ft.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},ft.Builder.prototype.dataBuffer=function(){return this.bb},ft.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},ft.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<r+t+e;){var n=this.bb.capacity();this.bb=ft.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n}this.pad(r)},ft.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},ft.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},ft.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},ft.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},ft.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},ft.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},ft.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},ft.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},ft.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},ft.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},ft.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},ft.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},ft.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},ft.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},ft.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},ft.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},ft.Builder.prototype.addFieldInt64=function(t,e,r){!this.force_defaults&&e.equals(r)||(this.addInt64(e),this.slot(t))},ft.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},ft.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},ft.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},ft.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},ft.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},ft.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},ft.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},ft.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},ft.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,n=ft.ByteBuffer.allocate(r);return n.setPosition(r-e),n.bytes().set(t.bytes(),r-e),n},ft.Builder.prototype.addOffset=function(t){this.prep(ft.SIZEOF_INT,0),this.writeInt32(this.offset()-t+ft.SIZEOF_INT)},ft.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},ft.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var r=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var n=(r+2)*ft.SIZEOF_SHORT;this.addInt16(n);var i=0,s=this.space;t:for(e=0;e<this.vtables.length;e++){var o=this.bb.capacity()-this.vtables[e];if(n==this.bb.readInt16(o)){for(var a=ft.SIZEOF_SHORT;a<n;a+=ft.SIZEOF_SHORT)if(this.bb.readInt16(s+a)!=this.bb.readInt16(o+a))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},ft.Builder.prototype.finish=function(t,e){if(e){var r=e;if(this.prep(this.minalign,ft.SIZEOF_INT+ft.FILE_IDENTIFIER_LENGTH),r.length!=ft.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+ft.FILE_IDENTIFIER_LENGTH);for(var n=ft.FILE_IDENTIFIER_LENGTH-1;n>=0;n--)this.writeInt8(r.charCodeAt(n))}this.prep(this.minalign,ft.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},ft.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,n=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(n+e)))throw new Error("FlatBuffers: field "+e+" must be set")},ft.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(ft.SIZEOF_INT,t*e),this.prep(r,t*e)},ft.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},ft.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var r=0;r<t.length;){var n,i=t.charCodeAt(r++);if(i<55296||i>=56320)n=i;else n=(i<<10)+t.charCodeAt(r++)+-56613888;n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(63&n|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);r=0;for(var s=this.space,o=this.bb.bytes();r<e.length;r++)o[s++]=e[r];return this.endVector()},ft.Builder.prototype.createLong=function(t,e){return ft.Long.create(t,e)},ft.ByteBuffer=function(t){this.bytes_=t,this.position_=0},ft.ByteBuffer.allocate=function(t){return new ft.ByteBuffer(new Uint8Array(t))},ft.ByteBuffer.prototype.clear=function(){this.position_=0},ft.ByteBuffer.prototype.bytes=function(){return this.bytes_},ft.ByteBuffer.prototype.position=function(){return this.position_},ft.ByteBuffer.prototype.setPosition=function(t){this.position_=t},ft.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},ft.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},ft.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},ft.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},ft.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},ft.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},ft.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},ft.ByteBuffer.prototype.readInt64=function(t){return new ft.Long(this.readInt32(t),this.readInt32(t+4))},ft.ByteBuffer.prototype.readUint64=function(t){return new ft.Long(this.readUint32(t),this.readUint32(t+4))},ft.ByteBuffer.prototype.readFloat32=function(t){return ft.int32[0]=this.readInt32(t),ft.float32[0]},ft.ByteBuffer.prototype.readFloat64=function(t){return ft.int32[ft.isLittleEndian?0:1]=this.readInt32(t),ft.int32[ft.isLittleEndian?1:0]=this.readInt32(t+4),ft.float64[0]},ft.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},ft.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},ft.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},ft.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},ft.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},ft.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},ft.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},ft.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},ft.ByteBuffer.prototype.writeFloat32=function(t,e){ft.float32[0]=e,this.writeInt32(t,ft.int32[0])},ft.ByteBuffer.prototype.writeFloat64=function(t,e){ft.float64[0]=e,this.writeInt32(t,ft.int32[ft.isLittleEndian?0:1]),this.writeInt32(t+4,ft.int32[ft.isLittleEndian?1:0])},ft.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+ft.SIZEOF_INT+ft.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<ft.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+ft.SIZEOF_INT+e));return t},ft.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},ft.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},ft.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",i=0;if(t+=ft.SIZEOF_INT,e===ft.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;i<r;){var s,o=this.readUint8(t+i++);if(o<192)s=o;else{var a=this.readUint8(t+i++);if(o<224)s=(31&o)<<6|63&a;else{var c=this.readUint8(t+i++);if(o<240)s=(15&o)<<12|(63&a)<<6|63&c;else s=(7&o)<<18|(63&a)<<12|(63&c)<<6|63&this.readUint8(t+i++)}}s<65536?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return n},ft.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},ft.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+ft.SIZEOF_INT},ft.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},ft.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=ft.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+ft.FILE_IDENTIFIER_LENGTH);for(var e=0;e<ft.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+ft.SIZEOF_INT+e))return!1;return!0},ft.ByteBuffer.prototype.createLong=function(t,e){return ft.Long.create(t,e)};function bt(t){this.tokens=[].slice.call(t)}bt.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var gt=-1;function mt(t,e){if(t)throw TypeError("Decoder error");return e||65533}var _t="utf-8";function wt(t,e){if(!(this instanceof wt))return new wt(t,e);if((t=void 0!==t?String(t).toLowerCase():_t)!==_t)throw new Error("Encoding not supported. Only utf-8 is supported");e=yt(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if((t=void 0!==t?String(t).toLowerCase():_t)!==_t)throw new Error("Encoding not supported. Only utf-8 is supported");e=yt(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function It(t){var e=t.fatal,r=0,n=0,i=0,s=128,o=191;this.handler=function(t,a){if(-1===a&&0!==i)return i=0,mt(e);if(-1===a)return gt;if(0===i){if(pt(a,0,127))return a;if(pt(a,194,223))i=1,r=a-192;else if(pt(a,224,239))224===a&&(s=160),237===a&&(o=159),i=2,r=a-224;else{if(!pt(a,240,244))return mt(e);240===a&&(s=144),244===a&&(o=143),i=3,r=a-240}return r<<=6*i,null}if(!pt(a,s,o))return r=i=n=0,s=128,o=191,t.prepend(a),mt(e);if(s=128,o=191,r+=a-128<<6*(i-(n+=1)),n!==i)return null;var c=r;return r=i=n=0,c}}function St(t){t.fatal,this.handler=function(t,e){if(-1===e)return gt;if(pt(e,0,127))return e;var r,n;pt(e,128,2047)?(r=1,n=192):pt(e,2048,65535)?(r=2,n=224):pt(e,65536,1114111)&&(r=3,n=240);for(var i=[(e>>6*r)+n];r>0;){var s=e>>6*(r-1);i.push(128|63&s),r-=1}return i}}wt.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=yt(e),this._streaming||(this._decoder=new It({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var n,i=new bt(r),s=[];!i.endOfStream()&&(n=this._decoder.handler(i,i.read()))!==gt;)null!==n&&(Array.isArray(n)?s.push.apply(s,n):s.push(n));if(!this._streaming){do{if((n=this._decoder.handler(i,i.read()))===gt)break;null!==n&&(Array.isArray(n)?s.push.apply(s,n):s.push(n))}while(!i.endOfStream());this._decoder=null}return s.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===s[0]?(this._BOMseen=!0,s.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(s)}},vt.prototype={encode:function(t,e){t=t?String(t):"",e=yt(e),this._streaming||(this._encoder=new St(this._options)),this._streaming=Boolean(e.stream);for(var r,n=[],i=new bt(function(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}(t));!i.endOfStream()&&(r=this._encoder.handler(i,i.read()))!==gt;)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;(r=this._encoder.handler(i,i.read()))!==gt;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}};const Tt="function"==typeof Buffer?Buffer:null,At="function"==typeof TextDecoder&&"function"==typeof TextEncoder,Bt=(t=>{if(At||!Tt){const e=new t("utf-8");return t=>e.decode(t)}return t=>{const{buffer:e,byteOffset:r,length:n}=re(t);return Tt.from(e,r,n).toString()}})("undefined"!=typeof TextDecoder?TextDecoder:wt),Lt=(t=>{if(At||!Tt){const e=new t;return t=>e.encode(t)}return(t="")=>re(Tt.from(t,"utf8"))})("undefined"!=typeof TextEncoder?TextEncoder:vt),Ot=Object.freeze({done:!0,value:void 0});class xt{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Dt{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class kt extends Dt{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}async cancel(t){await this.return(t)}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Ot);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}async throw(t){return await this.abort(t),Ot}async return(t){return await this.close(),Ot}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((t,e)=>{this.resolvers.push({resolve:t,reject:e})}):Promise.resolve(Ot)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(`${this} is closed`)}}const[Ut,Et]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[Mt,Ft]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[Nt,Ct]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),Rt=t=>"boolean"==typeof t,Vt=t=>"function"==typeof t,Pt=t=>null!=t&&Object(t)===t,zt=t=>Pt(t)&&Vt(t.then),$t=t=>Pt(t)&&Vt(t[Symbol.iterator]),jt=t=>Pt(t)&&Vt(t[Symbol.asyncIterator]),Yt=t=>Pt(t)&&Pt(t.schema),Wt=t=>Pt(t)&&"done"in t&&"value"in t,Ht=t=>Pt(t)&&Vt(t.stat)&&(t=>"number"==typeof t)(t.fd),Kt=t=>Pt(t)&&qt(t.body),qt=t=>Pt(t)&&Vt(t.cancel)&&Vt(t.getReader)&&!(t instanceof Dt),Jt=t=>Pt(t)&&Vt(t.read)&&Vt(t.pipe)&&Rt(t.readable)&&!(t instanceof Dt);var Gt=ft.ByteBuffer;const Zt="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Xt(t,e,r=0,n=e.byteLength){const i=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,i),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,i));return s.set(o,r),t}function Qt(t,e){let r,n,i,s=function(t){let e,r,n,i,s=t[0]?[t[0]]:[];for(let o,a,c=0,u=0,l=t.length;++c<l;)o=s[u],a=t[c],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset?a&&(s[++u]=a):(({byteOffset:e,byteLength:n}=o),({byteOffset:r,byteLength:i}=a),e+n<r||r+i<e?a&&(s[++u]=a):s[u]=new Uint8Array(o.buffer,e,r-e+i));return s}(t),o=s.reduce((t,e)=>t+e.byteLength,0),a=0,c=-1,u=Math.min(e||1/0,o);for(let t=s.length;++c<t;){if(r=s[c],n=r.subarray(0,Math.min(r.length,u-a)),u<=a+n.length){n.length<r.length?s[c]=r.subarray(n.length):n.length===r.length&&c++,i?Xt(i,n,a):i=n;break}Xt(i||(i=new Uint8Array(u)),n,a),a+=n.length}return[i||new Uint8Array(0),s.slice(c),o-(i?i.byteLength:0)]}function te(t,e){let r=Wt(e)?e.value:e;return r instanceof t?t===Uint8Array?new t(r.buffer,r.byteOffset,r.byteLength):r:r?("string"==typeof r&&(r=Lt(r)),r instanceof ArrayBuffer||r instanceof Zt?new t(r):r instanceof Gt?te(t,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new t(0):new t(r.buffer,r.byteOffset,r.byteLength/t.BYTES_PER_ELEMENT):t.from(r)):new t(0)}const ee=t=>te(Int32Array,t),re=t=>te(Uint8Array,t),ne=t=>(t.next(),t);const ie=t=>function*(t,e){const r=function*(t){yield t},n="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Zt?r(e):$t(e)?e:r(e);yield*ne(function*(e){let r=null;do{r=e.next(yield te(t,r))}while(!r.done)}(n[Symbol.iterator]()))}(Uint8Array,t);async function*se(t,e){if(zt(e))return yield*se(t,await e);const r=async function*(t){yield await t},n="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Zt?r(e):$t(e)?async function*(t){yield*ne(function*(t){let e=null;do{e=t.next(yield e&&e.value)}while(!e.done)}(t[Symbol.iterator]()))}(e):jt(e)?e:r(e);yield*ne(async function*(e){let r=null;do{r=await e.next(yield te(t,r))}while(!r.done)}(n[Symbol.asyncIterator]()))}const oe=t=>se(Uint8Array,t);function ae(t,e,r){if(0!==t){r=r.slice(0,e+1);for(let n=-1;++n<=e;)r[n]+=t}return r}var ce={fromIterable:t=>ue(function*(t){let e,r,n,i,s=!1,o=[],a=0;function c(){return"peek"===n?Qt(o,i)[0]:([r,o,a]=Qt(o,i),r)}({cmd:n,size:i}=yield null);let u=ie(t)[Symbol.iterator]();try{do{if(({done:e,value:r}=isNaN(i-a)?u.next(void 0):u.next(i-a)),!e&&r.byteLength>0&&(o.push(r),a+=r.byteLength),e||i<=a)do{({cmd:n,size:i}=yield c())}while(i<a)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&u.throw(t)}finally{!1===s&&"function"==typeof u.return&&u.return()}}(t)),fromAsyncIterable:t=>ue(async function*(t){let e,r,n,i,s=!1,o=[],a=0;function c(){return"peek"===n?Qt(o,i)[0]:([r,o,a]=Qt(o,i),r)}({cmd:n,size:i}=yield null);let u=oe(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:r}=isNaN(i-a)?await u.next(void 0):await u.next(i-a)),!e&&r.byteLength>0&&(o.push(r),a+=r.byteLength),e||i<=a)do{({cmd:n,size:i}=yield c())}while(i<a)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&await u.throw(t)}finally{!1===s&&"function"==typeof u.return&&await u.return()}}(t)),fromDOMStream:t=>ue(async function*(t){let e,r,n,i=!1,s=!1,o=[],a=0;function c(){return"peek"===r?Qt(o,n)[0]:([e,o,a]=Qt(o,n),e)}({cmd:r,size:n}=yield null);let u=new le(t);try{do{if(({done:i,value:e}=isNaN(n-a)?await u.read(void 0):await u.read(n-a)),!i&&e.byteLength>0&&(o.push(re(e)),a+=e.byteLength),i||n<=a)do{({cmd:r,size:n}=yield c())}while(n<a)}while(!i)}catch(t){(s=!0)&&await u.cancel(t)}finally{!1===s?await u.cancel():t.locked&&u.releaseLock()}}(t)),fromNodeStream:t=>ue(async function*(t){let e,r,n,i=[],s="error",o=!1,a=null,c=0,u=[];function l(){return"peek"===e?Qt(u,r)[0]:([n,u,c]=Qt(u,r),n)}if(({cmd:e,size:r}=yield null),t.isTTY)return yield new Uint8Array(0);try{i[0]=de(t,"end"),i[1]=de(t,"error");do{if(i[2]=de(t,"readable"),[s,a]=await Promise.race(i.map(t=>t[2])),"error"===s)break;if((o="end"===s)||(isFinite(r-c)?(n=re(t.read(r-c)),n.byteLength<r-c&&(n=re(t.read(void 0)))):n=re(t.read(void 0)),n.byteLength>0&&(u.push(n),c+=n.byteLength)),o||r<=c)do{({cmd:e,size:r}=yield l())}while(r<c)}while(!o)}finally{await h(i,"error"===s?a:null)}function h(e,r){return n=u=null,new Promise(async(n,i)=>{for(const[r,n]of e)t.off(r,n);try{const e=t.destroy;e&&e.call(t,r),r=void 0}catch(t){r=t||r}finally{null!=r?i(r):n()}})}}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const ue=t=>(t.next(),t);class le{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(t){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(t){const{reader:e,source:r}=this;e&&await e.cancel(t).catch(()=>{}),r&&r.locked&&this.releaseLock()}async read(t){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=this.supportsBYOB&&"number"==typeof t?await this.readFromBYOBReader(t):await this.getDefaultReader().read();return!e.done&&(e.value=re(e)),e}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch(()=>{})),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch(()=>{})),this.reader=this.byobReader}async readFromBYOBReader(t){return await he(this.getBYOBReader(),new ArrayBuffer(t),0,t)}}async function he(t,e,r,n){if(r>=n)return{done:!1,value:new Uint8Array(e,0,n)};const{done:i,value:s}=await t.read(new Uint8Array(e,r,n-r));return(r+=s.byteLength)<n&&!i?await he(t,s.buffer,r,n):{done:i,value:new Uint8Array(s.buffer,0,r)}}const de=(t,e)=>{let r,n=t=>r([e,t]);return[e,n,new Promise(i=>(r=i)&&t.once(e,n))]};class fe{}var pe,ye;!function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4"}((n=r.flatbuf||(r.flatbuf={})).MetadataVersion||(n.MetadataVersion={}))}(pe||(pe={})),function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}((n=r.flatbuf||(r.flatbuf={})).UnionMode||(n.UnionMode={}))}(pe||(pe={})),function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}((n=r.flatbuf||(r.flatbuf={})).Precision||(n.Precision={}))}(pe||(pe={})),function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}((n=r.flatbuf||(r.flatbuf={})).DateUnit||(n.DateUnit={}))}(pe||(pe={})),function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}((n=r.flatbuf||(r.flatbuf={})).TimeUnit||(n.TimeUnit={}))}(pe||(pe={})),function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME"}((n=r.flatbuf||(r.flatbuf={})).IntervalUnit||(n.IntervalUnit={}))}(pe||(pe={})),function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}((n=r.flatbuf||(r.flatbuf={})).Type||(n.Type={}))}(pe||(pe={})),function(t){var e,r,n,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),n=r.flatbuf||(r.flatbuf={}),(i=n.Endianness||(n.Endianness={}))[i.Little=0]="Little",i[i.Big=1]="Big"}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}}t.Null=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}}t.Struct_=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}}t.List=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeList(t){t.startObject(0)}static endLargeList(t){return t.endObject()}static createLargeList(t){return e.startLargeList(t),e.endLargeList(t)}}t.LargeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,r){return e.startFixedSizeList(t),e.addListSize(t,r),e.endFixedSizeList(t)}}t.FixedSizeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,r){return e.startMap(t),e.addKeysSorted(t,r),e.endMap(t)}}t.Map=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return r.startUnion(t),r.addMode(t,e),r.addTypeIds(t,n),r.endUnion(t)}}e.Union=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,r,n){return e.startInt(t),e.addBitWidth(t,r),e.addIsSigned(t,n),e.endInt(t)}}t.Int=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return r.startFloatingPoint(t),r.addPrecision(t,e),r.endFloatingPoint(t)}}e.FloatingPoint=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}}t.Utf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}}t.Binary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}}t.LargeUtf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}}t.LargeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,r){return e.startFixedSizeBinary(t),e.addByteWidth(t,r),e.endFixedSizeBinary(t)}}t.FixedSizeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}}t.Bool=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}static startDecimal(t){t.startObject(2)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static endDecimal(t){return t.endObject()}static createDecimal(t,r,n){return e.startDecimal(t),e.addPrecision(t,r),e.addScale(t,n),e.endDecimal(t)}}t.Decimal=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return r.startDate(t),r.addUnit(t,e),r.endDate(t)}}e.Date=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return r.startTime(t),r.addUnit(t,e),r.addBitWidth(t,n),r.endTime(t)}}e.Time=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return r.startTimestamp(t),r.addUnit(t,e),r.addTimezone(t,n),r.endTimestamp(t)}}e.Timestamp=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return r.startInterval(t),r.addUnit(t,e),r.endInterval(t)}}e.Interval=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDuration(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,e){return r.startDuration(t),r.addUnit(t,e),r.endDuration(t)}}e.Duration=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,r,n){return e.startKeyValue(t),e.addKey(t,r),e.addValue(t,n),e.endKeyValue(t)}}t.KeyValue=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryEncoding(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryEncoding(t){return t.endObject()}static createDictionaryEncoding(t,e,n,i){return r.startDictionaryEncoding(t),r.addId(t,e),r.addIndexType(t,n),r.addIsOrdered(t,i),r.endDictionaryEncoding(t)}}e.DictionaryEncoding=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE}type(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(e,r){let n=this.bb.__offset(this.bb_pos,14);return n?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let n=this.bb.__offset(this.bb_pos,16);return n?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(e,r){e.addFieldInt8(2,r,t.apache.arrow.flatbuf.Type.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}static createField(t,e,n,i,s,o,a,c){return r.startField(t),r.addName(t,e),r.addNullable(t,n),r.addTypeType(t,i),r.addType(t,s),r.addDictionary(t,o),r.addChildren(t,a),r.addCustomMetadata(t,c),r.endField(t)}}e.Field=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Buffer=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little}fields(e,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(3)}static addEndianness(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Endianness.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static createSchema(t,e,n,i){return r.startSchema(t),r.addEndianness(t,e),r.addFields(t,n),r.addCustomMetadata(t,i),r.endSchema(t)}}e.Schema=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(pe||(pe={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Schema=pe.apache.arrow.flatbuf.Schema}(ye||(ye={})),function(t){var e,r,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}((n=r.flatbuf||(r.flatbuf={})).MessageHeader||(n.MessageHeader={}))}(ye||(ye={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).FieldNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(ye||(ye={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(e,r){let n=this.bb.__offset(this.bb_pos,6);return n?(r||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+n)+16*e,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new pe.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+r)+16*t,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRecordBatch(t){t.startObject(3)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static endRecordBatch(t){return t.endObject()}static createRecordBatch(t,e,n,i){return r.startRecordBatch(t),r.addLength(t,e),r.addNodes(t,n),r.addBuffers(t,i),r.endRecordBatch(t)}}e.RecordBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(ye||(ye={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}static createDictionaryBatch(t,e,n,i){return r.startDictionaryBatch(t),r.addId(t,e),r.addData(t,n),r.addIsDelta(t,i),r.endDictionaryBatch(t)}}e.DictionaryBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(ye||(ye={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pe.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE}header(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new pe.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,pe.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(e,r){e.addFieldInt8(1,r,t.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static createMessage(t,e,n,i,s,o){return r.startMessage(t),r.addVersion(t,e),r.addHeaderType(t,n),r.addHeader(t,i),r.addBodyLength(t,s),r.addCustomMetadata(t,o),r.endMessage(t)}}e.Message=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(ye||(ye={})),pe.apache.arrow.flatbuf.Type;var be,ge,me=pe.apache.arrow.flatbuf.DateUnit,_e=pe.apache.arrow.flatbuf.TimeUnit,we=pe.apache.arrow.flatbuf.Precision,ve=pe.apache.arrow.flatbuf.UnionMode,Ie=pe.apache.arrow.flatbuf.IntervalUnit,Se=ye.apache.arrow.flatbuf.MessageHeader,Te=pe.apache.arrow.flatbuf.MetadataVersion;function Ae(t,e,r,n){return!!(r&1<<n)}function Be(t,e,r,n){return(r&1<<n)>>n}function Le(t,e,r){const n=r.byteLength+7&-8;if(t>0||r.byteLength<n){const i=new Uint8Array(n);return i.set(t%8==0?r.subarray(t>>3):Oe(xe(r,t,e,null,Ae)).subarray(0,n)),i}return r}function Oe(t){let e=[],r=0,n=0,i=0;for(const s of t)s&&(i|=1<<n),8===++n&&(e[r++]=i,i=n=0);(0===r||n>0)&&(e[r++]=i);let s=new Uint8Array(e.length+7&-8);return s.set(e),s}function*xe(t,e,r,n,i){let s=e%8,o=e>>3,a=0,c=r;for(;c>0;s=0){let e=t[o++];do{yield i(n,a++,e,s)}while(--c>0&&++s<8)}}function De(t,e,r){if(r-e<=0)return 0;if(r-e<8){let n=0;for(const i of xe(t,e,r-e,t,Be))n+=i;return n}const n=r>>3<<3,i=e+(e%8==0?0:8-e%8);return De(t,e,i)+De(t,n,r)+function(t,e,r){let n=0,i=0|e;const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=void 0===r?t.byteLength:i+r;for(;o-i>=4;)n+=ke(s.getUint32(i)),i+=4;for(;o-i>=2;)n+=ke(s.getUint16(i)),i+=2;for(;o-i>=1;)n+=ke(s.getUint8(i)),i+=1;return n}(t,i>>3,n-i>>3)}function ke(t){let e=0|t;return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(be||(be={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(ge||(ge={}));class Ue{visitMany(t,...e){return t.map((t,r)=>this.visit(t,...e.map(t=>t[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,r=!0){let n=null,i=be.NONE;e instanceof Lr||e instanceof fe?i=Ee(e.type):e instanceof We?i=Ee(e):"number"!=typeof(i=e)&&(i=be[e]);switch(i){case be.Null:n=t.visitNull;break;case be.Bool:n=t.visitBool;break;case be.Int:n=t.visitInt;break;case be.Int8:n=t.visitInt8||t.visitInt;break;case be.Int16:n=t.visitInt16||t.visitInt;break;case be.Int32:n=t.visitInt32||t.visitInt;break;case be.Int64:n=t.visitInt64||t.visitInt;break;case be.Uint8:n=t.visitUint8||t.visitInt;break;case be.Uint16:n=t.visitUint16||t.visitInt;break;case be.Uint32:n=t.visitUint32||t.visitInt;break;case be.Uint64:n=t.visitUint64||t.visitInt;break;case be.Float:n=t.visitFloat;break;case be.Float16:n=t.visitFloat16||t.visitFloat;break;case be.Float32:n=t.visitFloat32||t.visitFloat;break;case be.Float64:n=t.visitFloat64||t.visitFloat;break;case be.Utf8:n=t.visitUtf8;break;case be.Binary:n=t.visitBinary;break;case be.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case be.Date:n=t.visitDate;break;case be.DateDay:n=t.visitDateDay||t.visitDate;break;case be.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case be.Timestamp:n=t.visitTimestamp;break;case be.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case be.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case be.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case be.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case be.Time:n=t.visitTime;break;case be.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case be.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case be.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case be.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case be.Decimal:n=t.visitDecimal;break;case be.List:n=t.visitList;break;case be.Struct:n=t.visitStruct;break;case be.Union:n=t.visitUnion;break;case be.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case be.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case be.Dictionary:n=t.visitDictionary;break;case be.Interval:n=t.visitInterval;break;case be.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case be.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case be.FixedSizeList:n=t.visitFixedSizeList;break;case be.Map:n=t.visitMap}if("function"==typeof n)return n;if(!r)return()=>null;throw new Error(`Unrecognized type '${be[i]}'`)}(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function Ee(t){switch(t.typeId){case be.Null:return be.Null;case be.Int:const{bitWidth:e,isSigned:r}=t;switch(e){case 8:return r?be.Int8:be.Uint8;case 16:return r?be.Int16:be.Uint16;case 32:return r?be.Int32:be.Uint32;case 64:return r?be.Int64:be.Uint64}return be.Int;case be.Float:switch(t.precision){case we.HALF:return be.Float16;case we.SINGLE:return be.Float32;case we.DOUBLE:return be.Float64}return be.Float;case be.Binary:return be.Binary;case be.Utf8:return be.Utf8;case be.Bool:return be.Bool;case be.Decimal:return be.Decimal;case be.Time:switch(t.unit){case _e.SECOND:return be.TimeSecond;case _e.MILLISECOND:return be.TimeMillisecond;case _e.MICROSECOND:return be.TimeMicrosecond;case _e.NANOSECOND:return be.TimeNanosecond}return be.Time;case be.Timestamp:switch(t.unit){case _e.SECOND:return be.TimestampSecond;case _e.MILLISECOND:return be.TimestampMillisecond;case _e.MICROSECOND:return be.TimestampMicrosecond;case _e.NANOSECOND:return be.TimestampNanosecond}return be.Timestamp;case be.Date:switch(t.unit){case me.DAY:return be.DateDay;case me.MILLISECOND:return be.DateMillisecond}return be.Date;case be.Interval:switch(t.unit){case Ie.DAY_TIME:return be.IntervalDayTime;case Ie.YEAR_MONTH:return be.IntervalYearMonth}return be.Interval;case be.Map:return be.Map;case be.List:return be.List;case be.Struct:return be.Struct;case be.Union:switch(t.mode){case ve.Dense:return be.DenseUnion;case ve.Sparse:return be.SparseUnion}return be.Union;case be.FixedSizeBinary:return be.FixedSizeBinary;case be.FixedSizeList:return be.FixedSizeList;case be.Dictionary:return be.Dictionary}throw new Error(`Unrecognized type '${be[t.typeId]}'`)}Ue.prototype.visitInt8=null,Ue.prototype.visitInt16=null,Ue.prototype.visitInt32=null,Ue.prototype.visitInt64=null,Ue.prototype.visitUint8=null,Ue.prototype.visitUint16=null,Ue.prototype.visitUint32=null,Ue.prototype.visitUint64=null,Ue.prototype.visitFloat16=null,Ue.prototype.visitFloat32=null,Ue.prototype.visitFloat64=null,Ue.prototype.visitDateDay=null,Ue.prototype.visitDateMillisecond=null,Ue.prototype.visitTimestampSecond=null,Ue.prototype.visitTimestampMillisecond=null,Ue.prototype.visitTimestampMicrosecond=null,Ue.prototype.visitTimestampNanosecond=null,Ue.prototype.visitTimeSecond=null,Ue.prototype.visitTimeMillisecond=null,Ue.prototype.visitTimeMicrosecond=null,Ue.prototype.visitTimeNanosecond=null,Ue.prototype.visitDenseUnion=null,Ue.prototype.visitSparseUnion=null,Ue.prototype.visitIntervalDayTime=null,Ue.prototype.visitIntervalYearMonth=null;class Me extends Ue{compareSchemas(t,e){return t===e||e instanceof t.constructor&&Ye.compareFields(t.fields,e.fields)}compareFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((t,r)=>Ye.compareField(t,e[r]))}compareField(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&Ye.visit(t.type,e.type)}}function Fe(t,e){return e instanceof t.constructor}function Ne(t,e){return t===e||Fe(t,e)}function Ce(t,e){return t===e||Fe(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Re(t,e){return t===e||Fe(t,e)&&t.precision===e.precision}function Ve(t,e){return t===e||Fe(t,e)&&t.unit===e.unit}function Pe(t,e){return t===e||Fe(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function ze(t,e){return t===e||Fe(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function $e(t,e){return t===e||Fe(t,e)&&t.mode===e.mode&&t.typeIds.every((t,r)=>t===e.typeIds[r])&&Ye.compareFields(t.children,e.children)}function je(t,e){return t===e||Fe(t,e)&&t.unit===e.unit}Me.prototype.visitNull=Ne,Me.prototype.visitBool=Ne,Me.prototype.visitInt=Ce,Me.prototype.visitInt8=Ce,Me.prototype.visitInt16=Ce,Me.prototype.visitInt32=Ce,Me.prototype.visitInt64=Ce,Me.prototype.visitUint8=Ce,Me.prototype.visitUint16=Ce,Me.prototype.visitUint32=Ce,Me.prototype.visitUint64=Ce,Me.prototype.visitFloat=Re,Me.prototype.visitFloat16=Re,Me.prototype.visitFloat32=Re,Me.prototype.visitFloat64=Re,Me.prototype.visitUtf8=Ne,Me.prototype.visitBinary=Ne,Me.prototype.visitFixedSizeBinary=function(t,e){return t===e||Fe(t,e)&&t.byteWidth===e.byteWidth},Me.prototype.visitDate=Ve,Me.prototype.visitDateDay=Ve,Me.prototype.visitDateMillisecond=Ve,Me.prototype.visitTimestamp=Pe,Me.prototype.visitTimestampSecond=Pe,Me.prototype.visitTimestampMillisecond=Pe,Me.prototype.visitTimestampMicrosecond=Pe,Me.prototype.visitTimestampNanosecond=Pe,Me.prototype.visitTime=ze,Me.prototype.visitTimeSecond=ze,Me.prototype.visitTimeMillisecond=ze,Me.prototype.visitTimeMicrosecond=ze,Me.prototype.visitTimeNanosecond=ze,Me.prototype.visitDecimal=Ne,Me.prototype.visitList=function(t,e){return t===e||Fe(t,e)&&t.children.length===e.children.length&&Ye.compareFields(t.children,e.children)},Me.prototype.visitStruct=function(t,e){return t===e||Fe(t,e)&&t.children.length===e.children.length&&Ye.compareFields(t.children,e.children)},Me.prototype.visitUnion=$e,Me.prototype.visitDenseUnion=$e,Me.prototype.visitSparseUnion=$e,Me.prototype.visitDictionary=function(t,e){return t===e||Fe(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Ye.visit(t.indices,e.indices)&&Ye.visit(t.dictionary,e.dictionary)},Me.prototype.visitInterval=je,Me.prototype.visitIntervalDayTime=je,Me.prototype.visitIntervalYearMonth=je,Me.prototype.visitFixedSizeList=function(t,e){return t===e||Fe(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Ye.compareFields(t.children,e.children)},Me.prototype.visitMap=function(t,e){return t===e||Fe(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Ye.compareFields(t.children,e.children)};const Ye=new Me;class We{static isNull(t){return t&&t.typeId===be.Null}static isInt(t){return t&&t.typeId===be.Int}static isFloat(t){return t&&t.typeId===be.Float}static isBinary(t){return t&&t.typeId===be.Binary}static isUtf8(t){return t&&t.typeId===be.Utf8}static isBool(t){return t&&t.typeId===be.Bool}static isDecimal(t){return t&&t.typeId===be.Decimal}static isDate(t){return t&&t.typeId===be.Date}static isTime(t){return t&&t.typeId===be.Time}static isTimestamp(t){return t&&t.typeId===be.Timestamp}static isInterval(t){return t&&t.typeId===be.Interval}static isList(t){return t&&t.typeId===be.List}static isStruct(t){return t&&t.typeId===be.Struct}static isUnion(t){return t&&t.typeId===be.Union}static isFixedSizeBinary(t){return t&&t.typeId===be.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===be.FixedSizeList}static isMap(t){return t&&t.typeId===be.Map}static isDictionary(t){return t&&t.typeId===be.Dictionary}get typeId(){return be.NONE}compareTo(t){return Ye.visit(this,t)}}var He;We[Symbol.toStringTag]=((He=We.prototype).children=null,He.ArrayType=Array,He[Symbol.toStringTag]="DataType");let Ke=class extends We{toString(){return"Null"}get typeId(){return be.Null}};Ke[Symbol.toStringTag]=(t=>t[Symbol.toStringTag]="Null")(Ke.prototype);class qe extends We{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return be.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}qe[Symbol.toStringTag]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(qe.prototype);class Je extends qe{constructor(){super(!0,8)}}class Ge extends qe{constructor(){super(!0,16)}}class Ze extends qe{constructor(){super(!0,32)}}let Xe=class extends qe{constructor(){super(!0,64)}};class Qe extends qe{constructor(){super(!1,8)}}class tr extends qe{constructor(){super(!1,16)}}class er extends qe{constructor(){super(!1,32)}}let rr=class extends qe{constructor(){super(!1,64)}};Object.defineProperty(Je.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Ge.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Ze.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Xe.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Qe.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(tr.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(er.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(rr.prototype,"ArrayType",{value:Uint32Array});class nr extends We{constructor(t){super(),this.precision=t}get typeId(){return be.Float}get ArrayType(){switch(this.precision){case we.HALF:return Uint16Array;case we.SINGLE:return Float32Array;case we.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}nr[Symbol.toStringTag]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(nr.prototype);class ir extends nr{constructor(){super(we.HALF)}}class sr extends nr{constructor(){super(we.SINGLE)}}class or extends nr{constructor(){super(we.DOUBLE)}}Object.defineProperty(ir.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(sr.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(or.prototype,"ArrayType",{value:Float64Array});let ar=class extends We{constructor(){super()}get typeId(){return be.Binary}toString(){return"Binary"}};ar[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(ar.prototype);let cr=class extends We{constructor(){super()}get typeId(){return be.Utf8}toString(){return"Utf8"}};cr[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(cr.prototype);let ur=class extends We{constructor(){super()}get typeId(){return be.Bool}toString(){return"Bool"}};ur[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(ur.prototype);let lr=class extends We{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return be.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};lr[Symbol.toStringTag]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(lr.prototype);class hr extends We{constructor(t){super(),this.unit=t}get typeId(){return be.Date}toString(){return`Date${32*(this.unit+1)}<${me[this.unit]}>`}}hr[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(hr.prototype);class dr extends hr{constructor(){super(me.DAY)}}class fr extends hr{constructor(){super(me.MILLISECOND)}}class pr extends We{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return be.Time}toString(){return`Time${this.bitWidth}<${_e[this.unit]}>`}}pr[Symbol.toStringTag]=(t=>(t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"))(pr.prototype);class yr extends We{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return be.Timestamp}toString(){return`Timestamp<${_e[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}yr[Symbol.toStringTag]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(yr.prototype);class br extends We{constructor(t){super(),this.unit=t}get typeId(){return be.Interval}toString(){return`Interval<${Ie[this.unit]}>`}}br[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(br.prototype);let gr=class extends We{constructor(t){super(),this.children=[t]}get typeId(){return be.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};gr[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(gr.prototype);let mr=class extends We{constructor(t){super(),this.children=t}get typeId(){return be.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};mr[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(mr.prototype);class _r extends We{constructor(t,e,r){super(),this.mode=t,this.children=r,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((t,e,r)=>(t[e]=r)&&t||t,Object.create(null))}get typeId(){return be.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}_r[Symbol.toStringTag]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(_r.prototype);let wr=class extends We{constructor(t){super(),this.byteWidth=t}get typeId(){return be.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};wr[Symbol.toStringTag]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(wr.prototype);let vr=class extends We{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return be.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};vr[Symbol.toStringTag]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(vr.prototype);let Ir=class extends We{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return be.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Ir[Symbol.toStringTag]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(Ir.prototype);const Sr=(Tr=-1,()=>++Tr);var Tr;class Ar extends We{constructor(t,e,r,n){super(),this.indices=e,this.dictionary=t,this.isOrdered=n||!1,this.id=null==r?Sr():"number"==typeof r?r:r.low}get typeId(){return be.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function Br(t){let e=t;switch(t.typeId){case be.Decimal:return 4;case be.Timestamp:return 2;case be.Date:case be.Interval:return 1+e.unit;case be.Int:case be.Time:return+(e.bitWidth>32)+1;case be.FixedSizeList:return e.listSize;case be.FixedSizeBinary:return e.byteWidth;default:return 1}}Ar[Symbol.toStringTag]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Ar.prototype);class Lr{constructor(t,e,r,n,i,s,o){let a;this.type=t,this.dictionary=o,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(n||0,-1)),this.childData=(s||[]).map(t=>t instanceof Lr?t:t.data),i instanceof Lr?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=Br(t),i&&((a=i[0])&&(this.valueOffsets=a),(a=i[1])&&(this.values=a),(a=i[2])&&(this.nullBitmap=a),(a=i[3])&&(this.typeIds=a)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:r,nullBitmap:n,typeIds:i}=this;return e&&(t+=e.byteLength),r&&(t+=r.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),this.childData.reduce((t,e)=>t+e.byteLength,t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-De(t,this.offset,this.offset+this.length)),e}clone(t,e=this.offset,r=this.length,n=this._nullCount,i=this,s=this.childData){return new Lr(t,e,r,n,i,s,this.dictionary)}slice(t,e){const{stride:r,typeId:n,childData:i}=this,s=+(0===this._nullCount)-1,o=16===n?r:1,a=this._sliceBuffers(t,e,r,n);return this.clone(this.type,this.offset+t,e,s,a,!i.length||this.valueOffsets?i:this._sliceChildren(i,o*t,o*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===be.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:r}=this,n=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);n[e>>3]=(1<<e-(-8&e))-1,r>0&&n.set(Le(this.offset,e,this.nullBitmap),0);const i=this.buffers;return i[ge.VALIDITY]=n,this.clone(this.type,0,t,r+(t-e),i)}_sliceBuffers(t,e,r,n){let i,{buffers:s}=this;return(i=s[ge.TYPE])&&(s[ge.TYPE]=i.subarray(t,t+e)),(i=s[ge.OFFSET])&&(s[ge.OFFSET]=i.subarray(t,t+e+1))||(i=s[ge.DATA])&&(s[ge.DATA]=6===n?i:i.subarray(r*t,r*(t+e))),s}_sliceChildren(t,e,r){return t.map(t=>t.slice(e,r))}static new(t,e,r,n,i,s,o){switch(i instanceof Lr?i=i.buffers:i||(i=[]),t.typeId){case be.Null:return Lr.Null(t,e,r);case be.Int:return Lr.Int(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Dictionary:return Lr.Dictionary(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[],o);case be.Float:return Lr.Float(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Bool:return Lr.Bool(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Decimal:return Lr.Decimal(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Date:return Lr.Date(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Time:return Lr.Time(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Timestamp:return Lr.Timestamp(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Interval:return Lr.Interval(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.FixedSizeBinary:return Lr.FixedSizeBinary(t,e,r,n||0,i[ge.VALIDITY],i[ge.DATA]||[]);case be.Binary:return Lr.Binary(t,e,r,n||0,i[ge.VALIDITY],i[ge.OFFSET]||[],i[ge.DATA]||[]);case be.Utf8:return Lr.Utf8(t,e,r,n||0,i[ge.VALIDITY],i[ge.OFFSET]||[],i[ge.DATA]||[]);case be.List:return Lr.List(t,e,r,n||0,i[ge.VALIDITY],i[ge.OFFSET]||[],(s||[])[0]);case be.FixedSizeList:return Lr.FixedSizeList(t,e,r,n||0,i[ge.VALIDITY],(s||[])[0]);case be.Struct:return Lr.Struct(t,e,r,n||0,i[ge.VALIDITY],s||[]);case be.Map:return Lr.Map(t,e,r,n||0,i[ge.VALIDITY],i[ge.OFFSET]||[],(s||[])[0]);case be.Union:return Lr.Union(t,e,r,n||0,i[ge.VALIDITY],i[ge.TYPE]||[],i[ge.OFFSET]||s,s)}throw new Error(`Unrecognized typeId ${t.typeId}`)}static Null(t,e,r){return new Lr(t,e,r,0)}static Int(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Dictionary(t,e,r,n,i,s,o){return new Lr(t,e,r,n,[void 0,te(t.indices.ArrayType,s),re(i)],[],o)}static Float(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Bool(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Decimal(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Date(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Time(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Timestamp(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Interval(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static FixedSizeBinary(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,te(t.ArrayType,s),re(i)])}static Binary(t,e,r,n,i,s,o){return new Lr(t,e,r,n,[ee(s),re(o),re(i)])}static Utf8(t,e,r,n,i,s,o){return new Lr(t,e,r,n,[ee(s),re(o),re(i)])}static List(t,e,r,n,i,s,o){return new Lr(t,e,r,n,[ee(s),void 0,re(i)],[o])}static FixedSizeList(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,void 0,re(i)],[s])}static Struct(t,e,r,n,i,s){return new Lr(t,e,r,n,[void 0,void 0,re(i)],s)}static Map(t,e,r,n,i,s,o){return new Lr(t,e,r,n,[ee(s),void 0,re(i)],[o])}static Union(t,e,r,n,i,s,o,a){const c=[void 0,void 0,re(i),te(t.ArrayType,s)];return t.mode===ve.Sparse?new Lr(t,e,r,n,c,o):(c[ge.OFFSET]=ee(o),new Lr(t,e,r,n,c,a))}}Lr.prototype.childData=Object.freeze([]);function Or(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t)}function xr(t){if(!t||t.length<=0)return function(t){return!0};let e="",r=t.filter(t=>t==t);return r.length>0&&(e=`\n    switch (x) {${r.map(t=>`\n        case ${function(t){if("bigint"!=typeof t)return Or(t);if(Et)return`${Or(t)}n`;return`"${Or(t)}"`}(t)}:`).join("")}\n            return false;\n    }`),t.length!==r.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}const Dr=(t,e)=>(t*e+63&-64||64)/e;class kr{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,r=this.length*e,n=this.buffer.length;r>=n&&this._resize(Dr(0===n?1*r:2*r,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Dr(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):Xt(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Xt(new this.ArrayType(t),this.buffer)}}kr.prototype.offset=0;class Ur extends kr{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class Er extends Ur{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:r}=this.reserve(t-this.length+1),n=t>>3,i=t%8,s=r[n]>>i&1;return e?0===s&&(r[n]|=1<<i,++this.numValid):1===s&&(r[n]&=~(1<<i),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Mr extends Ur{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const r=this.length-1,n=this.reserve(t-r+1).buffer;return r<t++&&n.fill(n[r],r,t),n[t]=n[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Fr extends kr{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?Mt:Nt)}set(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this}_resize(t){const e=super._resize(t),r=e.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return Et&&(this.buffer64=new this.ArrayType64(e.buffer,e.byteOffset,r)),e}}let Nr=class{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=Br(t),this._nulls=new Er,e&&e.length>0&&(this._isValid=xr(e))}static new(t){}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}static throughIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,n="bytes"!==e?"length":"byteLength";return function*(e){let i=0,s=Nr.new(t);for(const t of e)s.append(t)[n]>=r&&++i&&(yield s.toVector());(s.finish().length>0||0===i)&&(yield s.toVector())}}(t)}static throughAsyncIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,n="bytes"!==e?"length":"byteLength";return async function*(e){let i=0,s=Nr.new(t);for await(const t of e)s.append(t)[n]>=r&&++i&&(yield s.toVector());(s.finish().length>0||0===i)&&(yield s.toVector())}}(t)}toVector(){return fe.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce((t,e)=>t+e.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((t,e)=>t+e.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){const t=[],e=this._values,r=this._offsets,n=this._typeIds,{length:i,nullCount:s}=this;n?(t[ge.TYPE]=n.flush(i),r&&(t[ge.OFFSET]=r.flush(i))):r?(e&&(t[ge.DATA]=e.flush(r.last())),t[ge.OFFSET]=r.flush(i)):e&&(t[ge.DATA]=e.flush(i)),s>0&&(t[ge.VALIDITY]=this._nulls.flush(i));const o=Lr.new(this.type,0,i,s,t,this.children.map(t=>t.flush()));return this.clear(),o}finish(){return this.finished=!0,this.children.forEach(t=>t.finish()),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach(t=>t.clear()),this}};Nr.prototype.length=1,Nr.prototype.stride=1,Nr.prototype.children=null,Nr.prototype.finished=!1,Nr.prototype.nullValues=null,Nr.prototype._isValid=()=>!0;class Cr extends Nr{constructor(t){super(t),this._values=new Ur(new this.ArrayType(0),this.stride)}setValue(t,e){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,e)}}class Rr extends Nr{constructor(t){super(t),this._pendingLength=0,this._offsets=new Mr}setValue(t,e){const r=this._pending||(this._pending=new Map),n=r.get(t);n&&(this._pendingLength-=n.length),this._pendingLength+=e.length,r.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class Vr extends Nr{constructor(t){super(t),this._values=new Er}setValue(t,e){this._values.set(t,+e)}}class Pr extends Nr{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class zr extends Cr{}class $r extends zr{}class jr extends zr{}class Yr extends Cr{}class Wr extends Nr{constructor({type:t,nullValues:e,dictionaryHashFunction:r}){super({type:new Ar(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Nr.new({type:this.type.indices,nullValues:e}),this.dictionary=Nr.new({type:this.type.dictionary,nullValues:null}),"function"==typeof r&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const r=this.indices;return e=r.setValid(t,e),this.length=r.length,e}setValue(t,e){let r=this._keysToIndices,n=this.valueToKey(e),i=r[n];return void 0===i&&(r[n]=i=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,i)}flush(){const t=this.type,e=this._dictionary,r=this.dictionary.toVector(),n=this.indices.flush().clone(t);return n.dictionary=e?e.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=n.dictionary,this.clear(),n}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class Hr extends Cr{}const Kr=new Float64Array(1),qr=new Uint32Array(Kr.buffer);function Jr(t){if(t!=t)return 32256;Kr[0]=t;let e=(2147483648&qr[1])>>16&65535,r=2146435072&qr[1],n=0;return r>=1089470464?qr[0]>0?r=31744:(r=(2080374784&r)>>16,n=(1048575&qr[1])>>10):r<=1056964608?(n=1048576+(1048575&qr[1]),n=1048576+(n<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,n=512+(1048575&qr[1])>>10),e|r|65535&n}class Gr extends Cr{}class Zr extends Gr{setValue(t,e){this._values.set(t,Jr(e))}}class Xr extends Gr{setValue(t,e){this._values.set(t,e)}}class Qr extends Gr{setValue(t,e){this._values.set(t,e)}}const tn=Symbol.for("isArrowBigNum");function en(t,...e){return 0===e.length?Object.setPrototypeOf(te(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function rn(...t){return en.apply(this,t)}function nn(...t){return en.apply(this,t)}function sn(...t){return en.apply(this,t)}function on(t){let e,r,{buffer:n,byteOffset:i,length:s,signed:o}=t,a=new Int32Array(n,i,s),c=0,u=0,l=a.length;for(;u<l;)r=a[u++],e=a[u++],o||(e>>>=0),c+=(r>>>0)+e*u**32;return c}let an,cn;function un(t){let e="",r=new Uint32Array(2),n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),i=new Uint32Array((n=new Uint16Array(n).reverse()).buffer),s=-1,o=n.length-1;do{for(r[0]=n[s=0];s<o;)n[s++]=r[1]=r[0]/10,r[0]=(r[0]-10*r[1]<<16)+n[s];n[s]=r[1]=r[0]/10,r[0]=r[0]-10*r[1],e=`${r[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return e||"0"}en.prototype[tn]=!0,en.prototype.toJSON=function(){return`"${an(this)}"`},en.prototype.valueOf=function(){return on(this)},en.prototype.toString=function(){return an(this)},en.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return on(this);case"string":return an(this);case"default":return cn(this)}return an(this)},Object.setPrototypeOf(rn.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(nn.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(sn.prototype,Object.create(Uint32Array.prototype)),Object.assign(rn.prototype,en.prototype,{constructor:rn,signed:!0,TypedArray:Int32Array,BigIntArray:Mt}),Object.assign(nn.prototype,en.prototype,{constructor:nn,signed:!1,TypedArray:Uint32Array,BigIntArray:Nt}),Object.assign(sn.prototype,en.prototype,{constructor:sn,signed:!0,TypedArray:Uint32Array,BigIntArray:Nt}),Et?(cn=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:un(t),an=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:un(t)):(an=un,cn=an);class ln{constructor(t,e){return ln.new(t,e)}static new(t,e){switch(e){case!0:return new rn(t);case!1:return new nn(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Mt:return new rn(t)}return 16===t.byteLength?new sn(t):new nn(t)}static signed(t){return new rn(t)}static unsigned(t){return new nn(t)}static decimal(t){return new sn(t)}}class hn extends Cr{setValue(t,e){this._values.set(t,e)}}class dn extends hn{}class fn extends hn{}class pn extends hn{}class yn extends hn{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(wn)),super(t),this._values=new Fr(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(wn(t))}}class bn extends hn{}class gn extends hn{}class mn extends hn{}class _n extends hn{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(wn)),super(t),this._values=new Fr(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(wn(t))}}const wn=(vn={BigIntArray:Mt},t=>(ArrayBuffer.isView(t)&&(vn.buffer=t.buffer,vn.byteOffset=t.byteOffset,vn.byteLength=t.byteLength,t=cn(vn),vn.buffer=null),t));var vn;class In extends Cr{}class Sn extends In{}class Tn extends In{}class An extends In{}class Bn extends In{}class Ln extends Cr{}class On extends Ln{}class xn extends Ln{}class Dn extends Ln{}class kn extends Ln{}class Un extends Cr{}class En extends Un{}class Mn extends Un{}class Fn extends Rr{constructor(t){super(t),this._values=new kr(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,re(e))}_flushPending(t,e){const r=this._offsets,n=this._values.reserve(e).buffer;let i,s=0,o=0,a=0;for([s,i]of t)void 0===i?r.set(s,0):(o=i.length,n.set(i,a),r.set(s,o),a+=o)}}class Nn extends Rr{constructor(t){super(t),this._values=new kr(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,Lt(e))}_flushPending(t,e){}}Nn.prototype._flushPending=Fn.prototype._flushPending;class Cn{get length(){return this._values.length}get(t){return this._values[t]}clear(){return this._values=null,this}bind(t){return t instanceof fe?t:(this._values=t,this)}}const Rn=Symbol.for("parent"),Vn=Symbol.for("rowIndex"),Pn=Symbol.for("keyToIdx"),zn=Symbol.for("idxToVal"),$n=Symbol.for("nodejs.util.inspect.custom");class jn{constructor(t,e){this[Rn]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return void 0!==this.get(t)}get(t){let e;if(null!=t){const r=this[Pn]||(this[Pn]=new Map);let n=r.get(t);if(void 0!==n){const t=this[zn]||(this[zn]=new Array(this.size));void 0!==(e=t[n])||(t[n]=e=this.getValue(n))}else if((n=this.getIndex(t))>-1){r.set(t,n);const i=this[zn]||(this[zn]=new Array(this.size));void 0!==(e=i[n])||(i[n]=e=this.getValue(n))}}return e}set(t,e){if(null!=t){const r=this[Pn]||(this[Pn]=new Map);let n=r.get(t);if(void 0===n&&r.set(t,n=this.getIndex(t)),n>-1){(this[zn]||(this[zn]=new Array(this.size)))[n]=this.setValue(n,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),r=this[Pn]||(this[Pn]=new Map),n=this[zn]||(this[zn]=new Array(this.size));for(let i,s,o,a,c=0;!(o=t.next()).done&&!(a=e.next()).done;++c)i=o.value,s=a.value,n[c]=s,r.has(i)||r.set(i,c),yield[i,s]}forEach(t,e){const r=this.keys(),n=this.values(),i=void 0===e?t:(r,n,i)=>t.call(e,r,n,i),s=this[Pn]||(this[Pn]=new Map),o=this[zn]||(this[zn]=new Array(this.size));for(let t,e,a,c,u=0;!(a=r.next()).done&&!(c=n.next()).done;++u)t=a.value,e=c.value,o[u]=e,s.has(t)||s.set(t,u),i(e,t,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach((e,r)=>t[r]=e),t}inspect(){return this.toString()}[$n](){return this.toString()}toString(){const t=[];return this.forEach((e,r)=>{r=Or(r),e=Or(e),t.push(`${r}: ${e}`)}),`{ ${t.join(", ")} }`}}jn[Symbol.toStringTag]=(t=>(Object.defineProperties(t,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Rn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vn]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),t[Symbol.toStringTag]="Row"))(jn.prototype);class Yn extends jn{constructor(t){return super(t,t.length),Kn(this)}keys(){return this[Rn].getChildAt(0)[Symbol.iterator]()}values(){return this[Rn].getChildAt(1)[Symbol.iterator]()}getKey(t){return this[Rn].getChildAt(0).get(t)}getIndex(t){return this[Rn].getChildAt(0).indexOf(t)}getValue(t){return this[Rn].getChildAt(1).get(t)}setValue(t,e){this[Rn].getChildAt(1).set(t,e)}}class Wn extends jn{constructor(t){return super(t,t.type.children.length),Hn(this)}*keys(){for(const t of this[Rn].type.children)yield t.name}*values(){for(const t of this[Rn].type.children)yield this[t.name]}getKey(t){return this[Rn].type.children[t].name}getIndex(t){return this[Rn].type.children.findIndex(e=>e.name===t)}getValue(t){return this[Rn].getChildAt(t).get(this[Vn])}setValue(t,e){return this[Rn].getChildAt(t).set(this[Vn],e)}}Object.setPrototypeOf(jn.prototype,Map.prototype);const Hn=(()=>{const t={enumerable:!0,configurable:!1,get:null,set:null};return e=>{let r=-1,n=e[Pn]||(e[Pn]=new Map);const i=t=>function(){return this.get(t)},s=t=>function(e){return this.set(t,e)};for(const o of e.keys())n.set(o,++r),t.get=i(o),t.set=s(o),e.hasOwnProperty(o)||(t.enumerable=!0,Object.defineProperty(e,o,t)),e.hasOwnProperty(r)||(t.enumerable=!1,Object.defineProperty(e,r,t));return t.get=t.set=null,e}})(),Kn=(()=>{if("undefined"==typeof Proxy)return Hn;const t=jn.prototype.has,e=jn.prototype.get,r=jn.prototype.set,n=jn.prototype.getKey,i={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:t=>[...t.keys()].map(t=>`${t}`),has(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Rn:case Vn:case zn:case Pn:case $n:return!0}return"number"!=typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get(r,i,s){switch(i){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Rn:case Vn:case zn:case Pn:case $n:return Reflect.get(r,i,s)}return"number"!=typeof i||t.call(s,i)||(i=n.call(s,i)),e.call(s,i)},set(e,i,s,o){switch(i){case Rn:case Vn:case zn:case Pn:return Reflect.set(e,i,s,o);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=typeof i||t.call(o,i)||(i=n.call(o,i)),!!t.call(o,i)&&!!r.call(o,i,s)}};return t=>new Proxy(t,i)})();let qn;function Jn(t,e,r,n){let{length:i=0}=t,s="number"!=typeof e?0:e,o="number"!=typeof r?i:r;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(qn=s,s=o,o=qn),o>i&&(o=i),n?n(t,s,o):[s,o]}const Gn=Et?Ut(0):0,Zn=t=>t!=t;function Xn(t){let e=typeof t;if("object"!==e||null===t)return Zn(t)?Zn:"bigint"!==e?e=>e===t:e=>Gn+e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let r=0,n=t.length;if(n!==e.length)return!1;if(n>0)do{if(t[r]!==e[r])return!1}while(++r<n);return!0}(t,e):t instanceof Map?function(t){let e=-1;const r=[];return t.forEach(t=>r[++e]=Xn(t)),Qn(r)}(t):Array.isArray(t)?function(t){const e=[];for(let r=-1,n=t.length;++r<n;)e[r]=Xn(t[r]);return Qn(e)}(t):t instanceof fe?function(t){const e=[];for(let r=-1,n=t.length;++r<n;)e[r]=Xn(t.get(r));return Qn(e)}(t):function(t){const e=Object.keys(t);if(0===e.length)return()=>!1;const r=[];for(let n=-1,i=e.length;++n<i;)r[n]=Xn(t[e[n]]);return Qn(r,e)}(t)}function Qn(t,e){return r=>{if(!r||"object"!=typeof r)return!1;switch(r.constructor){case Array:return function(t,e){const r=t.length;if(e.length!==r)return!1;for(let n=-1;++n<r;)if(!t[n](e[n]))return!1;return!0}(t,r);case Map:case Yn:case Wn:return ti(t,r,r.keys());case Object:case void 0:return ti(t,r,e||Object.keys(r))}return r instanceof fe&&function(t,e){const r=t.length;if(e.length!==r)return!1;for(let n=-1;++n<r;)if(!t[n](e.get(n)))return!1;return!0}(t,r)}}function ti(t,e,r){const n=r[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0,a=t.length,c=s.next(),u=n.next(),l=i.next();for(;o<a&&!u.done&&!l.done&&!c.done&&(u.value===l.value&&t[o](c.value));++o,u=n.next(),l=i.next(),c=s.next());return!!(o===a&&u.done&&l.done&&c.done)||(n.return&&n.return(),i.return&&i.return(),s.return&&s.return(),!1)}class ei extends fe{constructor(t,e=[],r=function(t){let e=new Uint32Array((t||[]).length+1),r=e[0]=0,n=e.length;for(let i=0;++i<n;)e[i]=r+=t[i-1].length;return e}(e)){super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=r,this._length=r[r.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...t){return ui(fe,t)}static concat(...t){const e=ei.flatten(...t);return new ei(e[0].type,e)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce((t,e)=>t+e.byteLength,0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce((t,{nullCount:e})=>t+e,0)),t}get indices(){if(We.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=1===t.length?t[0].indices:ei.concat(...t.map(t=>t.indices))}return this._indices}return null}get dictionary(){return We.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(const t of this._chunks)yield*t}clone(t=this._chunks){return new ei(this._type,t)}concat(...t){return this.clone(ei.flatten(this,...t))}slice(t,e){return Jn(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;let e,r,n,i=this._children||(this._children=[]);return(e=i[t])?e:(r=(this._type.children||[])[t])&&(n=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t),n.length>0)?i[t]=new ei(r.type,n):null}search(t,e){let r=t,n=this._chunkOffsets,i=n.length-1;if(r<0)return null;if(r>=n[i])return null;if(i<=1)return e?e(this,0,r):[0,r];let s=0,o=0,a=0;do{if(s+1===i)return e?e(this,s,r-o):[s,r-o];a=s+(i-s)/2|0,r>=n[a]?s=a:i=a}while(r<n[i]&&r>=(o=n[s]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,({chunks:t},r,n)=>t[r].set(n,e))}indexOf(t,e){return e&&"number"==typeof e?this.search(e,(e,r,n)=>this.indexOfInternal(e,r,n,t)):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let r=this._type.ArrayType;if(e<=0)return new r(0);if(e<=1)return t[0].toArray();let n=0,i=new Array(e);for(let r=-1;++r<e;)n+=(i[r]=t[r].toArray()).length;r!==i[0].constructor&&(r=i[0].constructor);let s=new r(n),o=r===Array?ni:ri;for(let t=-1,r=0;++t<e;)r=o(i[t],s,r);return s}getInternal({_chunks:t},e,r){return t[e].get(r)}isValidInternal({_chunks:t},e,r){return t[e].isValid(r)}indexOfInternal({_chunks:t},e,r,n){let i=e-1,s=t.length,o=r,a=0,c=-1;for(;++i<s;){if(~(c=t[i].indexOf(n,o)))return a+c;o=0,a+=t[i].length}return-1}_sliceInternal(t,e,r){const n=[],{chunks:i,_chunkOffsets:s}=t;for(let t=-1,o=i.length;++t<o;){const o=i[t],a=o.length,c=s[t];if(c>=r)break;if(e>=c+a)continue;if(c>=e&&c+a<=r){n.push(o);continue}const u=Math.max(0,e-c),l=Math.min(r-c,a);n.push(o.slice(u,l))}return t.clone(n)}}const ri=(t,e,r)=>(e.set(t,r),r+t.length),ni=(t,e,r)=>{let n=r;for(let r=-1,i=t.length;++r<i;)e[n++]=t[r];return n};class ii extends ei{constructor(t,e=[],r){if(e=ei.flatten(...e),super(t.type,e,r),this._field=t,1===e.length&&!(this instanceof si))return new si(t,e[0],this._chunkOffsets)}static new(t,e,...r){const n=ei.flatten(Array.isArray(e)?[...e,...r]:e instanceof fe?[e,...r]:[fe.new(e,...r)]);if("string"==typeof t){const e=n[0].data.type;t=new gi(t,e,!0)}else!t.nullable&&n.some(({nullCount:t})=>t>0)&&(t=t.clone({nullable:!0}));return new ii(t,n)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(t=this._chunks){return new ii(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r,n,i=this._children||(this._children=[]);return(e=i[t])?e:(r=(this.type.children||[])[t])&&(n=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t),n.length>0)?i[t]=new ii(r,n):null}}class si extends ii{constructor(t,e,r){super(t,[e],r),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}const oi=Array.isArray,ai=(t,e)=>hi(t,e,[],0),ci=t=>yi(t,[[],[]]),ui=(t,e)=>di(t,e,[],0),li=(t,e)=>fi(t,e,[],0);function hi(t,e,r,n){let i,s=n,o=-1,a=e.length;for(;++o<a;)oi(i=e[o])?s=hi(t,i,r,s).length:i instanceof t&&(r[s++]=i);return r}function di(t,e,r,n){let i,s=n,o=-1,a=e.length;for(;++o<a;)oi(i=e[o])?s=di(t,i,r,s).length:i instanceof ei?s=di(t,i.chunks,r,s).length:i instanceof t&&(r[s++]=i);return r}function fi(t,e,r,n){let i,s=n,o=-1,a=e.length;for(;++o<a;)oi(i=e[o])?s=fi(t,i,r,s).length:i instanceof t?s=hi(fe,i.schema.fields.map((t,e)=>i.getChildAt(e)),r,s).length:i instanceof fe&&(r[s++]=i);return r}const pi=(t,[e,r],n)=>(t[0][n]=e,t[1][n]=r,t);function yi(t,e){let r,n;switch(n=t.length){case 0:return e;case 1:if(r=e[0],!t[0])return e;if(oi(t[0]))return yi(t[0],e);t[0]instanceof Lr||t[0]instanceof fe||t[0]instanceof We||([r,t]=Object.entries(t[0]).reduce(pi,e));break;default:oi(r=t[n-1])?t=oi(t[0])?t[0]:t.slice(0,n-1):(t=oi(t[0])?t[0]:t,r=[])}let i,s,o=-1,a=-1,c=-1,u=t.length,[l,h]=e;for(;++c<u;)s=t[c],s instanceof ii&&(h[++a]=s)?l[++o]=s.field.clone(r[c],s.type,!0):(({[c]:i=c}=r),s instanceof We&&(h[++a]=s)?l[++o]=gi.new(i,s,!0):s&&s.type&&(h[++a]=s)&&(s instanceof Lr&&(h[a]=s=fe.new(s)),l[++o]=gi.new(i,s.type,!0)));return e}class bi{constructor(t=[],e,r){this.fields=t||[],this.metadata=e||new Map,r||(r=_i(t)),this.dictionaries=r}static from(...t){return bi.new(t[0],t[1])}static new(...t){return new bi(ci(t)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}compareTo(t){return Ye.compareSchemas(this,t)}select(...t){const e=t.reduce((t,e)=>(t[e]=!0)&&t,Object.create(null));return new bi(this.fields.filter(t=>e[t.name]),this.metadata)}selectAt(...t){return new bi(t.map(t=>this.fields[t]).filter(Boolean),this.metadata)}assign(...t){const e=t[0]instanceof bi?t[0]:new bi(ai(gi,t)),r=[...this.fields],n=mi(mi(new Map,this.metadata),e.metadata),i=e.fields.filter(t=>{const e=r.findIndex(e=>e.name===t.name);return!~e||(r[e]=t.clone({metadata:mi(mi(new Map,r[e].metadata),t.metadata)}))&&!1}),s=_i(i,new Map);return new bi([...r,...i],n,new Map([...this.dictionaries,...s]))}}class gi{constructor(t,e,r=!1,n){this.name=t,this.type=e,this.nullable=r,this.metadata=n||new Map}static new(...t){let[e,r,n,i]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===r&&(r=t[0].type),void 0===n&&(n=t[0].nullable),void 0===i&&(i=t[0].metadata)),new gi(`${e}`,r,n,i)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(t){return Ye.compareField(this,t)}clone(...t){let[e,r,n,i]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:r=this.type,nullable:n=this.nullable,metadata:i=this.metadata}=t[0]):[e=this.name,r=this.type,n=this.nullable,i=this.metadata]=t,gi.new(e,r,n,i)}}function mi(t,e){return new Map([...t||new Map,...e||new Map])}function _i(t,e=new Map){for(let r=-1,n=t.length;++r<n;){const n=t[r].type;if(We.isDictionary(n))if(e.has(n.id)){if(e.get(n.id)!==n.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(n.id,n.dictionary);n.children&&n.children.length>0&&_i(n.children,e)}return e}bi.prototype.fields=null,bi.prototype.metadata=null,bi.prototype.dictionaries=null,gi.prototype.type=null,gi.prototype.name=null,gi.prototype.nullable=null,gi.prototype.metadata=null;class wi extends Rr{constructor(t){super(t),this._run=new Cn,this._offsets=new Mr}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new gr(new gi(e,t.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(t){const e=this._run,r=this._offsets,n=this._setValue;let i,s=0;for([s,i]of t)void 0===i?r.set(s,0):(r.set(s,i.length),n(this,s,e.bind(i)))}}class vi extends Nr{constructor(){super(...arguments),this._run=new Cn}setValue(t,e){super.setValue(t,this._run.bind(e))}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new vr(this.type.listSize,new gi(e,t.type,!0)),r}clear(){return this._run.clear(),super.clear()}}class Ii extends Rr{set(t,e){return super.set(t,e)}setValue(t,e){e=e instanceof Map?e:new Map(Object.entries(e));const r=this._pending||(this._pending=new Map),n=r.get(t);n&&(this._pendingLength-=n.size),this._pendingLength+=e.size,r.set(t,e)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ir(new gi(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,r=this._setValue;t.forEach((t,n)=>{void 0===t?e.set(n,0):(e.set(n,t.size),r(this,n,t))})}}class Si extends Nr{addChild(t,e=`${this.numChildren}`){const r=this.children.push(t);return this.type=new mr([...this.type.children,new gi(e,t.type,!0)]),r}}class Ti extends Nr{constructor(t){super(t),this._typeIds=new Ur(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,r){return void 0===r&&(r=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,r),this}setValue(t,e,r){this._typeIds.set(t,r),super.setValue(t,e)}addChild(t,e=`${this.children.length}`){const r=this.children.push(t),{type:{children:n,mode:i,typeIds:s}}=this,o=[...n,new gi(e,t.type)];return this.type=new _r(i,[...s,r],o),r}_valueToChildTypeId(t,e,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Ai extends Ti{}class Bi extends Ti{constructor(t){super(t),this._offsets=new Ur(new Int32Array(0))}setValue(t,e,r){const n=this.type.typeIdToChildIndex[r];return this._offsets.set(t,this.getChildAt(n).length),super.setValue(t,e,r)}}class Li extends Ue{}const Oi=(t,e,r)=>{t[e]=r%4294967296|0,t[e+1]=r/4294967296|0},xi=(t,e,r,n)=>{const{[r]:i,[r+1]:s}=e;null!=i&&null!=s&&t.set(n.subarray(0,s-i),i)},Di=({values:t},e,r)=>{((t,e,r)=>{t[e]=r/864e5|0})(t,e,r.valueOf())},ki=({values:t},e,r)=>{Oi(t,2*e,r.valueOf())},Ui=({stride:t,values:e},r,n)=>{e[t*r]=n},Ei=({stride:t,values:e},r,n)=>{e[t*r]=Jr(n)},Mi=(t,e,r)=>{switch(typeof r){case"bigint":t.values64[e]=r;break;case"number":t.values[e*t.stride]=r;break;default:const n=r,{stride:i,ArrayType:s}=t,o=te(s,n);t.values.set(o.subarray(0,i),i*e)}},Fi=({values:t},e,r)=>Oi(t,2*e,r/1e3),Ni=({values:t},e,r)=>Oi(t,2*e,r),Ci=({values:t},e,r)=>((t,e,r)=>{t[e]=1e3*r%4294967296|0,t[e+1]=1e3*r/4294967296|0})(t,2*e,r),Ri=({values:t},e,r)=>((t,e,r)=>{t[e]=1e6*r%4294967296|0,t[e+1]=1e6*r/4294967296|0})(t,2*e,r),Vi=({values:t,stride:e},r,n)=>{t[e*r]=n},Pi=({values:t,stride:e},r,n)=>{t[e*r]=n},zi=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},$i=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},ji=(t,e,r)=>{const n=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(n);i&&i.set(t.valueOffsets[e],r)},Yi=(t,e,r)=>{const n=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(n);i&&i.set(e,r)},Wi=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},Hi=({values:t},e,r)=>{t[e]=12*r[0]+r[1]%12};Li.prototype.visitBool=({offset:t,values:e},r,n)=>{const i=t+r;n?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)},Li.prototype.visitInt=(t,e,r)=>{t.type.bitWidth<64?Ui(t,e,r):Mi(t,e,r)},Li.prototype.visitInt8=Ui,Li.prototype.visitInt16=Ui,Li.prototype.visitInt32=Ui,Li.prototype.visitInt64=Mi,Li.prototype.visitUint8=Ui,Li.prototype.visitUint16=Ui,Li.prototype.visitUint32=Ui,Li.prototype.visitUint64=Mi,Li.prototype.visitFloat=(t,e,r)=>{t.type.precision!==we.HALF?Ui(t,e,r):Ei(t,e,r)},Li.prototype.visitFloat16=Ei,Li.prototype.visitFloat32=Ui,Li.prototype.visitFloat64=Ui,Li.prototype.visitUtf8=({values:t,valueOffsets:e},r,n)=>{xi(t,e,r,Lt(n))},Li.prototype.visitBinary=({values:t,valueOffsets:e},r,n)=>xi(t,e,r,n),Li.prototype.visitFixedSizeBinary=({stride:t,values:e},r,n)=>{e.set(n.subarray(0,t),t*r)},Li.prototype.visitDate=(t,e,r)=>{t.type.unit===me.DAY?Di(t,e,r):ki(t,e,r)},Li.prototype.visitDateDay=Di,Li.prototype.visitDateMillisecond=ki,Li.prototype.visitTimestamp=(t,e,r)=>{switch(t.type.unit){case _e.SECOND:return Fi(t,e,r);case _e.MILLISECOND:return Ni(t,e,r);case _e.MICROSECOND:return Ci(t,e,r);case _e.NANOSECOND:return Ri(t,e,r)}},Li.prototype.visitTimestampSecond=Fi,Li.prototype.visitTimestampMillisecond=Ni,Li.prototype.visitTimestampMicrosecond=Ci,Li.prototype.visitTimestampNanosecond=Ri,Li.prototype.visitTime=(t,e,r)=>{switch(t.type.unit){case _e.SECOND:return Vi(t,e,r);case _e.MILLISECOND:return Pi(t,e,r);case _e.MICROSECOND:return zi(t,e,r);case _e.NANOSECOND:return $i(t,e,r)}},Li.prototype.visitTimeSecond=Vi,Li.prototype.visitTimeMillisecond=Pi,Li.prototype.visitTimeMicrosecond=zi,Li.prototype.visitTimeNanosecond=$i,Li.prototype.visitDecimal=({values:t},e,r)=>{t.set(r.subarray(0,4),4*e)},Li.prototype.visitList=(t,e,r)=>{const n=t.getChildAt(0),i=t.valueOffsets;for(let t=-1,s=i[e],o=i[e+1];s<o;)n.set(s++,r.get(++t))},Li.prototype.visitStruct=(t,e,r)=>{const n=r instanceof Map?(i=e,s=r,(t,e,r)=>t&&t.set(i,s.get(e.name))):r instanceof fe?((t,e)=>(r,n,i)=>r&&r.set(t,e.get(i)))(e,r):Array.isArray(r)?((t,e)=>(r,n,i)=>r&&r.set(t,e[i]))(e,r):((t,e)=>(r,n,i)=>r&&r.set(t,e[n.name]))(e,r);var i,s;t.type.children.forEach((e,r)=>n(t.getChildAt(r),e,r))},Li.prototype.visitUnion=(t,e,r)=>{t.type.mode===ve.Dense?ji(t,e,r):Yi(t,e,r)},Li.prototype.visitDenseUnion=ji,Li.prototype.visitSparseUnion=Yi,Li.prototype.visitDictionary=(t,e,r)=>{const n=t.getKey(e);null!==n&&t.setValue(n,r)},Li.prototype.visitInterval=(t,e,r)=>{t.type.unit===Ie.DAY_TIME?Wi(t,e,r):Hi(t,e,r)},Li.prototype.visitIntervalDayTime=Wi,Li.prototype.visitIntervalYearMonth=Hi,Li.prototype.visitFixedSizeList=(t,e,r)=>{const n=t.getChildAt(0),{stride:i}=t;for(let t=-1,s=e*i;++t<i;)n.set(s+t,r.get(t))},Li.prototype.visitMap=(t,e,r)=>{const n=t.getChildAt(0),i=t.valueOffsets,s=r instanceof Map?[...r]:Object.entries(r);for(let t=-1,r=i[e],o=i[e+1];r<o;)n.set(r++,s[++t])};const Ki=new Li;const qi=new class extends Ue{visitNull(){return Pr}visitBool(){return Vr}visitInt(){return hn}visitInt8(){return dn}visitInt16(){return fn}visitInt32(){return pn}visitInt64(){return yn}visitUint8(){return bn}visitUint16(){return gn}visitUint32(){return mn}visitUint64(){return _n}visitFloat(){return Gr}visitFloat16(){return Zr}visitFloat32(){return Xr}visitFloat64(){return Qr}visitUtf8(){return Nn}visitBinary(){return Fn}visitFixedSizeBinary(){return Hr}visitDate(){return zr}visitDateDay(){return $r}visitDateMillisecond(){return jr}visitTimestamp(){return Ln}visitTimestampSecond(){return On}visitTimestampMillisecond(){return xn}visitTimestampMicrosecond(){return Dn}visitTimestampNanosecond(){return kn}visitTime(){return In}visitTimeSecond(){return Sn}visitTimeMillisecond(){return Tn}visitTimeMicrosecond(){return An}visitTimeNanosecond(){return Bn}visitDecimal(){return Yr}visitList(){return wi}visitStruct(){return Si}visitUnion(){return Ti}visitDenseUnion(){return Bi}visitSparseUnion(){return Ai}visitDictionary(){return Wr}visitInterval(){return Un}visitIntervalDayTime(){return En}visitIntervalYearMonth(){return Mn}visitFixedSizeList(){return vi}visitMap(){return Ii}};var Ji;Nr.new=function t(e){const r=e.type,n=new(qi.getVisitFn(r)())(e);if(r.children&&r.children.length>0){const i=e.children||[],s={nullValues:e.nullValues},o=Array.isArray(i)?(t,e)=>i[e]||s:({name:t})=>i[t]||s;r.children.forEach((e,r)=>{const{type:i}=e,s=o(e,r);n.children.push(t({...s,type:i}))})}return n},Object.keys(be).map(t=>be[t]).filter(t=>"number"==typeof t&&t!==be.NONE).forEach(t=>{qi.visit(t).prototype._setValue=Ki.getVisitFn(t)}),Nn.prototype._setValue=Ki.visitBinary,function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pe.apache.arrow.flatbuf.MetadataVersion.V1}schema(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new pe.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(e,r){let n=this.bb.__offset(this.bb_pos,8);return n?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(e,r){let n=this.bb.__offset(this.bb_pos,10);return n?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(4)}static addVersion(t,e){t.addFieldInt16(0,e,pe.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static createFooter(t,e,n,i,s){return r.startFooter(t),r.addVersion(t,e),r.addSchema(t,n),r.addDictionaries(t,i),r.addRecordBatches(t,s),r.endFooter(t)}}e.Footer=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Ji||(Ji={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Block=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(t,e,r,n){return t.prep(8,24),t.writeInt64(n),t.pad(4),t.writeInt32(r),t.writeInt64(e),t.offset()}}}(Ji||(Ji={}));var Gi=ft.Long,Zi=ft.Builder,Xi=ft.ByteBuffer,Qi=Ji.apache.arrow.flatbuf.Block,ts=Ji.apache.arrow.flatbuf.Footer;class es{constructor(t,e=Te.V4,r,n){this.schema=t,this.version=e,r&&(this._recordBatches=r),n&&(this._dictionaryBatches=n)}static decode(t){t=new Xi(re(t));const e=ts.getRootAsFooter(t),r=bi.decode(e.schema());return new rs(r,e)}static encode(t){const e=new Zi,r=bi.encode(e,t.schema);ts.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach(t=>ns.encode(e,t));const n=e.endVector();ts.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach(t=>ns.encode(e,t));const i=e.endVector();return ts.startFooter(e),ts.addSchema(e,r),ts.addVersion(e,Te.V4),ts.addRecordBatches(e,n),ts.addDictionaries(e,i),ts.finishFooterBuffer(e,ts.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,r=this.numRecordBatches;++e<r;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,r=this.numDictionaries;++e<r;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class rs extends es{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return ns.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return ns.decode(e)}return null}}class ns{static decode(t){return new ns(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:r}=e,n=new Gi(e.offset,0),i=new Gi(e.bodyLength,0);return Qi.createBlock(t,n,r,i)}constructor(t,e,r){this.metaDataLength=t,this.offset="number"==typeof r?r:r.low,this.bodyLength="number"==typeof e?e:e.low}}class is extends kt{write(t){if((t=re(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Bt(this.toUint8Array(!0)):this.toUint8Array(!1).then(Bt)}toUint8Array(t=!1){return t?Qt(this._values)[0]:(async()=>{let t=[],e=0;for await(const r of this)t.push(r),e+=r.byteLength;return Qt(t,e)[0]})()}}class ss{constructor(t){t&&(this.source=new as(ce.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class os{constructor(t){t instanceof os?this.source=t.source:t instanceof is?this.source=new cs(ce.fromAsyncIterable(t)):Jt(t)?this.source=new cs(ce.fromNodeStream(t)):qt(t)?this.source=new cs(ce.fromDOMStream(t)):Kt(t)?this.source=new cs(ce.fromDOMStream(t.body)):$t(t)?this.source=new cs(ce.fromIterable(t)):(zt(t)||jt(t))&&(this.source=new cs(ce.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class as{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Ot)}return(t){return Object.create(this.source.return&&this.source.return(t)||Ot)}}class cs{constructor(t){this.source=t,this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}async cancel(t){await this.return(t)}get closed(){return this._closedPromise}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}async next(t,e="read"){return await this.source.next({cmd:e,size:t})}async throw(t){const e=this.source.throw&&await this.source.throw(t)||Ot;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}async return(t){const e=this.source.return&&await this.source.return(t)||Ot;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}}class us extends ss{constructor(t,e){super(),this.position=0,this.buffer=re(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:r}=this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:r,position:n}=this;return e&&n<r?("number"!=typeof t&&(t=1/0),this.position=Math.min(r,n+Math.min(r-n,t)),e.subarray(n,this.position)):null}readAt(t,e){const r=this.buffer,n=Math.min(this.size,t+e);return r?r.subarray(t,n):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class ls extends os{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(async()=>{this.size=(await t.stat()).size,delete this._pending})()}async readInt32(t){const{buffer:e,byteOffset:r}=await this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}async seek(t){return this._pending&&await this._pending,this.position=Math.min(t,this.size),t<this.size}async read(t){this._pending&&await this._pending;const{_handle:e,size:r,position:n}=this;if(e&&n<r){"number"!=typeof t&&(t=1/0);let i=n,s=0,o=0,a=Math.min(r,i+Math.min(r-i,t)),c=new Uint8Array(Math.max(0,(this.position=a)-i));for(;(i+=o)<a&&(s+=o)<c.byteLength;)({bytesRead:o}=await e.read(c,s,c.byteLength-s,i));return c}return null}async readAt(t,e){this._pending&&await this._pending;const{_handle:r,size:n}=this;if(r&&t+e<n){const i=Math.min(n,t+e),s=new Uint8Array(i-t);return(await r.read(s,0,e,t)).buffer}return new Uint8Array(e)}async close(){const t=this._handle;this._handle=null,t&&await t.close()}async throw(t){return await this.close(),{done:!0,value:t}}async return(t){return await this.close(),{done:!0,value:t}}}function hs(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const ds=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class fs{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),r=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let n=e[3]*r[3];this.buffer[0]=65535&n;let i=n>>>16;return n=e[2]*r[3],i+=n,n=e[3]*r[2]>>>0,i+=n,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<n?65536:0,this.buffer[1]+=i>>>16,this.buffer[1]+=e[1]*r[3]+e[2]*r[2]+e[3]*r[1],this.buffer[1]+=e[0]*r[3]+e[1]*r[2]+e[2]*r[1]+e[3]*r[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${hs(this.buffer[1])} ${hs(this.buffer[0])}`}}class ps extends fs{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return ps.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return ps.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.length;let n=new ps(e);for(let e=0;e<r;){const i=8<r-e?8:r-e,s=new ps(new Uint32Array([parseInt(t.substr(e,i),10),0])),o=new ps(new Uint32Array([ds[i],0]));n.times(o),n.plus(s),e+=i}return n}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,n=t.length;++r<n;)ps.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new ps(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ps(new Uint32Array(t.buffer)).plus(e)}}class ys extends fs{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]|0,r=t.buffer[1]|0;return e<r||e===r&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return ys.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return ys.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.startsWith("-"),n=t.length;let i=new ys(e);for(let e=r?1:0;e<n;){const r=8<n-e?8:n-e,s=new ys(new Uint32Array([parseInt(t.substr(e,r),10),0])),o=new ys(new Uint32Array([ds[r],0]));i.times(o),i.plus(s),e+=r}return r?i.negate():i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,n=t.length;++r<n;)ys.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new ys(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ys(new Uint32Array(t.buffer)).plus(e)}}class bs{constructor(t){this.buffer=t}high(){return new ys(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ys(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new ps(new Uint32Array([this.buffer[3],0])),r=new ps(new Uint32Array([this.buffer[2],0])),n=new ps(new Uint32Array([this.buffer[1],0])),i=new ps(new Uint32Array([this.buffer[0],0])),s=new ps(new Uint32Array([t.buffer[3],0])),o=new ps(new Uint32Array([t.buffer[2],0])),a=new ps(new Uint32Array([t.buffer[1],0])),c=new ps(new Uint32Array([t.buffer[0],0]));let u=ps.multiply(i,c);this.buffer[0]=u.low();let l=new ps(new Uint32Array([u.high(),0]));return u=ps.multiply(n,c),l.plus(u),u=ps.multiply(i,a),l.plus(u),this.buffer[1]=l.low(),this.buffer[3]=l.lessThan(u)?1:0,this.buffer[2]=l.high(),new ps(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ps.multiply(r,c)).plus(ps.multiply(n,a)).plus(ps.multiply(i,o)),this.buffer[3]+=ps.multiply(e,c).plus(ps.multiply(r,a)).plus(ps.multiply(n,o)).plus(ps.multiply(i,s)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${hs(this.buffer[3])} ${hs(this.buffer[2])} ${hs(this.buffer[1])} ${hs(this.buffer[0])}`}static multiply(t,e){return new bs(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new bs(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return bs.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return bs.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const r=t.startsWith("-"),n=t.length;let i=new bs(e);for(let e=r?1:0;e<n;){const r=8<n-e?8:n-e,s=new bs(new Uint32Array([parseInt(t.substr(e,r),10),0,0,0])),o=new bs(new Uint32Array([ds[r],0,0,0]));i.times(o),i.plus(s),e+=r}return r?i.negate():i}static convertArray(t){const e=new Uint32Array(4*t.length);for(let r=-1,n=t.length;++r<n;)bs.from(t[r],new Uint32Array(e.buffer,e.byteOffset+16*r,4));return e}}class gs extends Ue{constructor(t,e,r,n){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=r,this.dictionaries=n}visit(t){return super.visit(t instanceof gi?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return Lr.Null(t,0,e)}visitBool(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Bool(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitInt(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Int(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFloat(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Float(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitUtf8(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Utf8(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Binary(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.FixedSizeBinary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDate(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Date(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTimestamp(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Timestamp(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTime(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Time(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDecimal(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Decimal(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitList(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.List(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Struct(t,0,e,r,this.readNullBitmap(t,r),this.visitMany(t.children))}visitUnion(t){return t.mode===ve.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Dictionary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t.indices),this.readDictionary(t))}visitInterval(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Interval(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFixedSizeList(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.FixedSizeList(t,0,e,r,this.readNullBitmap(t,r),this.visit(t.children[0]))}visitMap(t,{length:e,nullCount:r}=this.nextFieldNode()){return Lr.Map(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,r=this.nextBufferRange()){return e>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class ms extends gs{constructor(t,e,r,n){super(new Uint8Array(0),e,r,n),this.sources=t}readNullBitmap(t,e,{offset:r}=this.nextBufferRange()){return e<=0?new Uint8Array(0):Oe(this.sources[r])}readOffsets(t,{offset:e}=this.nextBufferRange()){return te(Uint8Array,te(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return te(Uint8Array,te(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:r}=this;return We.isTimestamp(t)||(We.isInt(t)||We.isTime(t))&&64===t.bitWidth||We.isDate(t)&&t.unit===me.MILLISECOND?te(Uint8Array,ys.convertArray(r[e])):We.isDecimal(t)?te(Uint8Array,bs.convertArray(r[e])):We.isBinary(t)||We.isFixedSizeBinary(t)?function(t){const e=t.join(""),r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)r[t>>1]=parseInt(e.substr(t,2),16);return r}(r[e]):We.isBool(t)?Oe(r[e]):We.isUtf8(t)?Lt(r[e].join("")):te(Uint8Array,te(t.ArrayType,r[e].map(t=>+t)))}}var _s=ft.Long,ws=pe.apache.arrow.flatbuf.Null,vs=pe.apache.arrow.flatbuf.Int,Is=pe.apache.arrow.flatbuf.FloatingPoint,Ss=pe.apache.arrow.flatbuf.Binary,Ts=pe.apache.arrow.flatbuf.Bool,As=pe.apache.arrow.flatbuf.Utf8,Bs=pe.apache.arrow.flatbuf.Decimal,Ls=pe.apache.arrow.flatbuf.Date,Os=pe.apache.arrow.flatbuf.Time,xs=pe.apache.arrow.flatbuf.Timestamp,Ds=pe.apache.arrow.flatbuf.Interval,ks=pe.apache.arrow.flatbuf.List,Us=pe.apache.arrow.flatbuf.Struct_,Es=pe.apache.arrow.flatbuf.Union,Ms=pe.apache.arrow.flatbuf.DictionaryEncoding,Fs=pe.apache.arrow.flatbuf.FixedSizeBinary,Ns=pe.apache.arrow.flatbuf.FixedSizeList,Cs=pe.apache.arrow.flatbuf.Map;const Rs=new class extends Ue{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return ws.startNull(e),ws.endNull(e)}visitInt(t,e){return vs.startInt(e),vs.addBitWidth(e,t.bitWidth),vs.addIsSigned(e,t.isSigned),vs.endInt(e)}visitFloat(t,e){return Is.startFloatingPoint(e),Is.addPrecision(e,t.precision),Is.endFloatingPoint(e)}visitBinary(t,e){return Ss.startBinary(e),Ss.endBinary(e)}visitBool(t,e){return Ts.startBool(e),Ts.endBool(e)}visitUtf8(t,e){return As.startUtf8(e),As.endUtf8(e)}visitDecimal(t,e){return Bs.startDecimal(e),Bs.addScale(e,t.scale),Bs.addPrecision(e,t.precision),Bs.endDecimal(e)}visitDate(t,e){return Ls.startDate(e),Ls.addUnit(e,t.unit),Ls.endDate(e)}visitTime(t,e){return Os.startTime(e),Os.addUnit(e,t.unit),Os.addBitWidth(e,t.bitWidth),Os.endTime(e)}visitTimestamp(t,e){const r=t.timezone&&e.createString(t.timezone)||void 0;return xs.startTimestamp(e),xs.addUnit(e,t.unit),void 0!==r&&xs.addTimezone(e,r),xs.endTimestamp(e)}visitInterval(t,e){return Ds.startInterval(e),Ds.addUnit(e,t.unit),Ds.endInterval(e)}visitList(t,e){return ks.startList(e),ks.endList(e)}visitStruct(t,e){return Us.startStruct_(e),Us.endStruct_(e)}visitUnion(t,e){Es.startTypeIdsVector(e,t.typeIds.length);const r=Es.createTypeIdsVector(e,t.typeIds);return Es.startUnion(e),Es.addMode(e,t.mode),Es.addTypeIds(e,r),Es.endUnion(e)}visitDictionary(t,e){const r=this.visit(t.indices,e);return Ms.startDictionaryEncoding(e),Ms.addId(e,new _s(t.id,0)),Ms.addIsOrdered(e,t.isOrdered),void 0!==r&&Ms.addIndexType(e,r),Ms.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Fs.startFixedSizeBinary(e),Fs.addByteWidth(e,t.byteWidth),Fs.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return Ns.startFixedSizeList(e),Ns.addListSize(e,t.listSize),Ns.endFixedSizeList(e)}visitMap(t,e){return Cs.startMap(e),Cs.addKeysSorted(e,t.keysSorted),Cs.endMap(e)}};function Vs(t){return new oo(t.count,zs(t.columns),$s(t.columns))}function Ps(t,e){return(t.children||[]).filter(Boolean).map(t=>gi.fromJSON(t,e))}function zs(t){return(t||[]).reduce((t,e)=>{return[...t,new uo(e.count,(r=e.VALIDITY,(r||[]).reduce((t,e)=>t+ +(0===e),0))),...zs(e.children)];var r},[])}function $s(t,e=[]){for(let r=-1,n=(t||[]).length;++r<n;){const n=t[r];n.VALIDITY&&e.push(new co(e.length,n.VALIDITY.length)),n.TYPE&&e.push(new co(e.length,n.TYPE.length)),n.OFFSET&&e.push(new co(e.length,n.OFFSET.length)),n.DATA&&e.push(new co(e.length,n.DATA.length)),e=$s(n.children,e)}return e}function js(t){return new Map(Object.entries(t||{}))}function Ys(t){return new qe(t.isSigned,t.bitWidth)}function Ws(t,e){const r=t.type.name;switch(r){case"NONE":case"null":return new Ke;case"binary":return new ar;case"utf8":return new cr;case"bool":return new ur;case"list":return new gr((e||[])[0]);case"struct":case"struct_":return new mr(e||[])}switch(r){case"int":{const e=t.type;return new qe(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new nr(we[e.precision])}case"decimal":{const e=t.type;return new lr(e.scale,e.precision)}case"date":{const e=t.type;return new hr(me[e.unit])}case"time":{const e=t.type;return new pr(_e[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new yr(_e[e.unit],e.timezone)}case"interval":{const e=t.type;return new br(Ie[e.unit])}case"union":{const r=t.type;return new _r(ve[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new wr(e.byteWidth)}case"fixedsizelist":{const r=t.type;return new vr(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new Ir((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var Hs=ft.Long,Ks=ft.Builder,qs=ft.ByteBuffer,Js=pe.apache.arrow.flatbuf.Type,Gs=pe.apache.arrow.flatbuf.Field,Zs=pe.apache.arrow.flatbuf.Schema,Xs=pe.apache.arrow.flatbuf.Buffer,Qs=ye.apache.arrow.flatbuf.Message,to=pe.apache.arrow.flatbuf.KeyValue,eo=ye.apache.arrow.flatbuf.FieldNode,ro=pe.apache.arrow.flatbuf.Endianness,no=ye.apache.arrow.flatbuf.RecordBatch,io=ye.apache.arrow.flatbuf.DictionaryBatch;class so{constructor(t,e,r,n){this._version=e,this._headerType=r,this.body=new Uint8Array(0),n&&(this._createHeader=()=>n),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const r=new so(0,Te.V4,e);return r._createHeader=function(t,e){return()=>{switch(e){case Se.Schema:return bi.fromJSON(t);case Se.RecordBatch:return oo.fromJSON(t);case Se.DictionaryBatch:return ao.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Se[e]}, type: ${e} }`)}}(t,e),r}static decode(t){t=new qs(re(t));const e=Qs.getRootAsMessage(t),r=e.bodyLength(),n=e.version(),i=e.headerType(),s=new so(r,n,i);return s._createHeader=function(t,e){return()=>{switch(e){case Se.Schema:return bi.decode(t.header(new Zs));case Se.RecordBatch:return oo.decode(t.header(new no),t.version());case Se.DictionaryBatch:return ao.decode(t.header(new io),t.version())}throw new Error(`Unrecognized Message type: { name: ${Se[e]}, type: ${e} }`)}}(e,i),s}static encode(t){let e=new Ks,r=-1;return t.isSchema()?r=bi.encode(e,t.header()):t.isRecordBatch()?r=oo.encode(e,t.header()):t.isDictionaryBatch()&&(r=ao.encode(e,t.header())),Qs.startMessage(e),Qs.addVersion(e,Te.V4),Qs.addHeader(e,r),Qs.addHeaderType(e,t.headerType),Qs.addBodyLength(e,new Hs(t.bodyLength,0)),Qs.finishMessageBuffer(e,Qs.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof bi)return new so(0,Te.V4,Se.Schema,t);if(t instanceof oo)return new so(e,Te.V4,Se.RecordBatch,t);if(t instanceof ao)return new so(e,Te.V4,Se.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Se.Schema}isRecordBatch(){return this.headerType===Se.RecordBatch}isDictionaryBatch(){return this.headerType===Se.DictionaryBatch}}let oo=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,e,r){this._nodes=e,this._buffers=r,this._length="number"==typeof t?t:t.low}};class ao{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,e,r=!1){this._data=t,this._isDelta=r,this._id="number"==typeof e?e:e.low}}class co{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class uo{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function lo(t,e){const r=[];for(let n,i=-1,s=-1,o=t.childrenLength();++i<o;)(n=t.children(i))&&(r[++s]=gi.decode(n,e));return r}function ho(t){const e=new Map;if(t)for(let r,n,i=-1,s=0|t.customMetadataLength();++i<s;)(r=t.customMetadata(i))&&null!=(n=r.key())&&e.set(n,r.value());return e}function fo(t){return new qe(t.isSigned(),t.bitWidth())}function po(t,e){const r=t.typeType();switch(r){case Js.NONE:case Js.Null:return new Ke;case Js.Binary:return new ar;case Js.Utf8:return new cr;case Js.Bool:return new ur;case Js.List:return new gr((e||[])[0]);case Js.Struct_:return new mr(e||[])}switch(r){case Js.Int:{const e=t.type(new pe.apache.arrow.flatbuf.Int);return new qe(e.isSigned(),e.bitWidth())}case Js.FloatingPoint:{const e=t.type(new pe.apache.arrow.flatbuf.FloatingPoint);return new nr(e.precision())}case Js.Decimal:{const e=t.type(new pe.apache.arrow.flatbuf.Decimal);return new lr(e.scale(),e.precision())}case Js.Date:{const e=t.type(new pe.apache.arrow.flatbuf.Date);return new hr(e.unit())}case Js.Time:{const e=t.type(new pe.apache.arrow.flatbuf.Time);return new pr(e.unit(),e.bitWidth())}case Js.Timestamp:{const e=t.type(new pe.apache.arrow.flatbuf.Timestamp);return new yr(e.unit(),e.timezone())}case Js.Interval:{const e=t.type(new pe.apache.arrow.flatbuf.Interval);return new br(e.unit())}case Js.Union:{const r=t.type(new pe.apache.arrow.flatbuf.Union);return new _r(r.mode(),r.typeIdsArray()||[],e||[])}case Js.FixedSizeBinary:{const e=t.type(new pe.apache.arrow.flatbuf.FixedSizeBinary);return new wr(e.byteWidth())}case Js.FixedSizeList:{const r=t.type(new pe.apache.arrow.flatbuf.FixedSizeList);return new vr(r.listSize(),(e||[])[0])}case Js.Map:{const r=t.type(new pe.apache.arrow.flatbuf.Map);return new Ir((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Js[r]}" (${r})`)}gi.encode=function(t,e){let r=-1,n=-1,i=-1,s=e.type,o=e.typeId;We.isDictionary(s)?(o=s.dictionary.typeId,i=Rs.visit(s,t),n=Rs.visit(s.dictionary,t)):n=Rs.visit(s,t);const a=(s.children||[]).map(e=>gi.encode(t,e)),c=Gs.createChildrenVector(t,a),u=e.metadata&&e.metadata.size>0?Gs.createCustomMetadataVector(t,[...e.metadata].map(([e,r])=>{const n=t.createString(`${e}`),i=t.createString(`${r}`);return to.startKeyValue(t),to.addKey(t,n),to.addValue(t,i),to.endKeyValue(t)})):-1;e.name&&(r=t.createString(e.name));Gs.startField(t),Gs.addType(t,n),Gs.addTypeType(t,o),Gs.addChildren(t,c),Gs.addNullable(t,!!e.nullable),-1!==r&&Gs.addName(t,r);-1!==i&&Gs.addDictionary(t,i);-1!==u&&Gs.addCustomMetadata(t,u);return Gs.endField(t)},gi.decode=function(t,e){let r,n,i,s,o,a;e&&(a=t.dictionary())?e.has(r=a.id().low)?(s=(s=a.indexType())?fo(s):new Ze,o=new Ar(e.get(r),s,r,a.isOrdered()),n=new gi(t.name(),o,t.nullable(),ho(t))):(s=(s=a.indexType())?fo(s):new Ze,e.set(r,i=po(t,lo(t,e))),o=new Ar(i,s,r,a.isOrdered()),n=new gi(t.name(),o,t.nullable(),ho(t))):(i=po(t,lo(t,e)),n=new gi(t.name(),i,t.nullable(),ho(t)));return n||null},gi.fromJSON=function(t,e){let r,n,i,s,o,a;return e&&(s=t.dictionary)?e.has(r=s.id)?(n=(n=s.indexType)?Ys(n):new Ze,a=new Ar(e.get(r),n,r,s.isOrdered),i=new gi(t.name,a,t.nullable,js(t.customMetadata))):(n=(n=s.indexType)?Ys(n):new Ze,e.set(r,o=Ws(t,Ps(t,e))),a=new Ar(o,n,r,s.isOrdered),i=new gi(t.name,a,t.nullable,js(t.customMetadata))):(o=Ws(t,Ps(t,e)),i=new gi(t.name,o,t.nullable,js(t.customMetadata))),i||null},bi.encode=function(t,e){const r=e.fields.map(e=>gi.encode(t,e));Zs.startFieldsVector(t,r.length);const n=Zs.createFieldsVector(t,r),i=e.metadata&&e.metadata.size>0?Zs.createCustomMetadataVector(t,[...e.metadata].map(([e,r])=>{const n=t.createString(`${e}`),i=t.createString(`${r}`);return to.startKeyValue(t),to.addKey(t,n),to.addValue(t,i),to.endKeyValue(t)})):-1;Zs.startSchema(t),Zs.addFields(t,n),Zs.addEndianness(t,yo?ro.Little:ro.Big),-1!==i&&Zs.addCustomMetadata(t,i);return Zs.endSchema(t)},bi.decode=function(t,e=new Map){const r=function(t,e){const r=[];for(let n,i=-1,s=-1,o=t.fieldsLength();++i<o;)(n=t.fields(i))&&(r[++s]=gi.decode(n,e));return r}(t,e);return new bi(r,ho(t),e)},bi.fromJSON=function(t,e=new Map){return new bi(function(t,e){return(t.fields||[]).filter(Boolean).map(t=>gi.fromJSON(t,e))}(t,e),js(t.customMetadata),e)},oo.encode=function(t,e){const r=e.nodes||[],n=e.buffers||[];no.startNodesVector(t,r.length),r.slice().reverse().forEach(e=>uo.encode(t,e));const i=t.endVector();no.startBuffersVector(t,n.length),n.slice().reverse().forEach(e=>co.encode(t,e));const s=t.endVector();return no.startRecordBatch(t),no.addLength(t,new Hs(e.length,0)),no.addNodes(t,i),no.addBuffers(t,s),no.endRecordBatch(t)},oo.decode=function(t,e=Te.V4){return new oo(t.length(),function(t){const e=[];for(let r,n=-1,i=-1,s=t.nodesLength();++n<s;)(r=t.nodes(n))&&(e[++i]=uo.decode(r));return e}(t),function(t,e){const r=[];for(let n,i=-1,s=-1,o=t.buffersLength();++i<o;)(n=t.buffers(i))&&(e<Te.V4&&(n.bb_pos+=8*(i+1)),r[++s]=co.decode(n));return r}(t,e))},oo.fromJSON=Vs,ao.encode=function(t,e){const r=oo.encode(t,e.data);return io.startDictionaryBatch(t),io.addId(t,new Hs(e.id,0)),io.addIsDelta(t,e.isDelta),io.addData(t,r),io.endDictionaryBatch(t)},ao.decode=function(t,e=Te.V4){return new ao(oo.decode(t.data(),e),t.id(),t.isDelta())},ao.fromJSON=function(t){return new ao(Vs(t.data),t.id,t.isDelta)},uo.encode=function(t,e){return eo.createFieldNode(t,new Hs(e.length,0),new Hs(e.nullCount,0))},uo.decode=function(t){return new uo(t.length(),t.nullCount())},co.encode=function(t,e){return Xs.createBuffer(t,new Hs(e.offset,0),new Hs(e.length,0))},co.decode=function(t){return new co(t.offset(),t.length())};const yo=function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}();var bo=ft.ByteBuffer;const go=t=>`Expected ${Se[t]} Message in stream, but was null or length 0.`,mo=t=>`Header pointer of flatbuffer-encoded ${Se[t]} Message is null or length 0.`,_o=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,wo=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class vo{constructor(t){this.source=t instanceof ss?t:new ss(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Ot:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(go(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=re(this.source.read(t));if(e.byteLength<t)throw new Error(wo(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=Se.Schema,r=this.readMessage(e),n=r&&r.header();if(t&&!n)throw new Error(mo(e));return n}readMetadataLength(){const t=this.source.read(To),e=t&&new bo(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}readMetadata(t){const e=this.source.read(t);if(!e)return Ot;if(e.byteLength<t)throw new Error(_o(t,e.byteLength));return{done:!1,value:so.decode(e)}}}class Io{constructor(t,e){this.source=t instanceof os?t:Ht(t)?new ls(t,e):new os(t)}[Symbol.asyncIterator](){return this}async next(){let t;return(t=await this.readMetadataLength()).done||-1===t.value&&(t=await this.readMetadataLength()).done||(t=await this.readMetadata(t.value)).done?Ot:t}async throw(t){return await this.source.throw(t)}async return(t){return await this.source.return(t)}async readMessage(t){let e;if((e=await this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(go(t));return e.value}async readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=re(await this.source.read(t));if(e.byteLength<t)throw new Error(wo(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}async readSchema(t=!1){const e=Se.Schema,r=await this.readMessage(e),n=r&&r.header();if(t&&!n)throw new Error(mo(e));return n}async readMetadataLength(){const t=await this.source.read(To),e=t&&new bo(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}async readMetadata(t){const e=await this.source.read(t);if(!e)return Ot;if(e.byteLength<t)throw new Error(_o(t,e.byteLength));return{done:!1,value:so.decode(e)}}}class So extends vo{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof xt?t:new xt(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:so.fromJSON(t.schema,Se.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:so.fromJSON(e,Se.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:so.fromJSON(e,Se.RecordBatch)}}return this._body=[],Ot}readMessageBody(t){return function t(e){return(e||[]).reduce((e,r)=>[...e,...r.VALIDITY&&[r.VALIDITY]||[],...r.TYPE&&[r.TYPE]||[],...r.OFFSET&&[r.OFFSET]||[],...r.DATA&&[r.DATA]||[],...t(r.children)],[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(go(t));return e.value}readSchema(){const t=Se.Schema,e=this.readMessage(t),r=e&&e.header();if(!e||!r)throw new Error(mo(t));return r}}const To=4,Ao="ARROW1",Bo=new Uint8Array(6);for(let t=0;t<6;t+=1)Bo[t]=Ao.charCodeAt(t);function Lo(t,e=0){for(let r=-1,n=Bo.length;++r<n;)if(Bo[r]!==t[e+r])return!1;return!0}const Oo=Bo.length,xo=Oo+To,Do=2*Oo+To;class ko extends Ue{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=new ko,r=li(xc,t),[n=e]=e.visitMany(r);return n}visit(t){if(!We.isDictionary(t.type)){const{data:e,length:r,nullCount:n}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");We.isNull(t.type)||Uo.call(this,n<=0?new Uint8Array(0):Le(e.offset,r,e.nullBitmap)),this.nodes.push(new uo(r,n))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Uo(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new co(this._byteLength,e)),this._byteLength+=e,this}function Eo(t){return Uo.call(this,t.values.subarray(0,t.length*t.stride))}function Mo(t){const{length:e,values:r,valueOffsets:n}=t,i=n[0],s=n[e],o=Math.min(s-i,r.byteLength-i);return Uo.call(this,ae(-n[0],e,n)),Uo.call(this,r.subarray(i,i+o)),this}function Fo(t){const{length:e,valueOffsets:r}=t;return r&&Uo.call(this,ae(r[0],e,r)),this.visit(t.getChildAt(0))}function No(t){return this.visitMany(t.type.children.map((e,r)=>t.getChildAt(r)).filter(Boolean))[0]}ko.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Uo.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Uo.call(this,Le(t.offset,t.length,e)):Uo.call(this,Oe(t))},ko.prototype.visitInt=Eo,ko.prototype.visitFloat=Eo,ko.prototype.visitUtf8=Mo,ko.prototype.visitBinary=Mo,ko.prototype.visitFixedSizeBinary=Eo,ko.prototype.visitDate=Eo,ko.prototype.visitTimestamp=Eo,ko.prototype.visitTime=Eo,ko.prototype.visitDecimal=Eo,ko.prototype.visitList=Fo,ko.prototype.visitStruct=No,ko.prototype.visitUnion=function(t){const{type:e,length:r,typeIds:n,valueOffsets:i}=t;if(Uo.call(this,n),e.mode===ve.Sparse)return No.call(this,t);if(e.mode===ve.Dense){if(t.offset<=0)return Uo.call(this,i),No.call(this,t);{const s=n.reduce((t,e)=>Math.max(t,e),n[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),c=new Int32Array(r),u=ae(-i[0],r,i);for(let t,e,i=-1;++i<r;)-1===(e=a[t=n[i]])&&(e=a[t]=u[t]),c[i]=u[i]-e,++o[t];Uo.call(this,c);for(let n,i=-1,s=e.children.length;++i<s;)if(n=t.getChildAt(i)){const t=e.typeIds[i],s=Math.min(r,o[t]);this.visit(n.slice(a[t],s))}}}return this},ko.prototype.visitInterval=Eo,ko.prototype.visitFixedSizeList=Fo,ko.prototype.visitMap=Fo;class Co extends Dt{constructor(t){super(),this._position=0,this._started=!1,this._sink=new is,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Pt(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return zt(t)?t.then(t=>this.writeAll(t)):jt(t)?zo(this,t):Po(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var r;return t===this._sink||t instanceof is?this._sink=t:(this._sink=new is,t&&(Pt(r=t)&&Vt(r.abort)&&Vt(r.getWriter)&&!(r instanceof Dt))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>Pt(t)&&Vt(t.end)&&Vt(t.write)&&Rt(t.writable)&&!(t instanceof Dt))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&e.compareTo(this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof Oc&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof xc&&!(e=t.schema))return this.finish()&&void 0;if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof xc?t instanceof Dc||this._writeRecordBatch(t):t instanceof Oc?this.writeAll(t.chunks):$t(t)&&this.writeAll(t)}_writeMessage(t,e=8){const r=e-1,n=so.encode(t),i=n.byteLength,s=this._writeLegacyIpcFormat?4:8,o=i+s+r&~r,a=o-i-s;return t.headerType===Se.RecordBatch?this._recordBatchBlocks.push(new ns(o,t.bodyLength,this._position)):t.headerType===Se.DictionaryBatch&&this._dictionaryBlocks.push(new ns(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-s)),i>0&&this._write(n),this._writePadding(a)}_write(t){if(this._started){const e=re(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(so.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Bo)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:r,bufferRegions:n,buffers:i}=ko.assemble(t),s=new oo(t.length,r,n),o=so.from(s,e);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(i)}_writeDictionaryBatch(t,e,r=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:n,nodes:i,bufferRegions:s,buffers:o}=ko.assemble(t),a=new oo(t.length,i,s),c=new ao(a,e,r),u=so.from(c,n);return this._writeMessage(u)._writeBodyBuffers(o)}_writeBodyBuffers(t){let e,r,n;for(let i=-1,s=t.length;++i<s;)(e=t[i])&&(r=e.byteLength)>0&&(this._write(e),(n=(r+7&-8)-r)>0&&this._writePadding(n));return this}_writeDictionaries(t){for(let[e,r]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(r=r.slice(t)).length>0){const n="chunks"in r?r.chunks:[r];for(const r of n)this._writeDictionaryBatch(r,e,t>0),t+=r.length}}return this}}class Ro extends Co{static writeAll(t,e){const r=new Ro(e);return zt(t)?t.then(t=>r.writeAll(t)):jt(t)?zo(r,t):Po(r,t)}}class Vo extends Co{constructor(){super(),this._autoDestroy=!0}static writeAll(t){const e=new Vo;return zt(t)?t.then(t=>e.writeAll(t)):jt(t)?zo(e,t):Po(e,t)}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=es.encode(new es(t,Te.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Po(t,e){let r=e;e instanceof Oc&&(r=e.chunks,t.reset(void 0,e.schema));for(const e of r)t.write(e);return t.finish()}async function zo(t,e){for await(const r of e)t.write(r);return t.finish()}const $o=new Uint8Array(0),jo=t=>[$o,$o,new Uint8Array(t),$o];function Yo(t,e){return function(t,e){const r=[...t.fields],n=[],i={numBatches:e.reduce((t,e)=>Math.max(t,e.length),0)};let s,o=0,a=0,c=-1,u=e.length,l=[];for(;i.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,c=-1;++c<u;)l[c]=s=e[c].shift(),a=Math.min(a,s?s.length:a);isFinite(a)&&(l=Wo(r,a,l,e,i),a>0&&(n[o++]=[a,l.slice()]))}return[t=new bi(r,t.metadata),n.map(e=>new xc(t,...e))]}(t,e.map(t=>t instanceof ei?t.chunks.map(t=>t.data):[t.data]))}function Wo(t,e,r,n,i){let s,o,a=0,c=-1,u=n.length;const l=(e+63&-64)>>3;for(;++c<u;)(s=r[c])&&(a=s.length)>=e?a===e?r[c]=s:(r[c]=s.slice(0,e),s=s.slice(e,a-e),i.numBatches=Math.max(i.numBatches,n[c].unshift(s))):((o=t[c]).nullable||(t[c]=o.clone({nullable:!0})),r[c]=s?s._changeLengthAndBackfillNullBitmap(e):Lr.new(o.type,0,e,e,jo(l)));return r}class Ho extends fe{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return`${be[this.typeId]}Vector`}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t,e=this._children){return fe.new(t,e)}concat(...t){return ei.concat(this,...t)}slice(t,e){return Jn(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=fe.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,r){return t.clone(t.data.slice(e,r-e),null)}_bindDataAccessors(t){}}Ho.prototype[Symbol.isConcatSpreadable]=!0;class Ko extends Ho{asUtf8(){return fe.new(this.data.clone(new cr))}}class qo extends Ho{static from(t){return Lc(()=>new ur,t)}}class Jo extends Ho{static from(...t){return 2===t.length?Lc(()=>t[1]===me.DAY?new dr:new fr,t[0]):Lc(()=>new fr,t[0])}}class Go extends Jo{}class Zo extends Jo{}class Xo extends Ho{}class Qo extends Ho{constructor(t){super(t),this.indices=fe.new(t.clone(this.type.indices))}static from(...t){if(3===t.length){const[e,r,n]=t,i=new Ar(e.type,r,null,null);return fe.new(Lr.Dictionary(i,0,n.length,0,null,n,e))}return Lc(()=>t[0].type,t[0])}get dictionary(){return this.data.dictionary}reverseLookup(t){return this.dictionary.indexOf(t)}getKey(t){return this.indices.get(t)}getValue(t){return this.dictionary.get(t)}setKey(t,e){return this.indices.set(t,e)}setValue(t,e){return this.dictionary.set(t,e)}}Qo.prototype.indices=null;class ta extends Ho{}class ea extends Ho{}class ra extends Ho{static from(t){let e=ca(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let r=aa(t.constructor)||e;if(null===e&&(e=r),e&&e===r){let r=new e,n=t.byteLength/r.ArrayType.BYTES_PER_ELEMENT;if(!oa(e,t.constructor))return fe.new(Lr.Float(r,0,n,0,null,t))}}if(e)return Lc(()=>new e,t);if(t instanceof DataView||t instanceof ArrayBuffer)throw new TypeError(`Cannot infer float type from instance of ${t.constructor.name}`);throw new TypeError("Unrecognized FloatVector input")}}class na extends ra{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}class ia extends ra{}class sa extends ra{}const oa=(t,e)=>t===ir&&e!==Uint16Array,aa=t=>{switch(t){case Uint16Array:return ir;case Float32Array:return sr;case Float64Array:return or;default:return null}},ca=t=>{switch(t){case na:return ir;case ia:return sr;case sa:return or;default:return null}};class ua extends Ho{}class la extends ua{}class ha extends ua{}class da extends Ho{static from(...t){let[e,r=!1]=t,n=Sa(this,r);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){let t=Ia(e.constructor,r)||n;if(null===n&&(n=t),n&&n===t){let t=new n,r=e.byteLength/t.ArrayType.BYTES_PER_ELEMENT;return va(n,e.constructor)&&(r*=.5),fe.new(Lr.Int(t,0,r,0,null,e))}}if(n)return Lc(()=>new n,e);if(e instanceof DataView||e instanceof ArrayBuffer)throw new TypeError(`Cannot infer integer type from instance of ${e.constructor.name}`);throw new TypeError("Unrecognized IntVector input")}}class fa extends da{}class pa extends da{}class ya extends da{}class ba extends da{toBigInt64Array(){return t=this.values,te(Mt,t);var t}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}class ga extends da{}class ma extends da{}class _a extends da{}class wa extends da{toBigUint64Array(){return t=this.values,te(Nt,t);var t}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const va=(t,e)=>!(t!==Xe&&t!==rr||e!==Int32Array&&e!==Uint32Array),Ia=(t,e)=>{switch(t){case Int8Array:return Je;case Int16Array:return Ge;case Int32Array:return e?Xe:Ze;case Mt:return Xe;case Uint8Array:return Qe;case Uint16Array:return tr;case Uint32Array:return e?rr:er;case Nt:return rr;default:return null}},Sa=(t,e)=>{switch(t){case fa:return Je;case pa:return Ge;case ya:return e?Xe:Ze;case ba:return Xe;case ga:return Qe;case ma:return tr;case _a:return e?rr:er;case wa:return rr;default:return null}};class Ta extends Ho{}class Aa extends Ho{asList(){const t=this.type.children[0];return fe.new(this.data.clone(new gr(t)))}bind(t){const e=this.getChildAt(0),{[t]:r,[t+1]:n}=this.valueOffsets;return new Yn(e.slice(r,n))}}class Ba extends Ho{}const La=Symbol.for("rowIndex");class Oa extends Ho{bind(t){const e=this._row||(this._row=new Wn(this)),r=Object.create(e);return r[La]=t,r}}class xa extends Ho{}class Da extends xa{}class ka extends xa{}class Ua extends xa{}class Ea extends xa{}class Ma extends Ho{}class Fa extends Ma{}class Na extends Ma{}class Ca extends Ma{}class Ra extends Ma{}class Va extends Ho{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class Pa extends Va{get valueOffsets(){return this.data.valueOffsets}}class za extends Va{}class $a extends Ho{static from(t){return Lc(()=>new cr,t)}asBinary(){return fe.new(this.data.clone(new ar))}}function ja(t){return function(){return t(this)}}function Ya(t){return function(e,r){return t(this,e,r)}}class Wa extends Ue{}const Ha=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Ka=t=>new Date(t),qa=(t,e,r)=>{const{[r]:n,[r+1]:i}=e;return null!=n&&null!=i?t.subarray(n,i):null},Ja=({values:t},e)=>((t,e)=>Ka(((t,e)=>864e5*t[e])(t,e)))(t,e),Ga=({values:t},e)=>((t,e)=>Ka(Ha(t,e)))(t,2*e),Za=({stride:t,values:e},r)=>e[t*r],Xa=({stride:t,values:e},r)=>function(t){let e=(31744&t)>>10,r=(1023&t)/1024,n=(-1)**((32768&t)>>15);switch(e){case 31:return n*(r?NaN:1/0);case 0:return n*(r?6103515625e-14*r:0)}return n*2**(e-15)*(1+r)}(e[t*r]),Qa=({stride:t,values:e,type:r},n)=>ln.new(e.subarray(t*n,t*(n+1)),r.isSigned),tc=({values:t},e)=>1e3*Ha(t,2*e),ec=({values:t},e)=>Ha(t,2*e),rc=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),nc=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),ic=({values:t,stride:e},r)=>t[e*r],sc=({values:t,stride:e},r)=>t[e*r],oc=({values:t},e)=>ln.signed(t.subarray(2*e,2*(e+1))),ac=({values:t},e)=>ln.signed(t.subarray(2*e,2*(e+1))),cc=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(r);return n?n.get(t.valueOffsets[e]):null},uc=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(r);return n?n.get(e):null},lc=({values:t},e)=>t.subarray(2*e,2*(e+1)),hc=({values:t},e)=>{const r=t[e],n=new Int32Array(2);return n[0]=r/12|0,n[1]=r%12|0,n};Wa.prototype.visitNull=(t,e)=>null,Wa.prototype.visitBool=({offset:t,values:e},r)=>{const n=t+r;return!!(e[n>>3]&1<<n%8)},Wa.prototype.visitInt=(t,e)=>t.type.bitWidth<64?Za(t,e):Qa(t,e),Wa.prototype.visitInt8=Za,Wa.prototype.visitInt16=Za,Wa.prototype.visitInt32=Za,Wa.prototype.visitInt64=Qa,Wa.prototype.visitUint8=Za,Wa.prototype.visitUint16=Za,Wa.prototype.visitUint32=Za,Wa.prototype.visitUint64=Qa,Wa.prototype.visitFloat=(t,e)=>t.type.precision!==we.HALF?Za(t,e):Xa(t,e),Wa.prototype.visitFloat16=Xa,Wa.prototype.visitFloat32=Za,Wa.prototype.visitFloat64=Za,Wa.prototype.visitUtf8=({values:t,valueOffsets:e},r)=>{const n=qa(t,e,r);return null!==n?Bt(n):null},Wa.prototype.visitBinary=({values:t,valueOffsets:e},r)=>qa(t,e,r),Wa.prototype.visitFixedSizeBinary=({stride:t,values:e},r)=>e.subarray(t*r,t*(r+1)),Wa.prototype.visitDate=(t,e)=>t.type.unit===me.DAY?Ja(t,e):Ga(t,e),Wa.prototype.visitDateDay=Ja,Wa.prototype.visitDateMillisecond=Ga,Wa.prototype.visitTimestamp=(t,e)=>{switch(t.type.unit){case _e.SECOND:return tc(t,e);case _e.MILLISECOND:return ec(t,e);case _e.MICROSECOND:return rc(t,e);case _e.NANOSECOND:return nc(t,e)}},Wa.prototype.visitTimestampSecond=tc,Wa.prototype.visitTimestampMillisecond=ec,Wa.prototype.visitTimestampMicrosecond=rc,Wa.prototype.visitTimestampNanosecond=nc,Wa.prototype.visitTime=(t,e)=>{switch(t.type.unit){case _e.SECOND:return ic(t,e);case _e.MILLISECOND:return sc(t,e);case _e.MICROSECOND:return oc(t,e);case _e.NANOSECOND:return ac(t,e)}},Wa.prototype.visitTimeSecond=ic,Wa.prototype.visitTimeMillisecond=sc,Wa.prototype.visitTimeMicrosecond=oc,Wa.prototype.visitTimeNanosecond=ac,Wa.prototype.visitDecimal=({values:t},e)=>ln.decimal(t.subarray(4*e,4*(e+1))),Wa.prototype.visitList=(t,e)=>{const r=t.getChildAt(0),{valueOffsets:n,stride:i}=t;return r.slice(n[e*i],n[e*i+1])},Wa.prototype.visitStruct=(t,e)=>t.bind(e),Wa.prototype.visitUnion=(t,e)=>t.type.mode===ve.Dense?cc(t,e):uc(t,e),Wa.prototype.visitDenseUnion=cc,Wa.prototype.visitSparseUnion=uc,Wa.prototype.visitDictionary=(t,e)=>t.getValue(t.getKey(e)),Wa.prototype.visitInterval=(t,e)=>t.type.unit===Ie.DAY_TIME?lc(t,e):hc(t,e),Wa.prototype.visitIntervalDayTime=lc,Wa.prototype.visitIntervalYearMonth=hc,Wa.prototype.visitFixedSizeList=(t,e)=>{const r=t.getChildAt(0),{stride:n}=t;return r.slice(e*n,(e+1)*n)},Wa.prototype.visitMap=(t,e)=>t.bind(e);const dc=new Wa;class fc extends Ue{}function pc(t,e,r){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:r}=t;if(!r||t.nullCount<=0)return-1;let n=0;for(const i of xe(r,t.data.offset+(e||0),t.length,r,Ae)){if(!i)return n;++n}return-1}(t,r);const n=Xn(e);for(let e=(r||0)-1,i=t.length;++e<i;)if(n(t.get(e)))return e;return-1}function yc(t,e,r){const n=Xn(e);for(let e=(r||0)-1,i=t.length;++e<i;)if(n(t.get(e)))return e;return-1}fc.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},fc.prototype.visitBool=pc,fc.prototype.visitInt=pc,fc.prototype.visitInt8=pc,fc.prototype.visitInt16=pc,fc.prototype.visitInt32=pc,fc.prototype.visitInt64=pc,fc.prototype.visitUint8=pc,fc.prototype.visitUint16=pc,fc.prototype.visitUint32=pc,fc.prototype.visitUint64=pc,fc.prototype.visitFloat=pc,fc.prototype.visitFloat16=pc,fc.prototype.visitFloat32=pc,fc.prototype.visitFloat64=pc,fc.prototype.visitUtf8=pc,fc.prototype.visitBinary=pc,fc.prototype.visitFixedSizeBinary=pc,fc.prototype.visitDate=pc,fc.prototype.visitDateDay=pc,fc.prototype.visitDateMillisecond=pc,fc.prototype.visitTimestamp=pc,fc.prototype.visitTimestampSecond=pc,fc.prototype.visitTimestampMillisecond=pc,fc.prototype.visitTimestampMicrosecond=pc,fc.prototype.visitTimestampNanosecond=pc,fc.prototype.visitTime=pc,fc.prototype.visitTimeSecond=pc,fc.prototype.visitTimeMillisecond=pc,fc.prototype.visitTimeMicrosecond=pc,fc.prototype.visitTimeNanosecond=pc,fc.prototype.visitDecimal=pc,fc.prototype.visitList=pc,fc.prototype.visitStruct=pc,fc.prototype.visitUnion=pc,fc.prototype.visitDenseUnion=yc,fc.prototype.visitSparseUnion=yc,fc.prototype.visitDictionary=pc,fc.prototype.visitInterval=pc,fc.prototype.visitIntervalDayTime=pc,fc.prototype.visitIntervalYearMonth=pc,fc.prototype.visitFixedSizeList=pc,fc.prototype.visitMap=pc;const bc=new fc;class gc extends Ue{}function mc(t){if(t.nullCount>0)return function(t){const e=dc.getVisitFn(t);return xe(t.nullBitmap,t.offset,t.length,t,(t,r,n,i)=>n&1<<i?e(t,r):null)}(t);const{type:e,typeId:r,length:n}=t;return 1===t.stride&&(r===be.Timestamp||r===be.Int&&64!==e.bitWidth||r===be.Time&&64!==e.bitWidth||r===be.Float&&e.precision>0)?t.values.subarray(0,n)[Symbol.iterator]():function*(e){for(let r=-1;++r<n;)yield e(t,r)}(dc.getVisitFn(t))}gc.prototype.visitNull=mc,gc.prototype.visitBool=mc,gc.prototype.visitInt=mc,gc.prototype.visitInt8=mc,gc.prototype.visitInt16=mc,gc.prototype.visitInt32=mc,gc.prototype.visitInt64=mc,gc.prototype.visitUint8=mc,gc.prototype.visitUint16=mc,gc.prototype.visitUint32=mc,gc.prototype.visitUint64=mc,gc.prototype.visitFloat=mc,gc.prototype.visitFloat16=mc,gc.prototype.visitFloat32=mc,gc.prototype.visitFloat64=mc,gc.prototype.visitUtf8=mc,gc.prototype.visitBinary=mc,gc.prototype.visitFixedSizeBinary=mc,gc.prototype.visitDate=mc,gc.prototype.visitDateDay=mc,gc.prototype.visitDateMillisecond=mc,gc.prototype.visitTimestamp=mc,gc.prototype.visitTimestampSecond=mc,gc.prototype.visitTimestampMillisecond=mc,gc.prototype.visitTimestampMicrosecond=mc,gc.prototype.visitTimestampNanosecond=mc,gc.prototype.visitTime=mc,gc.prototype.visitTimeSecond=mc,gc.prototype.visitTimeMillisecond=mc,gc.prototype.visitTimeMicrosecond=mc,gc.prototype.visitTimeNanosecond=mc,gc.prototype.visitDecimal=mc,gc.prototype.visitList=mc,gc.prototype.visitStruct=mc,gc.prototype.visitUnion=mc,gc.prototype.visitDenseUnion=mc,gc.prototype.visitSparseUnion=mc,gc.prototype.visitDictionary=mc,gc.prototype.visitInterval=mc,gc.prototype.visitIntervalDayTime=mc,gc.prototype.visitIntervalYearMonth=mc,gc.prototype.visitFixedSizeList=mc,gc.prototype.visitMap=mc;const _c=new gc;class wc extends Ue{}function vc(t){const{type:e,length:r,stride:n}=t;switch(e.typeId){case be.Int:case be.Float:case be.Decimal:case be.Time:case be.Timestamp:return t.values.subarray(0,r*n)}return[..._c.visit(t)]}wc.prototype.visitNull=vc,wc.prototype.visitBool=vc,wc.prototype.visitInt=vc,wc.prototype.visitInt8=vc,wc.prototype.visitInt16=vc,wc.prototype.visitInt32=vc,wc.prototype.visitInt64=vc,wc.prototype.visitUint8=vc,wc.prototype.visitUint16=vc,wc.prototype.visitUint32=vc,wc.prototype.visitUint64=vc,wc.prototype.visitFloat=vc,wc.prototype.visitFloat16=vc,wc.prototype.visitFloat32=vc,wc.prototype.visitFloat64=vc,wc.prototype.visitUtf8=vc,wc.prototype.visitBinary=vc,wc.prototype.visitFixedSizeBinary=vc,wc.prototype.visitDate=vc,wc.prototype.visitDateDay=vc,wc.prototype.visitDateMillisecond=vc,wc.prototype.visitTimestamp=vc,wc.prototype.visitTimestampSecond=vc,wc.prototype.visitTimestampMillisecond=vc,wc.prototype.visitTimestampMicrosecond=vc,wc.prototype.visitTimestampNanosecond=vc,wc.prototype.visitTime=vc,wc.prototype.visitTimeSecond=vc,wc.prototype.visitTimeMillisecond=vc,wc.prototype.visitTimeMicrosecond=vc,wc.prototype.visitTimeNanosecond=vc,wc.prototype.visitDecimal=vc,wc.prototype.visitList=vc,wc.prototype.visitStruct=vc,wc.prototype.visitUnion=vc,wc.prototype.visitDenseUnion=vc,wc.prototype.visitSparseUnion=vc,wc.prototype.visitDictionary=vc,wc.prototype.visitInterval=vc,wc.prototype.visitIntervalDayTime=vc,wc.prototype.visitIntervalYearMonth=vc,wc.prototype.visitFixedSizeList=vc,wc.prototype.visitMap=vc;const Ic=new wc,Sc=(t,e)=>t+e,Tc=t=>`Cannot compute the byte width of variable-width column ${t}`;const Ac=new class extends Ue{visitNull(t){return 0}visitInt(t){return t.bitWidth/8}visitFloat(t){return t.ArrayType.BYTES_PER_ELEMENT}visitBinary(t){throw new Error(Tc(t))}visitUtf8(t){throw new Error(Tc(t))}visitBool(t){return 1/8}visitDecimal(t){return 16}visitDate(t){return 4*(t.unit+1)}visitTime(t){return t.bitWidth/8}visitTimestamp(t){return t.unit===_e.SECOND?4:8}visitInterval(t){return 4*(t.unit+1)}visitList(t){throw new Error(Tc(t))}visitStruct(t){return this.visitFields(t.children).reduce(Sc,0)}visitUnion(t){return this.visitFields(t.children).reduce(Sc,0)}visitFixedSizeBinary(t){return t.byteWidth}visitFixedSizeList(t){return t.listSize*this.visitFields(t.children).reduce(Sc,0)}visitMap(t){return this.visitFields(t.children).reduce(Sc,0)}visitDictionary(t){return this.visit(t.indices)}visitFields(t){return(t||[]).map(t=>this.visit(t.type))}visitSchema(t){return this.visitFields(t.fields).reduce(Sc,0)}};const Bc=new class extends Ue{visitNull(){return Ba}visitBool(){return qo}visitInt(){return da}visitInt8(){return fa}visitInt16(){return pa}visitInt32(){return ya}visitInt64(){return ba}visitUint8(){return ga}visitUint16(){return ma}visitUint32(){return _a}visitUint64(){return wa}visitFloat(){return ra}visitFloat16(){return na}visitFloat32(){return ia}visitFloat64(){return sa}visitUtf8(){return $a}visitBinary(){return Ko}visitFixedSizeBinary(){return ta}visitDate(){return Jo}visitDateDay(){return Go}visitDateMillisecond(){return Zo}visitTimestamp(){return xa}visitTimestampSecond(){return Da}visitTimestampMillisecond(){return ka}visitTimestampMicrosecond(){return Ua}visitTimestampNanosecond(){return Ea}visitTime(){return Ma}visitTimeSecond(){return Fa}visitTimeMillisecond(){return Na}visitTimeMicrosecond(){return Ca}visitTimeNanosecond(){return Ra}visitDecimal(){return Xo}visitList(){return Ta}visitStruct(){return Oa}visitUnion(){return Va}visitDenseUnion(){return Pa}visitSparseUnion(){return za}visitDictionary(){return Qo}visitInterval(){return ua}visitIntervalDayTime(){return la}visitIntervalYearMonth(){return ha}visitFixedSizeList(){return ea}visitMap(){return Aa}};function Lc(t,e){if($t(e))return fe.from({nullValues:[null,void 0],type:t(),values:e});if(jt(e))return fe.from({nullValues:[null,void 0],type:t(),values:e});const{values:r=[],type:n=t(),nullValues:i=[null,void 0]}={...e};return $t(r),fe.from({nullValues:i,...e,type:n})}fe.new=function(t,...e){return new(Bc.getVisitFn(t)())(t,...e)},fe.from=function(t){const{values:e=[],...r}={nullValues:[null,void 0],...t};if($t(e)){const t=[...Nr.throughIterable(r)(e)];return 1===t.length?t[0]:ei.concat(t)}return(async t=>{const n=Nr.throughAsyncIterable(r);for await(const r of n(e))t.push(r);return 1===t.length?t[0]:ei.concat(t)})([])},Ho.prototype.get=function(t){return dc.visit(this,t)},Ho.prototype.set=function(t,e){return Ki.visit(this,t,e)},Ho.prototype.indexOf=function(t,e){return bc.visit(this,t,e)},Ho.prototype.toArray=function(){return Ic.visit(this)},Ho.prototype.getByteWidth=function(){return Ac.visit(this.type)},Ho.prototype[Symbol.iterator]=function(){return _c.visit(this)},Ho.prototype._bindDataAccessors=function(){const t=this.nullBitmap;t&&t.byteLength>0&&(this.get=(e=this.get,function(t){return this.isValid(t)?e.call(this,t):null}),this.set=function(t){return function(e,r){var n,i;n=this.nullBitmap,i=this.offset+e,(!(null==r)?(n[i>>3]|=1<<i%8,1):(n[i>>3]&=~(1<<i%8),0))&&t.call(this,e,r)}}(this.set));var e},Object.keys(be).map(t=>be[t]).filter(t=>"number"==typeof t).filter(t=>t!==be.NONE).forEach(t=>{const e=Bc.visit(t);var r;e.prototype.get=(r=dc.getVisitFn(t),function(t){return r(this,t)}),e.prototype.set=Ya(Ki.getVisitFn(t)),e.prototype.indexOf=Ya(bc.getVisitFn(t)),e.prototype.toArray=ja(Ic.getVisitFn(t)),e.prototype.getByteWidth=function(t){return function(){return t(this.type)}}(Ac.getVisitFn(t)),e.prototype[Symbol.iterator]=ja(_c.getVisitFn(t))});class Oc extends ei{constructor(...t){let e=null;t[0]instanceof bi&&(e=t.shift());let r=ai(xc,t);if(!e&&!(e=r[0]&&r[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");r[0]||(r[0]=new Dc(e)),super(new mr(e.fields),r),this._schema=e,this._chunks=r}static empty(t=new bi([])){return new Oc(t,[])}static from(t){if(!t)return Oc.empty();if("object"==typeof t){let e=$t(t.values)?function(t){const{type:e}=t;if(e instanceof mr)return Oc.fromStruct(Oa.from(t));return null}(t):jt(t.values)?function(t){const{type:e}=t;if(e instanceof mr)return Oa.from(t).then(t=>Oc.fromStruct(t));return null}(t):null;if(null!==e)return e}let e=Uc.from(t);return zt(e)?(async()=>await Oc.from(await e))():e.isSync()&&(e=e.open())?e.schema?new Oc(e.schema,[...e]):Oc.empty():(async t=>{const e=await t,r=e.schema,n=[];if(r){for await(let t of e)n.push(t);return new Oc(r,n)}return Oc.empty()})(e.open())}static async fromAsync(t){return await Oc.from(t)}static fromStruct(t){return Oc.new(t.data.childData,t.type.children)}static new(...t){return new Oc(...(e=(t=>{const[e,r]=yi(t,[[],[]]);return r.map((t,r)=>t instanceof ii?ii.new(t.field.clone(e[r]),t):t instanceof fe?ii.new(e[r],t):ii.new(e[r],[]))})(t),Yo(new bi(e.map(({field:t})=>t)),e)));var e}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(t=this._chunks){return new Oc(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex(e=>e.name===t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r;const n=this._schema.fields,i=this._children||(this._children=[]);if(r=i[t])return r;if(e=n[t]){const r=this._chunks.map(e=>e.getChildAt(t)).filter(t=>null!=t);if(r.length>0)return i[t]=new ii(e,r)}return null}serialize(t="binary",e=!0){return(e?Ro:Vo).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...t){const e=this._schema.fields.reduce((t,e,r)=>t.set(e.name,r),new Map);return this.selectAt(...t.map(t=>e.get(t)).filter(t=>t>-1))}selectAt(...t){const e=this._schema.selectAt(...t);return new Oc(e,this._chunks.map(({length:r,data:{childData:n}})=>new xc(e,r,t.map(t=>n[t]).filter(Boolean))))}assign(t){const e=this._schema.fields,[r,n]=t.schema.fields.reduce((t,r,n)=>{const[i,s]=t,o=e.findIndex(t=>t.name===r.name);return~o?s[o]=n:i.push(n),t},[[],[]]),i=this._schema.assign(t.schema),s=[...e.map((e,r,i,s=n[r])=>void 0===s?this.getColumnAt(r):t.getColumnAt(s)),...r.map(e=>t.getColumnAt(e))].filter(Boolean);return new Oc(...Yo(i,s))}}class xc extends Oa{constructor(...t){let e,r,n=t[0];if(t[1]instanceof Lr)[,e,r]=t;else{const r=n.fields,[,i,s]=t;e=Lr.Struct(new mr(r),0,i,0,null,s)}super(e,r),this._schema=n}static from(t){return $t(t.values),Oc.from(t)}static new(...t){const[e,r]=ci(t),n=r.filter(t=>t instanceof fe);return new xc(...function(t,e,r=e.reduce((t,e)=>Math.max(t,e.length),0)){let n,i,s=-1,o=e.length;const a=[...t.fields],c=[],u=(r+63&-64)>>3;for(;++s<o;)(n=e[s])&&n.length===r?c[s]=n:((i=a[s]).nullable||(a[s]=a[s].clone({nullable:!0})),c[s]=n?n._changeLengthAndBackfillNullBitmap(r):Lr.new(i.type,0,r,r,jo(u)));return[new bi(a),r,c]}(new bi(e),n.map(t=>t.data)))}clone(t,e=this._children){return new xc(this._schema,t,e)}concat(...t){const e=this._schema,r=ei.flatten(this,...t);return new Oc(e,r.map(({data:t})=>new xc(e,t)))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=kc.collect(this))}select(...t){const e=this._schema.fields.reduce((t,e,r)=>t.set(e.name,r),new Map);return this.selectAt(...t.map(t=>e.get(t)).filter(t=>t>-1))}selectAt(...t){const e=this._schema.selectAt(...t),r=t.map(t=>this.data.childData[t]).filter(Boolean);return new xc(e,this.length,r)}}class Dc extends xc{constructor(t){super(t,0,t.fields.map(t=>Lr.new(t.type,0,0,0)))}}class kc extends Ue{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return(new kc).visit(t.data,new mr(t.schema.fields)).dictionaries}visit(t,e){return We.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach((t,r)=>this.visit(t,e.children[r].type)),this)}visitDictionary(t,e){const r=t.dictionary;return r&&r.length>0&&this.dictionaries.set(e.id,r),this}}class Uc extends Dt{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return zt(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ce.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ce.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Uc?t:Yt(t)?function(t){return new Ec(new $c(t))}(t):Ht(t)?async function(t){const{size:e}=await t.stat(),r=new ls(t,e);if(e>=Do&&Lo(await r.readAt(0,Oo+7&-8)))return new Nc(new zc(r));return new Mc(new Vc(r))}(t):zt(t)?(async()=>await Uc.from(await t))():Kt(t)||qt(t)||Jt(t)||jt(t)?async function(t){const e=await t.peek(Oo+7&-8);return e&&e.byteLength>=4?Lo(e)?new Fc(new Pc(await t.read())):new Mc(new Vc(t)):new Mc(new Vc(async function*(){}()))}(new os(t)):function(t){const e=t.peek(Oo+7&-8);return e&&e.byteLength>=4?Lo(e)?new Fc(new Pc(t.read())):new Ec(new Rc(t)):new Ec(new Rc(function*(){}()))}(new ss(t))}static readAll(t){return t instanceof Uc?t.isSync()?Yc(t):Wc(t):Yt(t)||ArrayBuffer.isView(t)||$t(t)||Wt(t)?Yc(t):Wc(t)}}class Ec extends Uc{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async*[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}class Mc extends Uc{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Fc extends Ec{constructor(t){super(t),this._impl=t}}class Nc extends Mc{constructor(t){super(t),this._impl=t}}class Cc{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new xc(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:r,isDelta:n,data:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(n||!a){const t=o.dictionaries.get(r);return a&&n?a.concat(fe.new(this._loadVectors(i,e,[t])[0])):fe.new(this._loadVectors(i,e,[t])[0])}return a}_loadVectors(t,e,r){return new gs(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}class Rc extends Cc{constructor(t,e){super(e),this._reader=Yt(t)?new So(this._handle=t):new vo(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=jc(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Ot}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Ot}next(){if(this.closed)return Ot;let t,{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),n=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,n)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),n=e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(r,n);this.dictionaries.set(r.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Dc(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Vc extends Cc{constructor(t,e){super(e),this._reader=new Io(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(t){return this.closed||(this.autoDestroy=jc(this,t),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(t):Ot}async return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(t):Ot}async next(){if(this.closed)return Ot;let t,{_reader:e}=this;for(;t=await this._readNextMessageAndValidate();)if(t.isSchema())await this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),n=await e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,n)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),n=await e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(r,n);this.dictionaries.set(r.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Dc(this.schema)}):await this.return()}async _readNextMessageAndValidate(t){return await this._reader.readMessage(t)}}class Pc extends Rc{constructor(t,e){super(t instanceof us?t:new us(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Se.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(Se.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,n)}}}_readFooter(){const{_handle:t}=this,e=t.size-xo,r=t.readInt32(e),n=t.readAt(e-r,r);return es.decode(n)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class zc extends Vc{constructor(t,...e){const r="number"!=typeof e[0]?e.shift():void 0,n=e[0]instanceof Map?e.shift():void 0;super(t instanceof ls?t:new ls(t,r),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=await this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&await this._readDictionaryBatch(this._dictionaryIndex++)}return await super.open(t)}async readRecordBatch(t){if(this.closed)return null;this._footer||await this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(Se.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}async _readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(Se.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,n)}}}async _readFooter(){const{_handle:t}=this;t._pending&&await t._pending;const e=t.size-xo,r=await t.readInt32(e),n=await t.readAt(e-r,r);return es.decode(n)}async _readNextMessageAndValidate(t){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&await this._handle.seek(e.offset))return await this._reader.readMessage(t)}return null}}class $c extends Rc{constructor(t,e){super(t,e)}_loadVectors(t,e,r){return new ms(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}function jc(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Yc(t){const e=Uc.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}async function*Wc(t){const e=await Uc.from(t);try{if(!(await e.open({autoDestroy:!1})).closed)do{yield e}while(!(await e.reset().open()).closed)}finally{await e.cancel()}}class Hc{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{readableStrategy:e,writableStrategy:r,queueingStrategy:n="count",...i}=t;this._controller=null,this._builder=Nr.new(i),this._getSize="bytes"!==n?Kc:qc;const{highWaterMark:s=("bytes"===n?16384:1e3)}={...e},{highWaterMark:o=("bytes"===n?16384:1e3)}={...r};this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:t=>{this._maybeFlush(this._builder,this._controller=t)},start:t=>{this._maybeFlush(this._builder,this._controller=t)}},{highWaterMark:s,size:"bytes"!==n?Kc:qc}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:o,size:t=>this._writeValueAndReturnChunkSize(t)})}_writeValueAndReturnChunkSize(t){const e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){null!==e&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,null===e?t.close():t.enqueue(e)}}const Kc=t=>t.length,qc=t=>t.byteLength;class Jc{eq(t){return t instanceof Jc||(t=new Gc(t)),new nu(this,t)}le(t){return t instanceof Jc||(t=new Gc(t)),new iu(this,t)}ge(t){return t instanceof Jc||(t=new Gc(t)),new su(this,t)}lt(t){return new ou(this.ge(t))}gt(t){return new ou(this.le(t))}ne(t){return new ou(this.eq(t))}}class Gc extends Jc{constructor(t){super(),this.v=t}}class Zc extends Jc{constructor(t){super(),this.name=t}bind(t){if(!this.colidx){this.colidx=-1;const e=t.schema.fields;for(let t=-1;++t<e.length;)if(e[t].name===this.name){this.colidx=t;break}if(this.colidx<0)throw new Error(`Failed to bind Col "${this.name}"`)}const e=this.vector=t.getChildAt(this.colidx);return t=>e.get(t)}}class Xc{and(...t){return new eu(this,...t)}or(...t){return new ru(this,...t)}not(){return new ou(this)}}class Qc extends Xc{constructor(t,e){super(),this.left=t,this.right=e}bind(t){return this.left instanceof Gc?this.right instanceof Gc?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof Gc?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)}}class tu extends Xc{constructor(...t){super(),this.children=t}}tu.prototype.children=Object.freeze([]);class eu extends tu{constructor(...t){t=t.reduce((t,e)=>t.concat(e instanceof eu?e.children:e),[]),super(...t)}bind(t){const e=this.children.map(e=>e.bind(t));return(t,r)=>e.every(e=>e(t,r))}}class ru extends tu{constructor(...t){t=t.reduce((t,e)=>t.concat(e instanceof ru?e.children:e),[]),super(...t)}bind(t){const e=this.children.map(e=>e.bind(t));return(t,r)=>e.some(e=>e(t,r))}}class nu extends Qc{_bindLitLit(t,e,r){const n=e.v==r.v;return()=>n}_bindColCol(t,e,r){const n=e.bind(t),i=r.bind(t);return(t,e)=>n(t,e)==i(t,e)}_bindColLit(t,e,r){const n=e.bind(t);if(e.vector instanceof Qo){let t;const n=e.vector;return n.dictionary!==this.lastDictionary?(t=n.reverseLookup(r.v),this.lastDictionary=n.dictionary,this.lastKey=t):t=this.lastKey,-1===t?()=>!1:e=>n.getKey(e)===t}return(t,e)=>n(t,e)==r.v}_bindLitCol(t,e,r){return this._bindColLit(t,r,e)}}class iu extends Qc{_bindLitLit(t,e,r){const n=e.v<=r.v;return()=>n}_bindColCol(t,e,r){const n=e.bind(t),i=r.bind(t);return(t,e)=>n(t,e)<=i(t,e)}_bindColLit(t,e,r){const n=e.bind(t);return(t,e)=>n(t,e)<=r.v}_bindLitCol(t,e,r){const n=r.bind(t);return(t,r)=>e.v<=n(t,r)}}class su extends Qc{_bindLitLit(t,e,r){const n=e.v>=r.v;return()=>n}_bindColCol(t,e,r){const n=e.bind(t),i=r.bind(t);return(t,e)=>n(t,e)>=i(t,e)}_bindColLit(t,e,r){const n=e.bind(t);return(t,e)=>n(t,e)>=r.v}_bindLitCol(t,e,r){const n=r.bind(t);return(t,r)=>e.v>=n(t,r)}}class ou extends Xc{constructor(t){super(),this.child=t}bind(t){const e=this.child.bind(t);return(t,r)=>!e(t,r)}}Oc.prototype.countBy=function(t){return new au(this.chunks).countBy(t)},Oc.prototype.scan=function(t,e){return new au(this.chunks).scan(t,e)},Oc.prototype.scanReverse=function(t,e){return new au(this.chunks).scanReverse(t,e)},Oc.prototype.filter=function(t){return new au(this.chunks).filter(t)};class au extends Oc{filter(t){return new uu(this.chunks,t)}scan(t,e){const r=this.chunks,n=r.length;for(let i=-1;++i<n;){const n=r[i];e&&e(n);for(let e=-1,r=n.length;++e<r;)t(e,n)}}scanReverse(t,e){const r=this.chunks;for(let n=r.length;--n>=0;){const i=r[n];e&&e(i);for(let e=i.length;--e>=0;)t(e,i)}}countBy(t){const e=this.chunks,r=e.length,n="string"==typeof t?new Zc(t):t;n.bind(e[r-1]);const i=n.vector;if(!We.isDictionary(i.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(i.length)/Math.log(256)),o=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(i.dictionary.length);for(let t=-1;++t<r;){const r=e[t];n.bind(r);const i=n.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=i.get(t);null!==e&&o[e]++}}return new cu(i.dictionary,da.from(o))}}class cu extends Oc{constructor(t,e){const r=new bi([new gi("values",t.type),new gi("counts",e.type)]);super(new xc(r,e.length,[t,e]))}toJSON(){const t=this.getColumnAt(0),e=this.getColumnAt(1),r={};for(let n=-1;++n<this.length;)r[t.get(n)]=e.get(n);return r}}class uu extends au{constructor(t,e){super(t),this._predicate=e}scan(t,e){const r=this._chunks,n=r.length;for(let i=-1;++i<n;){const n=r[i],s=this._predicate.bind(n);let o=!1;for(let r=-1,i=n.length;++r<i;)s(r,n)&&(e&&!o&&(e(n),o=!0),t(r,n))}}scanReverse(t,e){const r=this._chunks;for(let n=r.length;--n>=0;){const i=r[n],s=this._predicate.bind(i);let o=!1;for(let r=i.length;--r>=0;)s(r,i)&&(e&&!o&&(e(i),o=!0),t(r,i))}}count(){let t=0;const e=this._chunks,r=e.length;for(let n=-1;++n<r;){const r=e[n],i=this._predicate.bind(r);for(let e=-1,n=r.length;++e<n;)i(e,r)&&++t}return t}*[Symbol.iterator](){const t=this._chunks,e=t.length;for(let r=-1;++r<e;){const e=t[r],n=this._predicate.bind(e);for(let t=-1,r=e.length;++t<r;)n(t,e)&&(yield e.get(t))}}filter(t){return new uu(this._chunks,this._predicate.and(t))}countBy(t){const e=this._chunks,r=e.length,n="string"==typeof t?new Zc(t):t;n.bind(e[r-1]);const i=n.vector;if(!We.isDictionary(i.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(i.length)/Math.log(256)),o=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(i.dictionary.length);for(let t=-1;++t<r;){const r=e[t],i=this._predicate.bind(r);n.bind(r);const s=n.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=s.get(t);null!==e&&i(t,r)&&o[e]++}}return new cu(i.dictionary,da.from(o))}}ce.toDOMStream=function(t,e){if(jt(t))return function(t,e){let r=null;const n=e&&"bytes"===e.type||!1,i=e&&e.highWaterMark||2**24;return new ReadableStream({...e,async start(e){await s(e,r||(r=t[Symbol.asyncIterator]()))},async pull(t){r?await s(t,r):t.close()},async cancel(){r&&r.return&&await r.return(),r=null}},{highWaterMark:n?i:void 0,...e});async function s(t,e){let r,i=null,s=t.desiredSize||null;for(;!(i=await e.next(n?s:null)).done;)if(ArrayBuffer.isView(i.value)&&(r=re(i.value))&&(null!=s&&n&&(s=s-r.byteLength+1),i.value=r),t.enqueue(i.value),null!=s&&--s<=0)return;t.close()}}(t,e);if($t(t))return function(t,e){let r=null;const n=e&&"bytes"===e.type||!1,i=e&&e.highWaterMark||2**24;return new ReadableStream({...e,start(e){s(e,r||(r=t[Symbol.iterator]()))},pull(t){r?s(t,r):t.close()},cancel(){r&&r.return&&r.return(),r=null}},{highWaterMark:n?i:void 0,...e});function s(t,e){let r,i=null,s=t.desiredSize||null;for(;!(i=e.next(n?s:null)).done;)if(ArrayBuffer.isView(i.value)&&(r=re(i.value))&&(null!=s&&n&&(s=s-r.byteLength+1),i.value=r),t.enqueue(i.value),null!=s&&--s<=0)return;t.close()}}(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")},Nr.throughDOM=function(t){return new Hc(t)},Uc.throughDOM=function(t,e){const r=new is;let n=null;const i=new ReadableStream({async cancel(){await r.close()},async start(t){await s(t,n||(n=await async function(){return await(await Uc.from(r)).open(e)}()))},async pull(t){n?await s(t,n):t.close()}});return{writable:new WritableStream(r,{highWaterMark:16384,...t}),readable:i};async function s(t,e){let r=t.desiredSize,n=null;for(;!(n=await e.next()).done;)if(t.enqueue(n.value),null!=r&&--r<=0)return;t.close()}},Co.throughDOM=function(t,e){const r=new this(t),n=new os(r),i=new ReadableStream({type:"bytes",async cancel(){await n.cancel()},async pull(t){await s(t)},async start(t){await s(t)}},{highWaterMark:16384,...e});return{writable:new WritableStream(r,t),readable:i};async function s(t){let e=null,r=t.desiredSize;for(;e=await n.read(r||null);)if(t.enqueue(e),null!=r&&(r-=e.byteLength)<=0)return;t.close()}};
/**
     * @license
     * Copyright 2018-2019 Streamlit Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *    http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class lu{dataTable;indexTable;columnsTable;styler;constructor(t,e,r,n){this.dataTable=Oc.from(t),this.indexTable=Oc.from(e),this.columnsTable=Oc.from(r),this.styler=n?{caption:n.get("caption"),displayValuesTable:Oc.from(n.get("displayValues")),styles:n.get("styles"),uuid:n.get("uuid")}:void 0}get rows(){return this.indexTable.length+this.columnsTable.numCols}get columns(){return this.indexTable.numCols+this.columnsTable.length}get headerRows(){return this.rows-this.dataRows}get headerColumns(){return this.columns-this.dataColumns}get dataRows(){return this.dataTable.length}get dataColumns(){return this.dataTable.numCols}get uuid(){return this.styler&&this.styler.uuid}get caption(){return this.styler&&this.styler.caption}get styles(){return this.styler&&this.styler.styles}get table(){return this.dataTable}get index(){return this.indexTable}get columnTable(){return this.columnsTable}getCell=(t,e)=>{const r=t<this.headerRows&&e<this.headerColumns,n=t>=this.headerRows&&e<this.headerColumns,i=t<this.headerRows&&e>=this.headerColumns;if(r){const r=["blank"];return e>0&&r.push("level"+t),{type:"blank",classNames:r.join(" "),content:""}}if(i){const r=e-this.headerColumns;return{type:"columns",classNames:["col_heading","level"+t,"col"+r].join(" "),content:this.getContent(this.columnsTable,r,t)}}if(n){const r=t-this.headerRows,n=["row_heading","level"+e,"row"+r];return{type:"index",id:`T_${this.uuid}level${e}_row${r}`,classNames:n.join(" "),content:this.getContent(this.indexTable,r,e)}}{const r=t-this.headerRows,n=e-this.headerColumns,i=["data","row"+r,"col"+n],s=this.styler?this.getContent(this.styler.displayValuesTable,r,n):this.getContent(this.dataTable,r,n);return{type:"data",id:`T_${this.uuid}row${r}_col${n}`,classNames:i.join(" "),content:s}}};getContent=(t,e,r)=>{const n=t.getColumnAt(r);if(null===n)return"";return this.getColumnTypeId(t,r)===be.Timestamp?this.nanosToDate(n.get(e)):n.get(e)};getColumnTypeId(t,e){return t.schema.fields[e].type.typeId}nanosToDate(t){return new Date(t/1e6)}}
/**
     * @license
     * Copyright 2018-2020 Streamlit Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *    http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hu;!function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(hu||(hu={}));class du{static API_VERSION=1;static RENDER_EVENT="streamlit:render";static events=new dt;static registeredMessageListener=!1;static lastFrameHeight;static setComponentReady=()=>{du.registeredMessageListener||(window.addEventListener("message",du.onMessageEvent),du.registeredMessageListener=!0),du.sendBackMsg(hu.COMPONENT_READY,{apiVersion:du.API_VERSION})};static setFrameHeight=t=>{void 0===t&&(t=document.body.scrollHeight),t!==du.lastFrameHeight&&(du.lastFrameHeight=t,du.sendBackMsg(hu.SET_FRAME_HEIGHT,{height:t}))};static setComponentValue=t=>{du.sendBackMsg(hu.SET_COMPONENT_VALUE,{value:t})};static onMessageEvent=t=>{if(t.data.type===du.RENDER_EVENT)du.onRenderMessage(t.data)};static onRenderMessage=t=>{let e=t.args;null==e&&(console.error("Got null args in onRenderMessage. This should never happen"),e={});const r=t.dfs&&t.dfs.length>0?du.argsDataframeToObject(t.dfs):{};e={...e,...r};const n={disabled:Boolean(t.disabled),args:e},i=new CustomEvent(du.RENDER_EVENT,{detail:n});du.events.dispatchEvent(i)};static argsDataframeToObject=t=>{const e=t.map(({key:t,value:e})=>[t,du.toArrowTable(e)]);return Object.fromEntries(e)};static toArrowTable=t=>{const{data:e,index:r,columns:n}=t.data;return new lu(e,r,n)};static sendBackMsg=(t,e)=>{window.parent.postMessage({isStreamlitMessage:!0,type:t,...e},"*")}}function fu(t){let e,r,n,i;const s=[yu,pu],o=[];function a(t,e){return t[1]?0:1}return e=a(t),r=o[e]=s[e](t),{c(){r.c(),n=f()},m(t,r){o[e].m(t,r),c(t,n,r),i=!0},p(t,i){let c=e;e=a(t),e===c?o[e].p(t,i):(V(),$(o[c],1,1,()=>{o[c]=null}),P(),r=o[e],r?r.p(t,i):(r=o[e]=s[e](t),r.c()),z(r,1),r.m(n.parentNode,n))},i(t){i||(z(r),i=!0)},o(t){$(r),i=!1},d(t){o[e].d(t),t&&u(n)}}}function pu(t){let e,r,n;var i=t[0];function s(t){return{props:{args:t[3],disabled:t[5],width:t[4]}}}return i&&(e=w(i,s(t))),{c(){e&&W(e.$$.fragment),r=f()},m(t,i){e&&H(e,t,i),c(t,r,i),n=!0},p(t,n){const o={};if(8&n&&(o.args=t[3]),32&n&&(o.disabled=t[5]),16&n&&(o.width=t[4]),1&n&&i!==(i=t[0])){if(e){V();const t=e;$(t.$$.fragment,1,0,()=>{K(t,1)}),P()}i?(e=w(i,s(t)),W(e.$$.fragment),z(e.$$.fragment,1),H(e,r.parentNode,r)):e=null}else i&&e.$set(o)},i(t){n||(e&&z(e.$$.fragment,t),n=!0)},o(t){e&&$(e.$$.fragment,t),n=!1},d(t){t&&u(r),e&&K(e,t)}}}function yu(t){let r,n,i;const s=[t[3],{disabled:t[5]},{width:t[4]}];var o=t[0];function a(t){let r={};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return{props:r}}return o&&(r=w(o,a())),{c(){r&&W(r.$$.fragment),n=f()},m(t,e){r&&H(r,t,e),c(t,n,e),i=!0},p(t,e){const i=56&e?function(t,e){const r={},n={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const t in o)t in a||(n[t]=1);for(const t in a)i[t]||(r[t]=a[t],i[t]=1);t[s]=a}else for(const t in o)i[t]=1}for(const t in n)t in r||(r[t]=void 0);return r}(s,[8&e&&(c=t[3],"object"==typeof c&&null!==c?c:{}),32&e&&{disabled:t[5]},16&e&&{width:t[4]}]):{};var c;if(1&e&&o!==(o=t[0])){if(r){V();const t=r;$(t.$$.fragment,1,0,()=>{K(t,1)}),P()}o?(r=w(o,a()),W(r.$$.fragment),z(r.$$.fragment,1),H(r,n.parentNode,n)):r=null}else o&&r.$set(i)},i(t){i||(r&&z(r.$$.fragment,t),i=!0)},o(t){r&&$(r.$$.fragment,t),i=!1},d(t){t&&u(n),r&&K(r,t)}}}function bu(t){let e,r,n,i;U(t[6]);let s=t[2]&&fu(t);return{c(){s&&s.c(),e=f()},m(o,a){s&&s.m(o,a),c(o,e,a),r=!0,n||(i=p(window,"resize",t[6]),n=!0)},p(t,[r]){t[2]?s?(s.p(t,r),4&r&&z(s,1)):(s=fu(t),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(V(),$(s,1,1,()=>{s=null}),P())},i(t){r||(z(s),r=!0)},o(t){$(s),r=!1},d(t){s&&s.d(t),t&&u(e),n=!1,i()}}}function gu(t,e,r){let n,i,s,o,{component:a}=e,{spreadArgs:c=!0}=e;const u=t=>{r(2,n=t.detail),r(3,i=n.args),r(5,o=n.disabled)};var l;return S(()=>{du.events.addEventListener(du.RENDER_EVENT,u),du.setComponentReady()}),l=()=>{du.events.removeEventListener(du.RENDER_EVENT,u)},I().$$.on_destroy.push(l),t.$$set=t=>{"component"in t&&r(0,a=t.component),"spreadArgs"in t&&r(1,c=t.spreadArgs)},[a,c,n,i,s,o,function(){r(4,s=window.innerWidth)}]}function mu(e){let r,n,i,s,o,h,f;return{c(){r=l("div"),n=l("p"),n.textContent=`${e[5].labelLogin}`,i=d(),s=l("button"),o=l("span"),o.textContent=`${e[5].labelButton}`,y(s,"type","button"),y(s,"class","btn btn-primary")},m(t,u){c(t,r,u),a(r,n),a(r,i),a(r,s),a(s,o),h||(f=p(s,"click",e[3]),h=!0)},p:t,d(t){t&&u(r),h=!1,f()}}}function _u(e){let r;return{c(){r=l("div"),r.innerHTML='<span class="sr-only">Loading...</span>',y(r,"class","spinner-border"),y(r,"role","status")},m(t,e){c(t,r,e)},p:t,d(t){t&&u(r)}}}function wu(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Su,then:Iu,catch:vu,error:11};return j(r=t[4](t[1]),n),{c(){e=f(),n.block.c()},m(t,r){c(t,e,r),n.block.m(t,n.anchor=r),n.mount=()=>e.parentNode,n.anchor=e},p(e,i){t=e,n.ctx=t,2&i&&r!==(r=t[4](t[1]))&&j(r,n)||Y(n,t,i)},d(t){t&&u(e),n.block.d(t),n.token=null,n=null}}}function vu(t){let e,r,n=t[11].message+"";return{c(){e=l("div"),r=h(n),y(e,"class","alert alert-danger mt-3 mb-0")},m(t,n){c(t,e,n),a(e,r)},p(t,e){2&e&&n!==(n=t[11].message+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(r,n)},d(t){t&&u(e)}}}function Iu(e){return{c:t,m:t,p:t,d:t}}function Su(e){return{c:t,m:t,p:t,d:t}}function Tu(e){let r,n,i,s;function o(t,e){return t[0]?_u:mu}let h=o(e),f=h(e),y=e[2]&&wu(e);return{c(){r=l("div"),f.c(),n=d(),y&&y.c(),b(r,"text-align","center")},m(t,o){c(t,r,o),f.m(r,null),a(r,n),y&&y.m(r,null),i||(s=p(r,"loggedin",e[7]),i=!0)},p(t,[e]){h===(h=o(t))&&f?f.p(t,e):(f.d(1),f=h(t),f&&(f.c(),f.m(r,n))),t[2]?y?y.p(t,e):(y=wu(t),y.c(),y.m(r,null)):y&&(y.d(1),y=null)},i:t,o:t,d(t){t&&u(r),f.d(),y&&y.d(),i=!1,s()}}}function Au(t,e,r){let n,{loginUrl:i}=e;const s=t=>{const e=window.screenX+(window.innerWidth-400)/2,n=window.screenY+(window.innerHeight-600)/2;r(1,u=window.open(t,"keycloak:authorize:popup",`left=${e},top=${n},width=400,height=600,resizable,scrollbars=yes,status=1`))},o=(a="localization",I().$$.context.get(a));var a;const c=T();let u,l=!1;return t.$$set=t=>{"loginUrl"in t&&r(6,i=t.loginUrl)},[n,u,l,()=>{!u||u.closed?(s(i),r(2,l=!0),r(0,n=!0)):u.focus()},async t=>{if(!t)throw new Error(o.errorNoPopup);await(async t=>new Promise((e,r)=>{const n=setInterval(()=>{t.closed&&(window.removeEventListener("message",i,!1),clearInterval(n),r(new Error(o.errorPopupClosed)))},1e3),i=function(r){r.origin===window.location.origin&&Object.keys(r.data).includes("code")&&(window.removeEventListener("message",i,!1),clearInterval(n),t.close(),e(r.data))};window.addEventListener("message",i)}))(t),c("loggedin")},o,i,function(e){A.call(this,t,e)}]}class Bu extends G{constructor(t){super(),J(this,t,Au,Tu,o,{loginUrl:6})}}function Lu(t){if(!(this instanceof Lu))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");if("string"!=typeof t&&!xu(t))throw new Error("The 'Keycloak' constructor must be provided with a configuration object, or a URL to a JSON configuration file.");if(xu(t)){const e="oidcProvider"in t?["clientId"]:["url","realm","clientId"];for(const r of e)if(!t[r])throw new Error(`The configuration object is missing the required '${r}' property.`)}var e,r,n=this,i=[],s={enable:!0,callbackList:[],interval:5};n.didInitialize=!1;var o=!0,a=B(console.info),c=B(console.warn);function u(t){return function(t,e){for(var r=function(t){if("undefined"==typeof crypto||void 0===crypto.getRandomValues)throw new Error("Web Crypto API is not available.");return crypto.getRandomValues(new Uint8Array(t))}(t),n=new Array(t),i=0;i<t;i++)n[i]=e.charCodeAt(r[i]%e.length);return String.fromCharCode.apply(null,n)}(t,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}async function l(t,e){if("S256"!==t)throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${t}'.`);return function(t){const e=String.fromCodePoint(...t);return btoa(e)}(new Uint8Array(await async function(t){const e=(new TextEncoder).encode(t);if("undefined"==typeof crypto||void 0===crypto.subtle)throw new Error("Web Crypto API is not available.");return await crypto.subtle.digest("SHA-256",e)}(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function h(){return void 0!==n.authServerUrl?"/"==n.authServerUrl.charAt(n.authServerUrl.length-1)?n.authServerUrl+"realms/"+encodeURIComponent(n.realm):n.authServerUrl+"/realms/"+encodeURIComponent(n.realm):void 0}function d(t,e){var r=t.code,i=t.error,s=t.prompt,c=(new Date).getTime();if(t.kc_action_status&&n.onActionUpdate&&n.onActionUpdate(t.kc_action_status,t.kc_action),i)if("none"!=s)if(t.error_description&&"authentication_expired"===t.error_description)n.login(t.loginOptions);else{var u={error:i,error_description:t.error_description};n.onAuthError&&n.onAuthError(u),e&&e.setError(u)}else e&&e.setSuccess();else if("standard"!=n.flow&&(t.access_token||t.id_token)&&f(t.access_token,null,t.id_token,!0),"implicit"!=n.flow&&r){var l="code="+r+"&grant_type=authorization_code",h=n.endpoints.token(),d=new XMLHttpRequest;d.open("POST",h,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l+="&client_id="+encodeURIComponent(n.clientId),l+="&redirect_uri="+t.redirectUri,t.pkceCodeVerifier&&(l+="&code_verifier="+t.pkceCodeVerifier),d.withCredentials=!0,d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status){var t=JSON.parse(d.responseText);f(t.access_token,t.refresh_token,t.id_token,"standard"===n.flow),w()}else n.onAuthError&&n.onAuthError(),e&&e.setError()},d.send(l)}function f(r,i,s,u){p(r,i,s,c=(c+(new Date).getTime())/2),o&&n.idTokenParsed&&n.idTokenParsed.nonce!=t.storedNonce?(a("[KEYCLOAK] Invalid nonce, clearing token"),n.clearToken(),e&&e.setError()):u&&(n.onAuthSuccess&&n.onAuthSuccess(),e&&e.setSuccess())}}function f(t){return 0==t.status&&t.responseText&&t.responseURL.startsWith("file:")}function p(t,e,r,i){if(n.tokenTimeoutHandle&&(clearTimeout(n.tokenTimeoutHandle),n.tokenTimeoutHandle=null),e?(n.refreshToken=e,n.refreshTokenParsed=Ou(e)):(delete n.refreshToken,delete n.refreshTokenParsed),r?(n.idToken=r,n.idTokenParsed=Ou(r)):(delete n.idToken,delete n.idTokenParsed),t){if(n.token=t,n.tokenParsed=Ou(t),n.sessionId=n.tokenParsed.sid,n.authenticated=!0,n.subject=n.tokenParsed.sub,n.realmAccess=n.tokenParsed.realm_access,n.resourceAccess=n.tokenParsed.resource_access,i&&(n.timeSkew=Math.floor(i/1e3)-n.tokenParsed.iat),null!=n.timeSkew&&(a("[KEYCLOAK] Estimated time difference between browser and server is "+n.timeSkew+" seconds"),n.onTokenExpired)){var s=1e3*(n.tokenParsed.exp-(new Date).getTime()/1e3+n.timeSkew);a("[KEYCLOAK] Token expires in "+Math.round(s/1e3)+" s"),s<=0?n.onTokenExpired():n.tokenTimeoutHandle=setTimeout(n.onTokenExpired,s)}}else delete n.token,delete n.tokenParsed,delete n.subject,delete n.realmAccess,delete n.resourceAccess,n.authenticated=!1}function y(){if("undefined"==typeof crypto||void 0===crypto.randomUUID)throw new Error("Web Crypto API is not available.");return crypto.randomUUID()}function b(t){var e=function(t){var e;switch(n.flow){case"standard":e=["code","state","session_state","kc_action_status","kc_action","iss"];break;case"implicit":e=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","kc_action","iss"];break;case"hybrid":e=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","kc_action","iss"]}e.push("error"),e.push("error_description"),e.push("error_uri");var r,i,s=t.indexOf("?"),o=t.indexOf("#");"query"===n.responseMode&&-1!==s?(r=t.substring(0,s),""!==(i=g(t.substring(s+1,-1!==o?o:t.length),e)).paramsString&&(r+="?"+i.paramsString),-1!==o&&(r+=t.substring(o))):"fragment"===n.responseMode&&-1!==o&&(r=t.substring(0,o),""!==(i=g(t.substring(o+1),e)).paramsString&&(r+="#"+i.paramsString));if(i&&i.oauthParams)if("standard"===n.flow||"hybrid"===n.flow){if((i.oauthParams.code||i.oauthParams.error)&&i.oauthParams.state)return i.oauthParams.newUrl=r,i.oauthParams}else if("implicit"===n.flow&&(i.oauthParams.access_token||i.oauthParams.error)&&i.oauthParams.state)return i.oauthParams.newUrl=r,i.oauthParams}(t);if(e){var i=r.get(e.state);return i&&(e.valid=!0,e.redirectUri=i.redirectUri,e.storedNonce=i.nonce,e.prompt=i.prompt,e.pkceCodeVerifier=i.pkceCodeVerifier,e.loginOptions=i.loginOptions),e}}function g(t,e){for(var r=t.split("&"),n={paramsString:"",oauthParams:{}},i=0;i<r.length;i++){var s=r[i].indexOf("="),o=r[i].slice(0,s);-1!==e.indexOf(o)?n.oauthParams[o]=r[i].slice(s+1):(""!==n.paramsString&&(n.paramsString+="&"),n.paramsString+=r[i])}return n}function m(){var t={setSuccess:function(e){t.resolve(e)},setError:function(e){t.reject(e)}};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}function _(){var t=m();if(!s.enable)return t.setSuccess(),t.promise;if(s.iframe)return t.setSuccess(),t.promise;var e=document.createElement("iframe");s.iframe=e,e.onload=function(){var e=n.endpoints.authorize();"/"===e.charAt(0)?s.iframeOrigin=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""):s.iframeOrigin=e.substring(0,e.indexOf("/",8)),t.setSuccess()};var r=n.endpoints.checkSessionIframe();e.setAttribute("src",r),e.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),e.setAttribute("title","keycloak-session-iframe"),e.style.display="none",document.body.appendChild(e);return window.addEventListener("message",function(t){if(t.origin===s.iframeOrigin&&s.iframe.contentWindow===t.source&&("unchanged"==t.data||"changed"==t.data||"error"==t.data)){"unchanged"!=t.data&&n.clearToken();for(var e=s.callbackList.splice(0,s.callbackList.length),r=e.length-1;r>=0;--r){var i=e[r];"error"==t.data?i.setError():i.setSuccess("unchanged"==t.data)}}},!1),t.promise}function w(){s.enable&&n.token&&setTimeout(function(){v().then(function(t){t&&w()})},1e3*s.interval)}function v(){var t=m();if(s.iframe&&s.iframeOrigin){var e=n.clientId+" "+(n.sessionId?n.sessionId:"");s.callbackList.push(t);var r=s.iframeOrigin;1==s.callbackList.length&&s.iframe.contentWindow.postMessage(e,r)}else t.setSuccess();return t.promise}function I(t){if(!t||"default"==t)return{login:async function(t){return window.location.assign(await n.createLoginUrl(t)),m().promise},logout:async function(t){if("GET"===(t?.logoutMethod??n.logoutMethod))return void window.location.replace(n.createLogoutUrl(t));const r=document.createElement("form");r.setAttribute("method","POST"),r.setAttribute("action",n.createLogoutUrl(t)),r.style.display="none";const i={id_token_hint:n.idToken,client_id:n.clientId,post_logout_redirect_uri:e.redirectUri(t,!1)};for(const[t,e]of Object.entries(i)){const n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",t),n.setAttribute("value",e),r.appendChild(n)}document.body.appendChild(r),r.submit()},register:async function(t){return window.location.assign(await n.createRegisterUrl(t)),m().promise},accountManagement:function(){var t=n.createAccountUrl();if(void 0===t)throw"Not supported by the OIDC server";return window.location.href=t,m().promise},redirectUri:function(t,e){return t&&t.redirectUri?t.redirectUri:n.redirectUri?n.redirectUri:location.href}};if("cordova"==t){s.enable=!1;var r=function(t,e,r){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(t,e,r):window.open(t,e,r)},i=function(t){var e=function(t){return t&&t.cordovaOptions?Object.keys(t.cordovaOptions).reduce(function(e,r){return e[r]=t.cordovaOptions[r],e},{}):{}}(t);return e.location="no",t&&"none"==t.prompt&&(e.hidden="yes"),function(t){return Object.keys(t).reduce(function(e,r){return e.push(r+"="+t[r]),e},[]).join(",")}(e)},o=function(){return n.redirectUri||"http://localhost"};return{login:async function(t){var e=m(),s=i(t),a=await n.createLoginUrl(t),c=r(a,"_blank",s),u=!1,l=!1,h=function(){l=!0,c.close()};return c.addEventListener("loadstart",function(t){0==t.url.indexOf(o())&&(d(b(t.url),e),h(),u=!0)}),c.addEventListener("loaderror",function(t){u||(0==t.url.indexOf(o())?(d(b(t.url),e),h(),u=!0):(e.setError(),h()))}),c.addEventListener("exit",function(t){l||e.setError({reason:"closed_by_user"})}),e.promise},logout:function(t){var e,i=m(),s=n.createLogoutUrl(t),a=r(s,"_blank","location=no,hidden=yes,clearcache=yes");return a.addEventListener("loadstart",function(t){0==t.url.indexOf(o())&&a.close()}),a.addEventListener("loaderror",function(t){0==t.url.indexOf(o())||(e=!0),a.close()}),a.addEventListener("exit",function(t){e?i.setError():(n.clearToken(),i.setSuccess())}),i.promise},register:async function(t){var e=m(),s=await n.createRegisterUrl(),a=i(t),c=r(s,"_blank",a);return c.addEventListener("loadstart",function(t){0==t.url.indexOf(o())&&(c.close(),d(b(t.url),e))}),e.promise},accountManagement:function(){var t=n.createAccountUrl();if(void 0===t)throw"Not supported by the OIDC server";var e=r(t,"_blank","location=no");e.addEventListener("loadstart",function(t){0==t.url.indexOf(o())&&e.close()})},redirectUri:function(t){return o()}}}if("cordova-native"==t)return s.enable=!1,{login:async function(t){var e=m(),r=await n.createLoginUrl(t);return universalLinks.subscribe("keycloak",function(t){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),d(b(t.url),e)}),window.cordova.plugins.browsertab.openUrl(r),e.promise},logout:function(t){var e=m(),r=n.createLogoutUrl(t);return universalLinks.subscribe("keycloak",function(t){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),n.clearToken(),e.setSuccess()}),window.cordova.plugins.browsertab.openUrl(r),e.promise},register:async function(t){var e=m(),r=await n.createRegisterUrl(t);return universalLinks.subscribe("keycloak",function(t){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),d(b(t.url),e)}),window.cordova.plugins.browsertab.openUrl(r),e.promise},accountManagement:function(){var t=n.createAccountUrl();if(void 0===t)throw"Not supported by the OIDC server";window.cordova.plugins.browsertab.openUrl(t)},redirectUri:function(t){return t&&t.redirectUri?t.redirectUri:n.redirectUri?n.redirectUri:"http://localhost"}};throw"invalid adapter type: "+t}globalThis.isSecureContext||c("[KEYCLOAK] Keycloak JS must be used in a 'secure context' to function properly as it relies on browser APIs that are otherwise not available.\nContinuing to run your application insecurely will lead to unexpected behavior and breakage.\n\nFor more information see: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts"),n.init=function(i={}){if(n.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");n.didInitialize=!0,n.authenticated=!1,r=function(){try{return new T}catch(t){}return new A}();if(e=["default","cordova","cordova-native"].indexOf(i.adapter)>-1?I(i.adapter):"object"==typeof i.adapter?i.adapter:window.Cordova||window.cordova?I("cordova"):I(),void 0!==i.useNonce&&(o=i.useNonce),void 0!==i.checkLoginIframe&&(s.enable=i.checkLoginIframe),i.checkLoginIframeInterval&&(s.interval=i.checkLoginIframeInterval),"login-required"===i.onLoad&&(n.loginRequired=!0),i.responseMode){if("query"!==i.responseMode&&"fragment"!==i.responseMode)throw"Invalid value for responseMode";n.responseMode=i.responseMode}if(i.flow){switch(i.flow){case"standard":n.responseType="code";break;case"implicit":n.responseType="id_token token";break;case"hybrid":n.responseType="code id_token token";break;default:throw"Invalid value for flow"}n.flow=i.flow}if(null!=i.timeSkew&&(n.timeSkew=i.timeSkew),i.redirectUri&&(n.redirectUri=i.redirectUri),i.silentCheckSsoRedirectUri&&(n.silentCheckSsoRedirectUri=i.silentCheckSsoRedirectUri),"boolean"==typeof i.silentCheckSsoFallback?n.silentCheckSsoFallback=i.silentCheckSsoFallback:n.silentCheckSsoFallback=!0,void 0!==i.pkceMethod){if("S256"!==i.pkceMethod&&!1!==i.pkceMethod)throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${i.pkceMethod}.`);n.pkceMethod=i.pkceMethod}else n.pkceMethod="S256";"boolean"==typeof i.enableLogging?n.enableLogging=i.enableLogging:n.enableLogging=!1,"POST"===i.logoutMethod?n.logoutMethod="POST":n.logoutMethod="GET","string"==typeof i.scope&&(n.scope=i.scope),"string"==typeof i.acrValues&&(n.acrValues=i.acrValues),"number"==typeof i.messageReceiveTimeout&&i.messageReceiveTimeout>0?n.messageReceiveTimeout=i.messageReceiveTimeout:n.messageReceiveTimeout=1e4,n.responseMode||(n.responseMode="fragment"),n.responseType||(n.responseType="code",n.flow="standard");var a=m(),u=m();u.promise.then(function(){n.onReady&&n.onReady(n.authenticated),a.setSuccess(n.authenticated)}).catch(function(t){a.setError(t)});var l=function(){var e,r=m();"string"==typeof t&&(e=t);function i(t){n.endpoints=t?{authorize:function(){return t.authorization_endpoint},token:function(){return t.token_endpoint},logout:function(){if(!t.end_session_endpoint)throw"Not supported by the OIDC server";return t.end_session_endpoint},checkSessionIframe:function(){if(!t.check_session_iframe)throw"Not supported by the OIDC server";return t.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!t.userinfo_endpoint)throw"Not supported by the OIDC server";return t.userinfo_endpoint}}:{authorize:function(){return h()+"/protocol/openid-connect/auth"},token:function(){return h()+"/protocol/openid-connect/token"},logout:function(){return h()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){return h()+"/protocol/openid-connect/login-status-iframe.html"},thirdPartyCookiesIframe:function(){return h()+"/protocol/openid-connect/3p-cookies/step1.html"},register:function(){return h()+"/protocol/openid-connect/registrations"},userinfo:function(){return h()+"/protocol/openid-connect/userinfo"}}}if(e){(o=new XMLHttpRequest).open("GET",e,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status||f(o)){var t=JSON.parse(o.responseText);n.authServerUrl=t["auth-server-url"],n.realm=t.realm,n.clientId=t.resource,i(null),r.setSuccess()}else r.setError()},o.send()}else{n.clientId=t.clientId;var s,o,a=t.oidcProvider;if(a)if("string"==typeof a)s="/"==a.charAt(a.length-1)?a+".well-known/openid-configuration":a+"/.well-known/openid-configuration",(o=new XMLHttpRequest).open("GET",s,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||f(o)?(i(JSON.parse(o.responseText)),r.setSuccess()):r.setError())},o.send();else i(a),r.setSuccess();else n.authServerUrl=t.url,n.realm=t.realm,i(null),r.setSuccess()}return r.promise}();function y(){var t=function(t){t||(r.prompt="none"),i.locale&&(r.locale=i.locale),n.login(r).then(function(){u.setSuccess()}).catch(function(t){u.setError(t)})},e=async function(){var t=document.createElement("iframe"),e=await n.createLoginUrl({prompt:"none",redirectUri:n.silentCheckSsoRedirectUri});t.setAttribute("src",e),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-silent-check-sso"),t.style.display="none",document.body.appendChild(t);var r=function(e){e.origin===window.location.origin&&t.contentWindow===e.source&&(d(b(e.data),u),document.body.removeChild(t),window.removeEventListener("message",r))};window.addEventListener("message",r)},r={};switch(i.onLoad){case"check-sso":s.enable?_().then(function(){v().then(function(r){r?u.setSuccess():n.silentCheckSsoRedirectUri?e():t(!1)}).catch(function(t){u.setError(t)})}):n.silentCheckSsoRedirectUri?e():t(!1);break;case"login-required":t(!0);break;default:throw"Invalid value for onLoad"}}function g(){var t=b(window.location.href);if(t&&window.history.replaceState(window.history.state,null,t.newUrl),t&&t.valid)return _().then(function(){d(t,u)}).catch(function(t){u.setError(t)});i.token&&i.refreshToken?(p(i.token,i.refreshToken,i.idToken),s.enable?_().then(function(){v().then(function(t){t?(n.onAuthSuccess&&n.onAuthSuccess(),u.setSuccess(),w()):u.setSuccess()}).catch(function(t){u.setError(t)})}):n.updateToken(-1).then(function(){n.onAuthSuccess&&n.onAuthSuccess(),u.setSuccess()}).catch(function(t){n.onAuthError&&n.onAuthError(),i.onLoad?y():u.setError(t)})):i.onLoad?y():u.setSuccess()}return l.then(function(){(function(){var t=m();if((s.enable||n.silentCheckSsoRedirectUri)&&"function"==typeof n.endpoints.thirdPartyCookiesIframe){var e=document.createElement("iframe");e.setAttribute("src",n.endpoints.thirdPartyCookiesIframe()),e.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),e.setAttribute("title","keycloak-3p-check-iframe"),e.style.display="none",document.body.appendChild(e);var r=function(i){e.contentWindow===i.source&&("supported"!==i.data&&"unsupported"!==i.data||("unsupported"===i.data&&(c("[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:\n\n - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).\n - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).\n\nFor more information see: https://www.keycloak.org/securing-apps/javascript-adapter#_modern_browsers"),s.enable=!1,n.silentCheckSsoFallback&&(n.silentCheckSsoRedirectUri=!1)),document.body.removeChild(e),window.removeEventListener("message",r),t.setSuccess()))};window.addEventListener("message",r,!1)}else t.setSuccess();return function(t,e,r){var n=null,i=new Promise(function(t,i){n=setTimeout(function(){i({error:r})},e)});return Promise.race([t,i]).finally(function(){clearTimeout(n)})}(t.promise,n.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")})().then(g).catch(function(t){a.setError(t)})}),l.catch(function(t){a.setError(t)}),a.promise},n.login=function(t){return e.login(t)},n.createLoginUrl=async function(t){var i,s=y(),a=y(),c=e.redirectUri(t),h={state:s,nonce:a,redirectUri:encodeURIComponent(c),loginOptions:t};t&&t.prompt&&(h.prompt=t.prompt),i=t&&"register"==t.action?n.endpoints.register():n.endpoints.authorize();var d=t&&t.scope||n.scope;d?-1===d.indexOf("openid")&&(d="openid "+d):d="openid";var f,p,b=i+"?client_id="+encodeURIComponent(n.clientId)+"&redirect_uri="+encodeURIComponent(c)+"&state="+encodeURIComponent(s)+"&response_mode="+encodeURIComponent(n.responseMode)+"&response_type="+encodeURIComponent(n.responseType)+"&scope="+encodeURIComponent(d);if(o&&(b=b+"&nonce="+encodeURIComponent(a)),t&&t.prompt&&(b+="&prompt="+encodeURIComponent(t.prompt)),t&&"number"==typeof t.maxAge&&(b+="&max_age="+encodeURIComponent(t.maxAge)),t&&t.loginHint&&(b+="&login_hint="+encodeURIComponent(t.loginHint)),t&&t.idpHint&&(b+="&kc_idp_hint="+encodeURIComponent(t.idpHint)),t&&t.action&&"register"!=t.action&&(b+="&kc_action="+encodeURIComponent(t.action)),t&&t.locale&&(b+="&ui_locales="+encodeURIComponent(t.locale)),t&&t.acr){var g=(f=t.acr,p={id_token:{acr:f}},JSON.stringify(p));b+="&claims="+encodeURIComponent(g)}if((t&&t.acrValues||n.acrValues)&&(b+="&acr_values="+encodeURIComponent(t.acrValues||n.acrValues)),n.pkceMethod)try{const t=u(96),e=await l(n.pkceMethod,t);h.pkceCodeVerifier=t,b+="&code_challenge="+e,b+="&code_challenge_method="+n.pkceMethod}catch(t){throw new Error("Failed to generate PKCE challenge.",{cause:t})}return r.add(h),b},n.logout=function(t){return e.logout(t)},n.createLogoutUrl=function(t){if("POST"===(t?.logoutMethod??n.logoutMethod))return n.endpoints.logout();var r=n.endpoints.logout()+"?client_id="+encodeURIComponent(n.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(e.redirectUri(t,!1));return n.idToken&&(r+="&id_token_hint="+encodeURIComponent(n.idToken)),r},n.register=function(t){return e.register(t)},n.createRegisterUrl=async function(t){return t||(t={}),t.action="register",await n.createLoginUrl(t)},n.createAccountUrl=function(t){var r=h(),i=void 0;return void 0!==r&&(i=r+"/account?referrer="+encodeURIComponent(n.clientId)+"&referrer_uri="+encodeURIComponent(e.redirectUri(t))),i},n.accountManagement=function(){return e.accountManagement()},n.hasRealmRole=function(t){var e=n.realmAccess;return!!e&&e.roles.indexOf(t)>=0},n.hasResourceRole=function(t,e){if(!n.resourceAccess)return!1;var r=n.resourceAccess[e||n.clientId];return!!r&&r.roles.indexOf(t)>=0},n.loadUserProfile=function(){var t=h()+"/account",e=new XMLHttpRequest;e.open("GET",t,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Authorization","bearer "+n.token);var r=m();return e.onreadystatechange=function(){4==e.readyState&&(200==e.status?(n.profile=JSON.parse(e.responseText),r.setSuccess(n.profile)):r.setError())},e.send(),r.promise},n.loadUserInfo=function(){var t=n.endpoints.userinfo(),e=new XMLHttpRequest;e.open("GET",t,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Authorization","bearer "+n.token);var r=m();return e.onreadystatechange=function(){4==e.readyState&&(200==e.status?(n.userInfo=JSON.parse(e.responseText),r.setSuccess(n.userInfo)):r.setError())},e.send(),r.promise},n.isTokenExpired=function(t){if(!n.tokenParsed||!n.refreshToken&&"implicit"!=n.flow)throw"Not authenticated";if(null==n.timeSkew)return a("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var e=n.tokenParsed.exp-Math.ceil((new Date).getTime()/1e3)+n.timeSkew;if(t){if(isNaN(t))throw"Invalid minValidity";e-=t}return e<0},n.updateToken=function(t){var e=m();if(!n.refreshToken)return e.setError(),e.promise;t=t||5;var r=function(){var r=!1;if(-1==t?(r=!0,a("[KEYCLOAK] Refreshing token: forced refresh")):n.tokenParsed&&!n.isTokenExpired(t)||(r=!0,a("[KEYCLOAK] Refreshing token: token expired")),r){var s="grant_type=refresh_token&refresh_token="+n.refreshToken,o=n.endpoints.token();if(i.push(e),1==i.length){var u=new XMLHttpRequest;u.open("POST",o,!0),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.withCredentials=!0,s+="&client_id="+encodeURIComponent(n.clientId);var l=(new Date).getTime();u.onreadystatechange=function(){if(4==u.readyState)if(200==u.status){a("[KEYCLOAK] Token refreshed"),l=(l+(new Date).getTime())/2;var t=JSON.parse(u.responseText);p(t.access_token,t.refresh_token,t.id_token,l),n.onAuthRefreshSuccess&&n.onAuthRefreshSuccess();for(var e=i.pop();null!=e;e=i.pop())e.setSuccess(!0)}else{c("[KEYCLOAK] Failed to refresh token"),400==u.status&&n.clearToken(),n.onAuthRefreshError&&n.onAuthRefreshError();for(e=i.pop();null!=e;e=i.pop())e.setError("Failed to refresh token: An unexpected HTTP error occurred while attempting to refresh the token.")}},u.send(s)}}else e.setSuccess(!1)};s.enable?v().then(function(){r()}).catch(function(t){e.setError(t)}):r();return e.promise},n.clearToken=function(){n.token&&(p(null,null,null),n.onAuthLogout&&n.onAuthLogout(),n.loginRequired&&n.login())};const S="kc-callback-";var T=function(){if(!(this instanceof T))return new T;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");function t(){const t=Date.now();for(const[n,i]of e()){const e=r(i);(null===e||e<t)&&localStorage.removeItem(n)}}function e(){return Object.entries(localStorage).filter(([t])=>t.startsWith(S))}function r(t){let e;try{e=JSON.parse(t)}catch(t){return null}return xu(e)&&"expires"in e&&"number"==typeof e.expires?e.expires:null}this.get=function(e){if(e){var r=S+e,n=localStorage.getItem(r);return n&&(localStorage.removeItem(r),n=JSON.parse(n)),t(),n}},this.add=function(r){t();const n=S+r.state,i=JSON.stringify({...r,expires:Date.now()+36e5});try{localStorage.setItem(n,i)}catch(t){!function(){for(const[t]of e())localStorage.removeItem(t)}(),localStorage.setItem(n,i)}}},A=function(){if(!(this instanceof A))return new A;var t=this;t.get=function(t){if(t){var i=r(S+t);return n(S+t,"",e(-100)),i?JSON.parse(i):void 0}},t.add=function(t){n(S+t.state,JSON.stringify(t),e(60))},t.removeItem=function(t){n(t,"",e(-100))};var e=function(t){var e=new Date;return e.setTime(e.getTime()+60*t*1e3),e},r=function(t){for(var e=t+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""},n=function(t,e,r){var n=t+"="+e+"; expires="+r.toUTCString()+"; ";document.cookie=n}};function B(t){return function(){n.enableLogging&&t.apply(console,Array.prototype.slice.call(arguments))}}}function Ou(t){const[e,r]=t.split(".");if("string"!=typeof r)throw new Error("Unable to decode token, payload not found.");let n;try{n=function(t){let e=t.replaceAll("-","+").replaceAll("_","/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Input is not of the correct length.")}try{return function(t){return decodeURIComponent(atob(t).replace(/(.)/g,(t,e)=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(e)}catch(t){return atob(e)}}(r)}catch(t){throw new Error("Unable to decode token, payload is not a valid Base64URL value.",{cause:t})}try{return JSON.parse(n)}catch(t){throw new Error("Unable to decode token, payload is not a valid JSON value.",{cause:t})}}function xu(t){return"object"==typeof t&&null!==t}const Du={labelButton:"Sign in",labelLogin:"Please sign in to your account.",errorNoPopup:"Unable to open the authentication popup. Allow popups and refresh the page to proceed.",errorPopupClosed:"Authentication popup was closed manually.",errorFatal:"Unable to connect to Keycloak using the current configuration."};function ku(e){let r,n,i,s,o,f,p,b=e[18].error+"";return{c(){r=l("div"),n=l("span"),n.textContent=`${e[5].errorFatal}`,i=d(),s=l("br"),o=d(),f=l("span"),p=h(b),y(r,"class","alert alert-danger")},m(t,e){c(t,r,e),a(r,n),a(r,i),a(r,s),a(r,o),a(r,f),a(f,p)},p:t,i:t,o:t,d(t){t&&u(r)}}}function Uu(t){let e,r,n,i;const s=[Mu,Eu],o=[];return e=function(t){return t[17]?1:0}(t),r=o[e]=s[e](t),{c(){r.c(),n=f()},m(t,r){o[e].m(t,r),c(t,n,r),i=!0},p(t,e){r.p(t,e)},i(t){i||(z(r),i=!0)},o(t){$(r),i=!1},d(t){o[e].d(t),t&&u(n)}}}function Eu(e){let r;return{c(){r=l("div"),r.innerHTML="<span>You are being redirected...</span>",y(r,"class","alert alert-success"),b(r,"text-align","center")},m(t,e){c(t,r,e)},p:t,i:t,o:t,d(t){t&&u(r)}}}function Mu(e){let r,n;return r=new Bu({props:{loginUrl:e[3]()}}),r.$on("loggedin",e[12]),{c(){W(r.$$.fragment)},m(t,e){H(r,t,e),n=!0},p:t,i(t){n||(z(r.$$.fragment,t),n=!0)},o(t){$(r.$$.fragment,t),n=!1},d(t){K(r,t)}}}function Fu(e){let r;return{c(){r=l("div"),r.innerHTML='<span class="sr-only">Loading...</span>',y(r,"class","spinner-border"),y(r,"role","status")},m(t,e){c(t,r,e)},p:t,i:t,o:t,d(t){t&&u(r)}}}function Nu(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:Fu,then:Uu,catch:ku,value:17,error:18,blocks:[,,,]};return j(t[4](),i),{c(){e=l("div"),i.block.c(),b(e,"text-align","center"),U(()=>t[13].call(e))},m(s,o){c(s,e,o),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,r=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const r=l("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const n=_();let i;return n?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=p(window,"message",t=>{t.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{i=p(r.contentWindow,"resize",e),e()}),a(t,r),()=>{(n||i&&r.contentWindow)&&i(),u(r)}}(e,t[13].bind(e)),n=!0},p(e,[r]){Y(i,t=e,r)},i(t){n||(z(i.block),n=!0)},o(t){for(let t=0;t<3;t+=1){$(i.blocks[t])}n=!1},d(t){t&&u(e),i.block.d(),i.token=null,i=null,r()}}}function Cu(t,e,r){let{url:n}=e,{realm:i}=e,{clientId:s}=e,{autoRefresh:o=!0}=e,{initOptions:a={}}=e,{loginOptions:c={}}=e,{customLabels:u={}}=e;const l=t=>window.location.origin+window.location.pathname.replace(/\/[^/]*$/,t),h=async()=>{let t;!f.userInfo&&f.authenticated&&await f.loadUserInfo(),t=f.authenticated?{authenticated:!0,access_token:f.token,refresh_token:f.refreshToken,user_info:f.userInfo,id_token:f.idToken}:{authenticated:!1},du.setComponentValue(t)};var d;let f,p;S(()=>{du.setFrameHeight()}),d=()=>{du.setFrameHeight(p)},I().$$.after_update.push(d);const y={...Du,...u};var b,g;b="localization",g=y,I().$$.context.set(b,g);return t.$$set=t=>{"url"in t&&r(6,n=t.url),"realm"in t&&r(7,i=t.realm),"clientId"in t&&r(8,s=t.clientId),"autoRefresh"in t&&r(9,o=t.autoRefresh),"initOptions"in t&&r(10,a=t.initOptions),"loginOptions"in t&&r(0,c=t.loginOptions),"customLabels"in t&&r(11,u=t.customLabels)},[c,f,p,()=>f.createLoginUrl({...c,redirectUri:l("/login.html")}),async()=>(r(1,f=new Lu({url:n,realm:i,clientId:s})),(t=>{r(1,f.onAuthError=async()=>await h(),f),r(1,f.onAuthRefreshError=async()=>await h(),f),r(1,f.onAuthSuccess=async()=>await h(),f),r(1,f.onAuthRefreshSuccess=async()=>await h(),f),r(1,f.onTokenExpired=async()=>{t&&f.refreshToken&&await f.updateToken(10)},f)})(o),f.init({...a,onLoad:"check-sso",silentCheckSsoRedirectUri:l("/check-sso.html")})),y,n,i,s,o,a,u,()=>{f.login(c)},function(){p=this.clientHeight,r(2,p)}]}return new class extends G{constructor(t){super(),J(this,t,gu,bu,o,{component:0,spreadArgs:1})}}({target:document.body,props:{component:class extends G{constructor(t){super(),J(this,t,Cu,Nu,o,{url:6,realm:7,clientId:8,autoRefresh:9,initOptions:10,loginOptions:0,customLabels:11})}},spreadArgs:!0}})}();
//# sourceMappingURL=bundle.js.map
